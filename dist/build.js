var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.ASSUME_ES5=!1;$jscomp.ASSUME_NO_NATIVE_MAP=!1;$jscomp.ASSUME_NO_NATIVE_SET=!1;$jscomp.defineProperty=$jscomp.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(b,a,c){b!=Array.prototype&&b!=Object.prototype&&(b[a]=c.value)};$jscomp.getGlobal=function(b){return"undefined"!=typeof window&&window===b?b:"undefined"!=typeof global&&null!=global?global:b};$jscomp.global=$jscomp.getGlobal(this);$jscomp.SYMBOL_PREFIX="jscomp_symbol_";
$jscomp.initSymbol=function(){$jscomp.initSymbol=function(){};$jscomp.global.Symbol||($jscomp.global.Symbol=$jscomp.Symbol)};$jscomp.Symbol=function(){var b=0;return function(a){return $jscomp.SYMBOL_PREFIX+(a||"")+b++}}();
$jscomp.initSymbolIterator=function(){$jscomp.initSymbol();var b=$jscomp.global.Symbol.iterator;b||(b=$jscomp.global.Symbol.iterator=$jscomp.global.Symbol("iterator"));"function"!=typeof Array.prototype[b]&&$jscomp.defineProperty(Array.prototype,b,{configurable:!0,writable:!0,value:function(){return $jscomp.arrayIterator(this)}});$jscomp.initSymbolIterator=function(){}};$jscomp.arrayIterator=function(b){var a=0;return $jscomp.iteratorPrototype(function(){return a<b.length?{done:!1,value:b[a++]}:{done:!0}})};
$jscomp.iteratorPrototype=function(b){$jscomp.initSymbolIterator();b={next:b};b[$jscomp.global.Symbol.iterator]=function(){return this};return b};$jscomp.makeIterator=function(b){$jscomp.initSymbolIterator();$jscomp.initSymbol();$jscomp.initSymbolIterator();var a=b[Symbol.iterator];return a?a.call(b):$jscomp.arrayIterator(b)};$jscomp.objectCreate=$jscomp.ASSUME_ES5||"function"==typeof Object.create?Object.create:function(b){var a=function(){};a.prototype=b;return new a};
$jscomp.underscoreProtoCanBeSet=function(){var b={a:!0},a={};try{return a.__proto__=b,a.a}catch(c){}return!1};$jscomp.setPrototypeOf="function"==typeof Object.setPrototypeOf?Object.setPrototypeOf:$jscomp.underscoreProtoCanBeSet()?function(b,a){b.__proto__=a;if(b.__proto__!==a)throw new TypeError(b+" is not extensible");return b}:null;
$jscomp.inherits=function(b,a){b.prototype=$jscomp.objectCreate(a.prototype);b.prototype.constructor=b;if($jscomp.setPrototypeOf){var c=$jscomp.setPrototypeOf;c(b,a)}else for(c in a)if("prototype"!=c)if(Object.defineProperties){var d=Object.getOwnPropertyDescriptor(a,c);d&&Object.defineProperty(b,c,d)}else b[c]=a[c];b.superClass_=a.prototype};$jscomp.arrayFromIterator=function(b){for(var a,c=[];!(a=b.next()).done;)c.push(a.value);return c};
$jscomp.arrayFromIterable=function(b){return b instanceof Array?b:$jscomp.arrayFromIterator($jscomp.makeIterator(b))};$jscomp.polyfill=function(b,a,c,d){if(a){c=$jscomp.global;b=b.split(".");for(d=0;d<b.length-1;d++){var f=b[d];f in c||(c[f]={});c=c[f]}b=b[b.length-1];d=c[b];a=a(d);a!=d&&null!=a&&$jscomp.defineProperty(c,b,{configurable:!0,writable:!0,value:a})}};
$jscomp.polyfill("Array.prototype.fill",function(b){return b?b:function(b,c,d){var a=this.length||0;0>c&&(c=Math.max(0,a+c));if(null==d||d>a)d=a;d=Number(d);0>d&&(d=Math.max(0,a+d));for(c=Number(c||0);c<d;c++)this[c]=b;return this}},"es6","es3");$jscomp.findInternal=function(b,a,c){b instanceof String&&(b=String(b));for(var d=b.length,f=0;f<d;f++){var h=b[f];if(a.call(c,h,f,b))return{i:f,v:h}}return{i:-1,v:void 0}};
$jscomp.polyfill("Array.prototype.find",function(b){return b?b:function(b,c){return $jscomp.findInternal(this,b,c).v}},"es6","es3");$jscomp.polyfill("Array.prototype.findIndex",function(b){return b?b:function(b,c){return $jscomp.findInternal(this,b,c).i}},"es6","es3");var origin={x:0,y:0,z:0},Vector=function(b,a){a||(a=b,b=origin);this.x=a.x-b.x;this.y=a.y-b.y;this.z=a.z-b.z};Vector.prototype.add=function(b){return new Vector(origin,{x:this.x+b.x,y:this.y+b.y,z:this.z+b.z})};
Vector.prototype.subtract=function(b){return this.add({x:-b.x,y:-b.y,z:-b.z})};Vector.prototype.multiply=function(b){return new Vector(origin,{x:this.x*b,y:this.y*b,z:this.z*b})};Vector.prototype.magnitude=function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)};Vector.prototype.unit=function(){return this.multiply(1/this.magnitude())};Vector.prototype.cross=function(b){return new Vector(origin,{x:this.y*b.z-this.z*b.y,y:this.z*b.x-this.x*b.z,z:this.x*b.y-this.y*b.x})};
var qDimensions=["w","x","y","z"],qProductSign=[[1,1,1,1],[1,-1,1,-1],[1,-1,-1,1],[1,1,-1,-1]],qProductAxis=[[0,1,2,3],[1,0,3,2],[2,3,0,1],[3,2,1,0]],Quaternion=function(b,a,c,d){this.w=b;this.x=a;this.y=c;this.z=d};Quaternion.prototype.conjugate=function(){return new Quaternion(this.w,-this.x,-this.y,-this.z)};
Quaternion.prototype.multiply=function(b){for(var a=new Quaternion(0,0,0,0),c=0;4>c;c++)for(var d=0;4>d;d++)a[qDimensions[qProductAxis[c][d]]]+=qProductSign[c][d]*this[qDimensions[c]]*b[qDimensions[d]];return a};var Point=function(b,a,c,d){this.base={x:b,y:a,z:c};this.x=b;this.y=a;this.z=c;this.id=d};Point.prototype.update=function(b){b=this.rotateAroundAxis(this.base,b.axis.unit(),b.angle);var a=b.y,c=b.z;this.x=b.x;this.y=a;this.z=c};
Point.prototype.saveOrientation=function(b){this.update(b);this.base.x=this.x;this.base.y=this.y;this.base.z=this.z};Point.prototype.clone=function(){return new Point(this.x,this.y,this.z,this.id)};Point.prototype.rotateAroundAxis=function(b,a,c){var d=Math.sin(c/2);a=new Quaternion(Math.cos(c/2),d*a.x,d*a.y,d*a.z);b=new Quaternion(0,b.x,b.y,b.z);b=a.multiply(b).multiply(a.conjugate());return new Point(b.x,b.y,b.z)};var Sticker=function(b,a,c){this.id=b;this.color=a;this.points=c;this.attractor={}};
Sticker.prototype.contains=function(b){for(var a=this.points[this.points.length-1],c=0,d=$jscomp.makeIterator(this.points),f=d.next();!f.done;f=d.next()){f=f.value;a=(new Vector(a,f)).cross(new Vector(a,b));if(0>c&&0<a.z||0<c&&0>a.z)return!1;0!==a.z&&(c=a.z);a=f}return!0};Sticker.prototype.calculateNormalVector=function(){return(new Vector(this.points[0],this.points[1])).cross(new Vector(this.points[0],this.points[this.points.length-1]))};
Sticker.prototype.update=function(b){this.points.forEach(function(a){return a.update(b)});this.attractor={x:this.points.reduce(function(b,c){return b+c.x},0),y:this.points.reduce(function(b,c){return b+c.y},0),z:this.points.reduce(function(b,c){return b+c.z},0)}};Sticker.prototype.getPointProjection=function(b,a,c){b=[b.x,b.y];c&&(b[0]+=(this.attractor.x-b[0])/(10*this.points.length),b[1]+=(this.attractor.y-b[1])/(10*this.points.length));a&&(b[0]=-b[0]);return b};
Sticker.prototype.render=function(b,a,c){var d=this;b.fillStyle=this.color;b.strokeStyle="#202020";b.beginPath();b.moveTo.apply(b,$jscomp.arrayFromIterable(this.getPointProjection(this.points[0],a,c)));this.points.forEach(function(f){return b.lineTo.apply(b,$jscomp.arrayFromIterable(d.getPointProjection(f,a,c)))});b.closePath();b.fill();b.stroke()};var Face=function(b){this.stickers=b;this.normalVector=this.stickers[0].calculateNormalVector()};
Face.prototype.update=function(b){this.stickers.forEach(function(a){return a.update(b)});this.normalVector=this.stickers[0].calculateNormalVector()};Face.prototype.render=function(b,a,c){this.stickers.forEach(function(d){return d.render(b,a,c)})};var Cycle=function(b,a,c,d){this.stickerCollections=b;this.period=a;this.unitVector=c;this.animationConfig=d;this.stickerCover={}};
Cycle.prototype.computeStickerCover=function(){var b=this;this.stickerCollections.forEach(function(a){return a.forEach(function(a){return b.stickerCover[a.id]=!0})})};Cycle.prototype.saveOrientation=function(b){var a=new Point(this.unitVector.x,this.unitVector.y,this.unitVector.z);a.update(b);this.unitVector=new Vector(a)};
Cycle.prototype.twist=function(b){var a=this;b=void 0===b?1:b;this.stickerCollections.forEach(function(c){if(1!==c.length){var d=b*c.length/a.period;c.forEach(function(b,a){b.newColor=c[mod(a-d,c.length)].color});c.forEach(function(b){b.color=b.newColor;delete b.newColor})}})};
var Puzzle=function(b,a){this.faces=b;this.cycles=a;this.twisting=this.rotating=!1;this.startEvtCoordinates={};this.baseOrientation={axis:new Vector({x:1,y:0,z:0}),angle:0};this.animationState={active:!1,counter:0,direction:void 0,cycle:void 0};this.stickers=[].concat.apply([],$jscomp.arrayFromIterable(this.faces.map(function(b){return b.stickers})));this.startTime=void 0;this.movesMade=0;this.cycleMap={};this.processCycleMap();this.startSticker=void 0};
Puzzle.prototype.isSolved=function(){for(var b=0;b<this.faces.length;b++)for(var a=0;a<this.faces[b].stickers.length;a++)if(this.faces[b].stickers[a].color!==this.faces[b].stickers[0].color)return!1;return!0};Puzzle.prototype.processCycleMap=function(){var b=this;this.cycles.forEach(function(a){return a.stickerCollections.forEach(function(c){c.isPrimary&&c.forEach(function(c){b.cycleMap[c.id]=b.cycleMap[c.id]||[];b.cycleMap[c.id].push(a)})})})};
Puzzle.prototype.update=function(){var b=this;if(this.animationState.active&&this.animationState.counter<this.animationState.cycle.animationConfig.steps){var a={axis:this.animationState.cycle.unitVector,angle:this.animationState.direction*this.animationState.counter*this.animationState.cycle.animationConfig.dAlpha};this.stickers.forEach(function(c){b.animationState.cycle.stickerCover[c.id]&&c.update(a)});this.stickers.sort(function(b,a){return a.attractor.z-b.attractor.z});this.animationState.counter++}else if(this.faces.forEach(function(a){return a.update(b.updatedOrientation||
b.baseOrientation)}),this.faces.sort(function(b,a){return a.normalVector.z-b.normalVector.z}),this.animationState.active){this.animationState.cycle.twist(this.animationState.direction);this.startTime&&this.isSolved()?(this.onFinish&&this.onFinish(((new Date).getTime()-this.startTime)/1E3),this.startTime=void 0,this.movesMade=0):this.startTime&&this.movesMade++;if(this.animationState.callback&&(this.animationState.callback(),this.animationState.counter<this.animationState.cycle.animationConfig.steps))return this.update();
this.animationState={active:!1,counter:0,direction:void 0,cycle:void 0}}};Puzzle.prototype.findTouchedSticker=function(b,a){for(var c,d=this.faces.length-1;0<=d&&!(0<=this.faces[d].normalVector.z);d--)if(c=this.faces[d].stickers.find(function(c){return c.contains({x:b,y:a,z:0})}))return c};Puzzle.prototype.grab=function(b,a,c){this.startEvtCoordinates.x=b;this.startEvtCoordinates.y=a;2==c?this.rotating=!0:(this.startSticker=this.findTouchedSticker(b,a),this.twisting=!!this.startSticker)};
Puzzle.prototype.drag=function(b,a){if(!this.animationState.active)if(this.rotating){if(b=(b-this.startEvtCoordinates.x)/100,a=(a-this.startEvtCoordinates.y)/100,b||a)a=new Vector({x:a,y:-b,z:0}),this.updatedOrientation={axis:a,angle:a.magnitude()}}else this.twisting&&(a=new Vector(new Point(this.startEvtCoordinates.x,this.startEvtCoordinates.y,0),new Point(b,a,0)),20<a.magnitude()&&this.detectCycle(a))};
Puzzle.prototype.detectCycle=function(b){if(this.cycleMap[this.startSticker.id]){var a=0,c,d;this.cycleMap[this.startSticker.id].forEach(function(f){var h=new Point(f.unitVector.x,f.unitVector.y,f.unitVector.z);h.z=0;h=new Vector(h);h=b.cross(h);a<h.magnitude()&&(a=h.magnitude(),c=f,d=0<h.z?-1:1)});this.animationState={active:!0,counter:0,direction:d,cycle:c};this.release()}};
Puzzle.prototype.release=function(){this.twisting=this.rotating=!1;this.startEvtCoordinates={};this.updatedOrientation&&(this.saveOrientation(this.updatedOrientation),this.updatedOrientation=void 0);this.startSticker=void 0};Puzzle.prototype.saveOrientation=function(b){this.stickers.forEach(function(a){return a.points.forEach(function(a){return a.saveOrientation(b)})});this.cycles.forEach(function(a){return a.saveOrientation(b)})};
Puzzle.prototype.scramble=function(){for(var b=this,a=3*this.cycles.length,c=[],d=0;d<a;d++)c.push({cycle:this.cycles[Math.floor(Math.random()*this.cycles.length)],direction:.5>Math.random()?-1:1});var f=[];c.forEach(function(d,n){var h=d.cycle;d=d.direction;n&&h===c[n-1].cycle&&(d=c[n-1].direction);f.push({active:!0,counter:0,direction:d,cycle:h,callback:n<a-1?function(){return b.animationState=f[n+1]}:function(){return b.startTime=(new Date).getTime()}})});this.animationState=f[0]};
Puzzle.prototype.render=function(b,a,c){c=void 0===c?!0:c;if(this.animationState.active){var d=$jscomp.makeIterator(a?[this.stickers.length-1,-1,-1]:[0,this.stickers.length,1]),f=d.next().value,h=d.next().value;for(d=d.next().value;f!==h;f+=d)this.stickers[f].render(b,a,c)}else for(d=$jscomp.makeIterator(a?[this.faces.length-1,-1,-1]:[0,this.faces.length,1]),f=d.next().value,h=d.next().value,d=d.next().value;f!==h;f+=d)this.faces[f].render(b,a,c)};
var Cube=function(b,a){b=void 0===b?2:b;a=void 0===a?250:a;var c=a/b,d=a/2,f={steps:10,dAlpha:Math.PI/2/10},h={},n=[];a=[{slices:[{fIndex:1,sIndex:0,sJump:b,cJump:1},{fIndex:3,sIndex:b-1,sJump:-1,cJump:b},{fIndex:0,sIndex:(b-1)*b,sJump:-b,cJump:1},{fIndex:2,sIndex:0,sJump:1,cJump:b}],attachedFaces:{ffIndex:4,lfIndex:5,iStep:b,jStep:1},unitVector:new Vector(new Point(0,0,1))},{slices:[{fIndex:1,sIndex:0,sJump:1,cJump:b},{fIndex:5,sIndex:(b-1)*b,sJump:-b,cJump:1},{fIndex:0,sIndex:b-1,sJump:-1,cJump:b},
{fIndex:4,sIndex:0,sJump:b,cJump:1}],attachedFaces:{ffIndex:2,lfIndex:3,iStep:1,jStep:b},unitVector:new Vector(new Point(0,-1,0))},{slices:[{fIndex:2,sIndex:0,sJump:b,cJump:1},{fIndex:5,sIndex:0,sJump:1,cJump:b},{fIndex:3,sIndex:(b-1)*b,sJump:-b,cJump:1},{fIndex:4,sIndex:b-1,sJump:-1,cJump:b}],attachedFaces:{ffIndex:0,lfIndex:1,iStep:1,jStep:b},unitVector:new Vector(new Point(-1,0,0))}];var l=[{key:"iStep",dir:1},{key:"jStep",dir:1},{key:"iStep",dir:-1},{key:"jStep",dir:-1}],v,q,r,m,t,u;[{fixed:"x",
direction:-1,variable:["y","z"],color:"yellow"},{fixed:"x",direction:1,variable:["y","z"],color:"white"},{fixed:"y",direction:-1,variable:["z","x"],color:"blue"},{fixed:"y",direction:1,variable:["z","x"],color:"lawngreen"},{fixed:"z",direction:-1,variable:["x","y"],color:"red"},{fixed:"z",direction:1,variable:["x","y"],color:"darkorange"}].forEach(function(a,k){var g=[];v=-d;for(var e=0;e<=b;e++){q=-d;for(var f=0;f<=b;f++)m="p-"+k+"-"+e+"-"+f,r={},r[a.fixed]=a.direction*d,r[a.variable[0]]=v,r[a.variable[1]]=
q,h[m]=new Point(r.x,r.y,r.z,m),e&&f&&(t="s-"+k+"-"+e+"-"+f,u=[h["p-"+k+"-"+e+"-"+f].clone(),h["p-"+k+"-"+(e-1)+"-"+f].clone(),h["p-"+k+"-"+(e-1)+"-"+(f-1)].clone(),h["p-"+k+"-"+e+"-"+(f-1)].clone()],-1===a.direction&&u.reverse(),g.push(new Sticker(t,a.color,u))),q+=c;v+=c}n.push(new Face(g))});var e=[],k,g,w,y,p,x,z;a.forEach(function(a){for(var c={c:0};c.c<b;c={c:c.c},c.c++)k=new Cycle([],4,a.unitVector,f),g=[],a.slices.forEach(function(a){return function(c){for(var k=0;k<b;k++)w=c.sIndex+k*c.sJump+
a.c*c.cJump,g.push(n[c.fIndex].stickers[w])}}(c)),k.stickerCollections.push(g),e.push(k);y=e[e.length-b];x=n[a.attachedFaces.ffIndex];for(c={c$5:0};c.c$5<Math.floor(b/2);c={c$5:c.c$5},c.c$5++)g=[],w=c.c$5*(b+1),l.forEach(function(c){return function(k){var d=k.key;k=k.dir;for(var e=0;e<b-2*c.c$5-1;e++)g.push(x.stickers[w]),w+=a.attachedFaces[d]*k}}(c)),y.stickerCollections.push(g);p=e[e.length-1];z=n[a.attachedFaces.lfIndex];for(c={c$6:0};c.c$6<Math.floor(b/2);c={c$6:c.c$6},c.c$6++)g=[],w=c.c$6*(b+
1),l.forEach(function(c){return function(k){var d=k.key;k=k.dir;for(var e=0;e<b-2*c.c$6-1;e++)g.push(z.stickers[w]),w+=a.attachedFaces[d]*k}}(c)),p.stickerCollections.push(g);b%2&&(y.stickerCollections.push([x.stickers[(b*b-1)/2]]),p.stickerCollections.push([z.stickers[(b*b-1)/2]]))});e.forEach(function(b){b.stickerCollections[0].isPrimary=!0;b.computeStickerCover()});Puzzle.call(this,n,e);this.saveOrientation({axis:new Vector({x:0,y:1,z:0}),angle:Math.PI/4});this.saveOrientation({axis:new Vector({x:1,
y:0,z:0}),angle:Math.PI/8})};$jscomp.inherits(Cube,Puzzle);
var Tetrahedron=function(b,a){b=void 0===b?3:b;a=void 0===a?200:a;var c=a/Math.sqrt(2),d={steps:10,dAlpha:2*Math.PI/3/10},f={},h=[],n=[];c=[new Point(a,0,c),new Point(-a,0,c),new Point(0,a,-c),new Point(0,-a,-c)];a=[{points:[c[0],c[2],c[1]],color:"white"},{points:[c[0],c[1],c[3]],color:"blue"},{points:[c[0],c[3],c[2]],color:"lawngreen"},{points:[c[1],c[2],c[3]],color:"red"}];c=[{slices:[{fIndex:0,sIJ:function(b){return[b,0]},dIJ:function(){return[0,1]}},{fIndex:1,sIJ:function(b){return[b,0]},dIJ:function(){return[0,
1]}},{fIndex:2,sIJ:function(b){return[b,0]},dIJ:function(){return[0,1]}}],attachedFace:{fIndex:3,steps:[function(){return[1,2]},function(){return[0,-2]},function(){return[-1,0]}]},unitVector:(new Vector(c[0])).unit()},{slices:[{fIndex:0,sIJ:function(a){return[b-a-1,2*(b-a-1)]},dIJ:function(b,a){return[a%2?0:1,a%2?-1:1]}},{fIndex:3,sIJ:function(b){return[b,0]},dIJ:function(){return[0,1]}},{fIndex:1,sIJ:function(a){return[b-1,2*a]},dIJ:function(b,a){return[a%2?-1:0,-1]}}],attachedFace:{fIndex:2,steps:[function(){return[1,
2]},function(){return[0,-2]},function(){return[-1,0]}]},unitVector:(new Vector(c[1])).unit()},{slices:[{fIndex:0,sIJ:function(a){return[b-1,2*a]},dIJ:function(b,a){return[a%2?-1:0,-1]}},{fIndex:2,sIJ:function(a){return[b-a-1,2*(b-a-1)]},dIJ:function(b,a){return[a%2?0:1,a%2?-1:1]}},{fIndex:3,sIJ:function(a){return[b-1,2*a]},dIJ:function(b,a){return[a%2?-1:0,-1]}}],attachedFace:{fIndex:1,steps:[function(){return[1,2]},function(){return[0,-2]},function(){return[-1,0]}]},unitVector:(new Vector(c[2])).unit()},
{slices:[{fIndex:1,sIJ:function(a){return[b-a-1,2*(b-a-1)]},dIJ:function(b,a){return[a%2?0:1,a%2?-1:1]}},{fIndex:3,sIJ:function(a){return[b-a-1,2*(b-a-1)]},dIJ:function(b,a){return[a%2?0:1,a%2?-1:1]}},{fIndex:2,sIJ:function(a){return[b-1,2*a]},dIJ:function(b,a){return[a%2?-1:0,-1]}}],attachedFace:{fIndex:0,steps:[function(){return[1,2]},function(){return[0,-2]},function(){return[-1,0]}]},unitVector:(new Vector(c[3])).unit()}];a.forEach(function(a,c){for(var k=[],d=[a.points[0].clone()],e,p,x,m,t,
A=(new Vector(a.points[0],a.points[1])).multiply(1/b),u=(new Vector(a.points[1],a.points[2])).multiply(1/b),n,l={i:0};l.i<b;l={i:l.i},l.i++){e=[];n=A.add(d[0]);e.push(new Point(n.x,n.y,n.z));for(var q=0;q<=l.i;q++)n=u.add(n),e.push(new Point(n.x,n.y,n.z));d.forEach(function(b){return function(g,w){p=g.clone();x=e[w].clone();m=e[w+1].clone();p.id="p-"+c+"-"+b.i+"-"+w;x.id="p-"+c+"-"+(b.i+1)+"-"+w;m.id="p-"+c+"-"+(b.i+1)+"-"+(w+1);p.clone();x.clone();m.clone();k.push(new Sticker("s-"+c+"-"+b.i+"-"+
2*w,a.color,[p,x,m]));f[k[k.length-1].id]=k[k.length-1];w<d.length-1&&(p=p.clone(),m=m.clone(),t=d[w+1].clone(),t.id="q-"+c+"-"+b.i+"-"+(w+1),p.clone(),m.clone(),t.clone(),k.push(new Sticker("s-"+c+"-"+b.i+"-"+(2*w+1),a.color,[p,m,t])),f[k[k.length-1].id]=k[k.length-1])}}(l));d=e}h.push(new Face(k))});var l,v,q,r,m,t,u;c.forEach(function(a){for(var c={c:0};c.c<b;c={c:c.c},c.c++)l=new Cycle([],3,a.unitVector,d),q=[],a.slices.forEach(function(b){return function(a){var c=$jscomp.makeIterator(a.sIJ(b.c));
r=c.next().value;m=c.next().value;for(c=0;c<1+2*b.c;c++){var k=$jscomp.makeIterator(a.dIJ(b.c,c));t=k.next().value;u=k.next().value;q.push(f["s-"+a.fIndex+"-"+r+"-"+m]);r+=t;m+=u}}}(c)),l.stickerCollections.push(q),n.push(l);l=n[n.length-1];v=a.attachedFace.fIndex;var g=b-1;c=1;for(var e=0,y,p,h;0<g;)p=h=e,q=[],a.attachedFace.steps.forEach(function(b){for(var a=y=0;a<g;a++){var c=$jscomp.makeIterator(b(e,y)),k=c.next().value;c=c.next().value;q.push(f["s-"+v+"-"+p+"-"+h]);p+=k;h+=c;y+=1}}),l.stickerCollections.push(q),
e+=1,g-=c,c=2===c?1:2;f["s-"+v+"-"+e+"-"+e]&&l.stickerCollections.push([f["s-"+v+"-"+e+"-"+e]])});n.forEach(function(b){b.stickerCollections[0].isPrimary=!0;b.computeStickerCover()});Puzzle.call(this,h,n);this.saveOrientation({axis:new Vector({x:0,y:1,z:0}),angle:Math.PI/3})};$jscomp.inherits(Tetrahedron,Puzzle);
var Octahedron=function(b,a){b=void 0===b?2:b;a=void 0===a?200:a;var c={steps:10,dAlpha:2*Math.PI/3/10},d={},f=[],h=[];a=[new Point(0,0,-a),new Point(a,0,0),new Point(0,a,0),new Point(-a,0,0),new Point(0,-a,0),new Point(0,0,a)];a=[{points:[a[0],a[2],a[1]],color:"white"},{points:[a[0],a[1],a[4]],color:"blue"},{points:[a[0],a[4],a[3]],color:"lawngreen"},{points:[a[0],a[3],a[2]],color:"skyblue"},{points:[a[5],a[1],a[2]],color:"red"},{points:[a[5],a[2],a[3]],color:"darkorange"},{points:[a[5],a[3],a[4]],
color:"purple"},{points:[a[5],a[4],a[1]],color:"yellow"}];var n=[{slices:[{fIndex:4,sIJ:function(a){return[b-a-1,2*(b-a-1)]},dIJ:function(){return[0,-1]},limJ:function(a){return 1+2*(b-a-1)}},{fIndex:7,sIJ:function(a){return[b-a-1,2*(b-a-1)]},dIJ:function(b,a){return[a%2?0:1,a%2?-1:1]},limJ:function(b){return 1+2*b}},{fIndex:1,sIJ:function(a){return[b-1,2*a]},dIJ:function(b,a){return[a%2?-1:0,a%2?-1:1]},limJ:function(a){return 1+2*(b-a-1)}},{fIndex:2,sIJ:function(b){return[b,0]},dIJ:function(){return[0,
1]},limJ:function(b){return 1+2*b}},{fIndex:3,sIJ:function(b){return[b,0]},dIJ:function(b,a){return[a%2?0:1,1]},limJ:function(a){return 1+2*(b-a-1)}},{fIndex:5,sIJ:function(a){return[b-1,2*a]},dIJ:function(b,a){return[a%2?-1:0,-1]},limJ:function(b){return 1+2*b}}],attachedFaces:[{fIndex:0,steps:[function(){return[1,0]},function(){return[0,2]},function(){return[-1,-2]}]},{fIndex:6,steps:[function(){return[1,2]},function(){return[0,-2]},function(){return[-1,0]}]}],unitVector:(new Vector(new Point(1,
1,-1))).unit()},{slices:[{fIndex:0,sIJ:function(b){return[b,0]},dIJ:function(b,a){return[a%2?0:1,1]},limJ:function(a){return 1+2*(b-a-1)}},{fIndex:4,sIJ:function(a){return[b-1,2*a]},dIJ:function(a,b){return[b%2?-1:0,-1]},limJ:function(b){return 1+2*b}},{fIndex:7,sIJ:function(a){return[b-a-1,2*(b-a-1)]},dIJ:function(){return[0,-1]},limJ:function(a){return 1+2*(b-a-1)}},{fIndex:6,sIJ:function(a){return[b-a-1,2*(b-a-1)]},dIJ:function(a,b){return[b%2?0:1,b%2?-1:1]},limJ:function(a){return 1+2*a}},{fIndex:2,
sIJ:function(a){return[b-1,2*a]},dIJ:function(a,b){return[b%2?-1:0,b%2?-1:1]},limJ:function(a){return 1+2*(b-a-1)}},{fIndex:3,sIJ:function(a){return[a,0]},dIJ:function(){return[0,1]},limJ:function(a){return 1+2*a}}],attachedFaces:[{fIndex:1,steps:[function(){return[1,0]},function(){return[0,2]},function(){return[-1,-2]}]},{fIndex:5,steps:[function(){return[1,2]},function(){return[0,-2]},function(){return[-1,0]}]}],unitVector:(new Vector(new Point(1,-1,-1))).unit()},{slices:[{fIndex:1,sIJ:function(a){return[a,
0]},dIJ:function(a,b){return[b%2?0:1,1]},limJ:function(a){return 1+2*(b-a-1)}},{fIndex:7,sIJ:function(a){return[b-1,2*a]},dIJ:function(a,b){return[b%2?-1:0,-1]},limJ:function(a){return 1+2*a}},{fIndex:6,sIJ:function(a){return[b-a-1,2*(b-a-1)]},dIJ:function(){return[0,-1]},limJ:function(a){return 1+2*(b-a-1)}},{fIndex:5,sIJ:function(a){return[b-a-1,2*(b-a-1)]},dIJ:function(a,b){return[b%2?0:1,b%2?-1:1]},limJ:function(a){return 1+2*a}},{fIndex:3,sIJ:function(a){return[b-1,2*a]},dIJ:function(a,b){return[b%
2?-1:0,b%2?-1:1]},limJ:function(a){return 1+2*(b-a-1)}},{fIndex:0,sIJ:function(a){return[a,0]},dIJ:function(){return[0,1]},limJ:function(a){return 1+2*a}}],attachedFaces:[{fIndex:2,steps:[function(){return[1,0]},function(){return[0,2]},function(){return[-1,-2]}]},{fIndex:4,steps:[function(){return[1,2]},function(){return[0,-2]},function(){return[-1,0]}]}],unitVector:(new Vector(new Point(-1,-1,-1))).unit()},{slices:[{fIndex:2,sIJ:function(a){return[a,0]},dIJ:function(a,b){return[b%2?0:1,1]},limJ:function(a){return 1+
2*(b-a-1)}},{fIndex:6,sIJ:function(a){return[b-1,2*a]},dIJ:function(a,b){return[b%2?-1:0,-1]},limJ:function(a){return 1+2*a}},{fIndex:5,sIJ:function(a){return[b-a-1,2*(b-a-1)]},dIJ:function(){return[0,-1]},limJ:function(a){return 1+2*(b-a-1)}},{fIndex:4,sIJ:function(a){return[b-a-1,2*(b-a-1)]},dIJ:function(a,b){return[b%2?0:1,b%2?-1:1]},limJ:function(a){return 1+2*a}},{fIndex:0,sIJ:function(a){return[b-1,2*a]},dIJ:function(a,b){return[b%2?-1:0,b%2?-1:1]},limJ:function(a){return 1+2*(b-a-1)}},{fIndex:1,
sIJ:function(a){return[a,0]},dIJ:function(){return[0,1]},limJ:function(a){return 1+2*a}}],attachedFaces:[{fIndex:3,steps:[function(){return[1,0]},function(){return[0,2]},function(){return[-1,-2]}]},{fIndex:7,steps:[function(){return[1,2]},function(){return[0,-2]},function(){return[-1,0]}]}],unitVector:(new Vector(new Point(-1,1,-1))).unit()}];a.forEach(function(a,c){for(var e=[],g=[a.points[0].clone()],h,k,m,n,t,l=(new Vector(a.points[0],a.points[1])).multiply(1/b),u=(new Vector(a.points[1],a.points[2])).multiply(1/
b),q,r={i:0};r.i<b;r={i:r.i},r.i++){h=[];q=l.add(g[0]);h.push(new Point(q.x,q.y,q.z));for(var v=0;v<=r.i;v++)q=u.add(q),h.push(new Point(q.x,q.y,q.z));g.forEach(function(b){return function(f,p){k=f.clone();m=h[p].clone();n=h[p+1].clone();k.id="p-"+c+"-"+b.i+"-"+p;m.id="p-"+c+"-"+(b.i+1)+"-"+p;n.id="p-"+c+"-"+(b.i+1)+"-"+(p+1);k.clone();m.clone();n.clone();e.push(new Sticker("s-"+c+"-"+b.i+"-"+2*p,a.color,[k,m,n]));d[e[e.length-1].id]=e[e.length-1];p<g.length-1&&(k=k.clone(),n=n.clone(),t=g[p+1].clone(),
t.id="q-"+c+"-"+b.i+"-"+(p+1),k.clone(),n.clone(),t.clone(),e.push(new Sticker("s-"+c+"-"+b.i+"-"+(2*p+1),a.color,[k,n,t])),d[e[e.length-1].id]=e[e.length-1])}}(r));g=h}f.push(new Face(e))});var l,v,q,r,m,t,u,e;n.forEach(function(a){for(var f={c:0};f.c<b;f={c:f.c},f.c++)l=new Cycle([],3,a.unitVector,c),q=[],a.slices.forEach(function(a){return function(b){var c=$jscomp.makeIterator(b.sIJ(a.c));r=c.next().value;m=c.next().value;e=b.limJ(a.c);for(c=0;c<e;c++){var f=$jscomp.makeIterator(b.dIJ(a.c,c));
t=f.next().value;u=f.next().value;q.push(d["s-"+b.fIndex+"-"+r+"-"+m]);r+=t;m+=u}}}(f)),l.stickerCollections.push(q),h.push(l);a.attachedFaces.forEach(function(a,c){l=c?h[h.length-1]:h[h.length-b];v=a.fIndex;var f=b-1;c=1;for(var e=0,g,k,m;0<f;)k=m=e,q=[],a.steps.forEach(function(a){for(var b=g=0;b<f;b++){var c=$jscomp.makeIterator(a(e,g)),h=c.next().value;c=c.next().value;q.push(d["s-"+v+"-"+k+"-"+m]);k+=h;m+=c;g+=1}}),l.stickerCollections.push(q),e+=1,f-=c,c=2===c?1:2;d["s-"+v+"-"+e+"-"+e]&&l.stickerCollections.push([d["s-"+
v+"-"+e+"-"+e]])})});h.forEach(function(a){a.stickerCollections[0].isPrimary=!0;a.computeStickerCover()});Puzzle.call(this,f,h);this.saveOrientation({axis:new Vector({x:0,y:1,z:0}),angle:Math.PI/12});this.saveOrientation({axis:new Vector({x:1,y:0,z:0}),angle:Math.PI/24})};$jscomp.inherits(Octahedron,Puzzle);
var Dodecahedron=function(b,a){b=void 0===b?1:b;var c=(1+Math.sqrt(5))/2;a=(void 0===a?200:a)/2;var d=a*c;c=1*a/c;var f=[],h=[],n={},l={},v={steps:10,dAlpha:2*Math.PI/5/10};c=[new Point(a,a,a,"r0"),new Point(a,a,-a,"r1"),new Point(a,-a,a,"r2"),new Point(a,-a,-a,"r3"),new Point(-a,a,a,"r4"),new Point(-a,a,-a,"r5"),new Point(-a,-a,a,"r6"),new Point(-a,-a,-a,"r7"),new Point(d,c,0,"r8"),new Point(d,-c,0,"r9"),new Point(-d,c,0,"r10"),new Point(-d,-c,0,"r11"),new Point(0,d,c,"r12"),new Point(0,d,-c,"r13"),
new Point(0,-d,c,"r14"),new Point(0,-d,-c,"r15"),new Point(c,0,d,"r16"),new Point(c,0,-d,"r17"),new Point(-c,0,d,"r18"),new Point(-c,0,-d,"r19")];var q=[{points:[c[8],c[1],c[13],c[12],c[0]],color:"purple"},{points:[c[9],c[2],c[14],c[15],c[3]],color:"magenta"},{points:[c[10],c[4],c[12],c[13],c[5]],color:"white"},{points:[c[11],c[7],c[15],c[14],c[6]],color:"yellow"},{points:[c[12],c[4],c[18],c[16],c[0]],color:"pink"},{points:[c[13],c[1],c[17],c[19],c[5]],color:"blue"},{points:[c[14],c[2],c[16],c[18],
c[6]],color:"green"},{points:[c[15],c[7],c[19],c[17],c[3]],color:"crimson"},{points:[c[16],c[2],c[9],c[8],c[0]],color:"red"},{points:[c[17],c[1],c[8],c[9],c[3]],color:"lawngreen"},{points:[c[18],c[4],c[10],c[11],c[6]],color:"brown"},{points:[c[19],c[7],c[11],c[10],c[5]],color:"skyblue"}];c=function(a){return q[a].points.reduce(function(a,b){return a.add(b)},new Vector({x:0,y:0,z:0}))};a=[];for(d=0;12>d;d++){var r={unitVector:c(d),slices:{length:5}},m=void 0;for(m=0;12>m;m++)if(m!=d)for(var t=0;5>
t;t++)for(var u=0;5>u;u++)if(q[d].points[t].id==q[m].points[u].id&&q[d].points[mod(t+1,5)].id==q[m].points[mod(u-1,5)].id){var e=u;var k=mod(u-1,5);r.slices[t]={face:m,startV:e,endV:k}}r.slices=Array.prototype.slice.apply(r.slices);a.push(r)}q.forEach(function(a,c){var d=[];a.points.forEach(function(f,e){var h=new Vector(f),k=(new Vector(f,a.points[mod(e+1,a.points.length)])).multiply(1/(2*b));f=(new Vector(f,a.points[mod(e-1,a.points.length)])).multiply(1/(2*b));var g,m;for(g=0;g<=b;g++)for(m=0;m<=
b;m++){var p=h.add(k.multiply(g)).add(f.multiply(m));n["p-"+c+"-"+e+"-"+g+"-"+m]=new Point(p.x,p.y,p.z);g&&m&&(d.push(new Sticker("s-"+c+"-"+e+"-"+(g-1)+"-"+(m-1),a.color,[n["p-"+c+"-"+e+"-"+g+"-"+m].clone(),n["p-"+c+"-"+e+"-"+(g-1)+"-"+m].clone(),n["p-"+c+"-"+e+"-"+(g-1)+"-"+(m-1)].clone(),n["p-"+c+"-"+e+"-"+g+"-"+(m-1)].clone()])),l[d[d.length-1].id]=d[d.length-1])}p=(new Vector(a.points[mod(e,a.points.length)],a.points[mod(e-1,a.points.length)])).multiply(1/(2*b));m=(new Vector(a.points[mod(e+
1,a.points.length)],a.points[mod(e+2,a.points.length)])).multiply(1/(2*b));var t=h.add(k.multiply(b));for(g=0;g<=b;g++){var u=t.add(p.multiply(g));var q=t.add(m.multiply(g));n["p-m-"+c+"-"+e+"-"+g+"-l"]=new Point(u.x,u.y,u.z);n["p-m-"+c+"-"+e+"-"+g+"-r"]=new Point(q.x,q.y,q.z);g&&(d.push(new Sticker("s-"+c+"-"+e+"-"+(g-1)+"-"+b,a.color,[n["p-m-"+c+"-"+e+"-"+g+"-l"].clone(),n["p-m-"+c+"-"+e+"-"+g+"-r"].clone(),n["p-m-"+c+"-"+e+"-"+(g-1)+"-r"].clone(),n["p-m-"+c+"-"+e+"-"+(g-1)+"-l"].clone()])),l[d[d.length-
1].id]=d[d.length-1])}h=h.add(k.multiply(b)).add(f.multiply(b));n["p-"+c+"-"+e]=new Point(h.x,h.y,h.z)});d.push(new Sticker("s-"+c,a.color,[n["p-"+c+"-0"].clone(),n["p-"+c+"-1"].clone(),n["p-"+c+"-2"].clone(),n["p-"+c+"-3"].clone(),n["p-"+c+"-4"].clone()]));l[d[d.length-1].id]=d[d.length-1];f.push(new Face(d))});a.forEach(function(a,c){for(var d,f={i:0};f.i<b;f={i:f.i,stickerCollection$8:f.stickerCollection$8},f.i++){for(var e=new Cycle([],5,a.unitVector,v),g={j:0};g.j<b;g={stickerCollection:g.stickerCollection,
j:g.j},g.j++)g.stickerCollection=[],a.slices.forEach(function(a,b){return function(c){a.stickerCollection.push(l["s-"+c.face+"-"+c.startV+"-"+b.i+"-"+a.j]);a.stickerCollection.push(l["s-"+c.face+"-"+c.endV+"-"+a.j+"-"+b.i])}}(g,f)),e.stickerCollections.push(g.stickerCollection);f.stickerCollection$8=[];a.slices.forEach(function(a){return function(c){a.stickerCollection$8.push(l["s-"+c.face+"-"+c.endV+"-"+a.i+"-"+b])}}(f));e.stickerCollections.push(f.stickerCollection$8);e.stickerCollections.forEach(function(a){return a.isPrimary=
!0});h.push(e);f.i||(d=e)}for(a=0;a<b;a++)for(f=0;f<=b;f++){e=[];for(g=0;5>g;g++)e.push(l["s-"+c+"-"+g+"-"+a+"-"+f]);d.stickerCollections.push(e)}d.stickerCollections.push([l["s-"+c]])});h.forEach(function(a){return a.computeStickerCover()});Puzzle.call(this,f,h);this.saveOrientation({axis:new Vector({x:1,y:0,z:0}),angle:-Math.PI/5})};$jscomp.inherits(Dodecahedron,Puzzle);
var Icosahedron=function(b,a){b=void 0===b?2:b;var c={},d={},f=[],h=[],n={steps:10,dAlpha:2*Math.PI/5/10};a=(void 0===a?200:a)/2;var l=a*(1+Math.sqrt(5))/2;a=[new Point(0,l,a,"r0"),new Point(0,l,-a,"r1"),new Point(0,-l,a,"r2"),new Point(0,-l,-a,"r3"),new Point(l,a,0,"r4"),new Point(l,-a,0,"r5"),new Point(-l,a,0,"r6"),new Point(-l,-a,0,"r7"),new Point(a,0,l,"r8"),new Point(-a,0,l,"r9"),new Point(a,0,-l,"r10"),new Point(-a,0,-l,"r11")];var v=[{points:[a[0],a[4],a[1]],color:"white"},{points:[a[0],a[1],
a[6]],color:"blue"},{points:[a[0],a[6],a[9]],color:"red"},{points:[a[0],a[9],a[8]],color:"lawngreen"},{points:[a[0],a[8],a[4]],color:"skyblue"},{points:[a[3],a[2],a[7]],color:"orange"},{points:[a[3],a[5],a[2]],color:"darkolivegreen"},{points:[a[3],a[10],a[5]],color:"yellow"},{points:[a[3],a[11],a[10]],color:"lightgreen"},{points:[a[3],a[7],a[11]],color:"salmon"},{points:[a[4],a[5],a[10]],color:"magenta"},{points:[a[1],a[10],a[11]],color:"crimson"},{points:[a[6],a[11],a[7]],color:"indigo"},{points:[a[9],
a[7],a[2]],color:"brown"},{points:[a[8],a[2],a[5]],color:"darkblue"},{points:[a[2],a[8],a[9]],color:"pink"},{points:[a[5],a[4],a[8]],color:"burlywood"},{points:[a[10],a[1],a[4]],color:"darkcyan"},{points:[a[11],a[6],a[1]],color:"darkmagenta"},{points:[a[7],a[9],a[6]],color:"goldenrod"}];v.forEach(function(a,b){return a.id=b});var q={},r=[];a.forEach(function(a){var b=a.id;a={root:a,faces:[]};var c=v.find(function(a){return a.points.find(function(a){return a.id==b})});a.faces.push(c);[].push(c.points[mod(c.points.findIndex(function(a){return a.id==
b})+2,3)].id);for(var d={},f=0;4>f;d={p1id:d.p1id,p0id:d.p0id,p2id:d.p2id},f++)d.p0id=b,d.p1id=c.points[mod(c.points.findIndex(function(a){return a.id==b})+1,3)].id,d.p2id=c.points[mod(c.points.findIndex(function(a){return a.id==b})+2,3)].id,c=v.find(function(a){return function(b){b=b.points;return!b.find(function(b){return b.id==a.p1id})&&b.find(function(b){return b.id==a.p0id})&&b.find(function(b){return b.id==a.p2id})}}(d)),a.faces.push(c);r.push(a)});v.forEach(function(a,h){var m=a.points;a=a.color;
var e=[],k=new Vector(m[0]),g=(new Vector(m[0],m[1])).multiply(1/b),n=(new Vector(m[1],m[2])).multiply(1/b),l,p;for(l=0;l<=b;l++)for(p=0;p<=l;p++){var r=k.add(g.multiply(l)).add(n.multiply(p));c["p-"+h+"-"+l+"-"+p]=new Point(r.x,r.y,r.z);l&&p&&(e.push(new Sticker("s-"+h+"-"+l+"-"+p,a,[c["p-"+h+"-"+(l-1)+"-"+(p-1)].clone(),c["p-"+h+"-"+l+"-"+(p-1)].clone(),c["p-"+h+"-"+l+"-"+p].clone()])),d[e[e.length-1].id]=e[e.length-1],p<l&&(e.push(new Sticker("s-"+h+"-"+l+"-"+p+"-r",a,[c["p-"+h+"-"+l+"-"+p].clone(),
c["p-"+h+"-"+(l-1)+"-"+p].clone(),c["p-"+h+"-"+(l-1)+"-"+(p-1)].clone()])),d[e[e.length-1].id]=e[e.length-1]))}f.push(new Face(e));a={};a[m[0].id]=[];for(e=1;e<=b;e++){k=[];for(g=1;g<=e;g++)k.push(d["s-"+h+"-"+e+"-"+g]),g<e&&k.push(d["s-"+h+"-"+e+"-"+g+"-r"]);a[m[0].id].push(k)}a[m[1].id]=[];for(e=1;e<=b;e++){k=[];for(g=1;g<=e;g++)k.push(d["s-"+h+"-"+(b-(g-1))+"-"+(e-(g-1))]),g<e&&k.push(d["s-"+h+"-"+(b-(g-1))+"-"+(e-g)+"-r"]);a[m[1].id].push(k)}a[m[2].id]=[];for(e=1;e<=b;e++){k=[];for(g=1;g<=e;g++)k.push(d["s-"+
h+"-"+(b+(g-1)-(e-1))+"-"+(b-(e-1))]),g<e&&k.push(d["s-"+h+"-"+(b+1+(g-1)-(e-1))+"-"+(b-(e-1))+"-r"]);a[m[2].id].push(k)}q[h]=a});r.forEach(function(a){var c=a.faces,d=a.root;for(a={c:0};a.c<b;a={c:a.c},a.c++){var f=(new Vector(d)).unit(),k=[Array.prototype.concat.apply([],c.map(function(a){return function(b){return q[b.id][d.id][a.c]}}(a)))];h.push(new Cycle(k,5,f,n))}});h.forEach(function(a){a.stickerCollections[0].isPrimary=!0;a.computeStickerCover()});Puzzle.call(this,f,h);this.saveOrientation({axis:new Vector({x:1,
y:0,z:0}),angle:-27*Math.PI/40})};$jscomp.inherits(Icosahedron,Puzzle);
(function(){window.menuConfig={puzzles:{tetrahedron:function(a,b){return new Tetrahedron(a,b?42.5:void 0)},cube:function(a,b){return new Cube(a,b?50:void 0)},octahedron:function(a,b){return new Octahedron(a,b?42.5:void 0)},dodecahedron:function(a,b){return new Dodecahedron(a,b?42.5:void 0)},icosahedron:function(a,b){return new Icosahedron(a,b?42.5:void 0)}},sizes:{tetrahedron:[3,4,5],cube:[2,3,4],octahedron:[2,3,4],dodecahedron:[1,2,3],icosahedron:[2,3,4]}};var b=0;window.showShapeMenu=function(){b++;
window.puzzlemenu.style.display=window.shapemenu.style.display=window.settingsmenubutton.style.display="inline-block";window.configurationmenu.style.display=window.puzzlemenubutton.style.display=window.sizemenu.style.display="none";var a=b,c={},d;for(d in window.menuConfig.puzzles)c.elemId=d,c.ctx=window[c.elemId].getContext("2d"),c.puzzle=(0,window.menuConfig.puzzles[c.elemId])(void 0,!0),c.puzzle.updatedOrientation={axis:new Vector({x:1,y:1,z:0}),angle:0},c.ctx.setTransform(1,0,0,1,0,0),c.ctx.translate(50,
50),c.loop=function(c){return function(){c.ctx.save();c.ctx.setTransform(1,0,0,1,0,0);c.ctx.clearRect(0,0,gameCanvas.width,gameCanvas.height);c.ctx.restore();c.puzzle.updatedOrientation.angle+=.015;c.puzzle.update();c.puzzle.render(c.ctx);b==a&&requestAnimationFrame(c.loop)}}(c),requestAnimationFrame(c.loop),window[c.elemId].onmousedown=function(a){return function(){return showSizeMenu(a.elemId)}}(c),c={ctx:c.ctx,puzzle:c.puzzle,loop:c.loop,elemId:c.elemId}};window.showSizeMenu=function(a){b++;var c=
b;window.shapemenu.style.display=window.settingsmenubutton.style.display="none";window.sizemenu.style.display=window.puzzlemenubutton.style.display="inline-block";for(var d={},f=0;3>f;d={ctx:d.ctx,puzzle:d.puzzle,loop:d.loop,constructor:d.constructor,puzzleSize:d.puzzleSize},f++)d.ctx=window["size-"+(f+1)].getContext("2d"),d.constructor=window.menuConfig.puzzles[a],d.puzzleSize=window.menuConfig.sizes[a][f],d.puzzle=d.constructor(d.puzzleSize,!0),d.puzzle.updatedOrientation={axis:new Vector({x:1,
y:1,z:0}),angle:0},d.ctx.setTransform(1,0,0,1,0,0),d.ctx.translate(50,50),d.loop=function(a){return function(){a.ctx.save();a.ctx.setTransform(1,0,0,1,0,0);a.ctx.clearRect(0,0,gameCanvas.width,gameCanvas.height);a.ctx.restore();a.puzzle.updatedOrientation.angle+=.015;a.puzzle.update();a.puzzle.render(a.ctx);b==c&&requestAnimationFrame(a.loop)}}(d),requestAnimationFrame(d.loop),window["size-"+(f+1)].onmousedown=function(a){return function(){window.selectedPuzzle=a.constructor(a.puzzleSize,!1);window.startbutton.style.visibility=
"visible"}}(d)};window.showSettingsMenu=function(){window.puzzlemenu.style.display=window.settingsmenubutton.style.display="none";window.configurationmenu.style.display=window.puzzlemenubutton.style.display="inline-block"};window.showShapeMenu()})();
(function(){var b=gameCanvas.getContext("2d"),a=gameCanvasInverted.getContext("2d");b.translate(300,300);a.scale(1/3,1/3);a.translate(300,300);var c=function(){var a=gameCanvas.getBoundingClientRect();return{x:a.left+300,y:a.top+300}};window.explodedStickers=!0;window.selectedPuzzle=new Tetrahedron;Puzzle.prototype.onFinish=function(a){window.help.style.display="none";window.menu.style.display="none";window.startbutton.style.visibility="visible";window.success.style.display="inline-block";window.message.innerHTML=
"You solved it in "+a+" seconds.\x3cbr/\x3e Good Job."};var d=function(){b.save();b.setTransform(1,0,0,1,0,0);b.clearRect(0,0,gameCanvas.width,gameCanvas.height);b.restore();window.selectedPuzzle.update();window.selectedPuzzle.render(b,!1,window.explodedStickers);window.showRearView&&(a.save(),a.setTransform(1,0,0,1,0,0),a.clearRect(0,0,gameCanvas.width,gameCanvas.height),a.restore(),window.selectedPuzzle.render(a,!0,window.explodedStickers));if(window.selectedPuzzle.startTime){var c=Math.floor(((new Date).getTime()-
window.selectedPuzzle.startTime)/1E3),h=""+Math.floor(c/60);c=""+c%60;2>h.length&&(h="0"+h);2>c.length&&(c="0"+c);window.stats.innerHTML="Time Taken: "+h+":"+c+", Moves Made: "+window.selectedPuzzle.movesMade}else window.stats.innerHTML="Time Taken: --:--, Moves Made: --";requestAnimationFrame(d)};requestAnimationFrame(d);document.addEventListener("contextmenu",function(a){return a.preventDefault()});gameCanvas.addEventListener("mousedown",function(a){a.preventDefault();a.stopPropagation();var b=
c();window.selectedPuzzle.grab(a.clientX-b.x,a.clientY-b.y,a.ctrlKey?2:a.button)});gameCanvas.addEventListener("mousemove",function(a){a.preventDefault();a.stopPropagation();var b=c();window.selectedPuzzle.drag(a.clientX-b.x,a.clientY-b.y)});gameCanvas.addEventListener("mouseup",function(a){a.preventDefault();a.stopPropagation();window.selectedPuzzle.release()});gameCanvas.addEventListener("mouseleave",function(a){window.selectedPuzzle.release()})})();
