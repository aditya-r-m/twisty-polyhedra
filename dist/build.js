var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.createTemplateTagFirstArg=function(a){return a.raw=a};$jscomp.createTemplateTagFirstArgWithRaw=function(a,b){a.raw=b;return a};$jscomp.arrayIteratorImpl=function(a){var b=0;return function(){return b<a.length?{done:!1,value:a[b++]}:{done:!0}}};$jscomp.arrayIterator=function(a){return{next:$jscomp.arrayIteratorImpl(a)}};$jscomp.makeIterator=function(a){var b="undefined"!=typeof Symbol&&Symbol.iterator&&a[Symbol.iterator];return b?b.call(a):$jscomp.arrayIterator(a)};
$jscomp.arrayFromIterator=function(a){for(var b,c=[];!(b=a.next()).done;)c.push(b.value);return c};$jscomp.arrayFromIterable=function(a){return a instanceof Array?a:$jscomp.arrayFromIterator($jscomp.makeIterator(a))};$jscomp.ASSUME_ES5=!1;$jscomp.ASSUME_NO_NATIVE_MAP=!1;$jscomp.ASSUME_NO_NATIVE_SET=!1;$jscomp.SIMPLE_FROUND_POLYFILL=!1;$jscomp.ISOLATE_POLYFILLS=!1;$jscomp.FORCE_POLYFILL_PROMISE=!1;$jscomp.FORCE_POLYFILL_PROMISE_WHEN_NO_UNHANDLED_REJECTION=!1;
$jscomp.objectCreate=$jscomp.ASSUME_ES5||"function"==typeof Object.create?Object.create:function(a){var b=function(){};b.prototype=a;return new b};$jscomp.defineProperty=$jscomp.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(a,b,c){if(a==Array.prototype||a==Object.prototype)return a;a[b]=c.value;return a};
$jscomp.getGlobal=function(a){a=["object"==typeof globalThis&&globalThis,a,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof global&&global];for(var b=0;b<a.length;++b){var c=a[b];if(c&&c.Math==Math)return c}throw Error("Cannot find global object");};$jscomp.global=$jscomp.getGlobal(this);$jscomp.IS_SYMBOL_NATIVE="function"===typeof Symbol&&"symbol"===typeof Symbol("x");$jscomp.TRUST_ES6_POLYFILLS=!$jscomp.ISOLATE_POLYFILLS||$jscomp.IS_SYMBOL_NATIVE;$jscomp.polyfills={};
$jscomp.propertyToPolyfillSymbol={};$jscomp.POLYFILL_PREFIX="$jscp$";var $jscomp$lookupPolyfilledValue=function(a,b){var c=$jscomp.propertyToPolyfillSymbol[b];if(null==c)return a[b];c=a[c];return void 0!==c?c:a[b]};$jscomp.polyfill=function(a,b,c,e){b&&($jscomp.ISOLATE_POLYFILLS?$jscomp.polyfillIsolated(a,b,c,e):$jscomp.polyfillUnisolated(a,b,c,e))};
$jscomp.polyfillUnisolated=function(a,b,c,e){c=$jscomp.global;a=a.split(".");for(e=0;e<a.length-1;e++){var f=a[e];if(!(f in c))return;c=c[f]}a=a[a.length-1];e=c[a];b=b(e);b!=e&&null!=b&&$jscomp.defineProperty(c,a,{configurable:!0,writable:!0,value:b})};
$jscomp.polyfillIsolated=function(a,b,c,e){var f=a.split(".");a=1===f.length;e=f[0];e=!a&&e in $jscomp.polyfills?$jscomp.polyfills:$jscomp.global;for(var h=0;h<f.length-1;h++){var r=f[h];if(!(r in e))return;e=e[r]}f=f[f.length-1];c=$jscomp.IS_SYMBOL_NATIVE&&"es6"===c?e[f]:null;b=b(c);null!=b&&(a?$jscomp.defineProperty($jscomp.polyfills,f,{configurable:!0,writable:!0,value:b}):b!==c&&(void 0===$jscomp.propertyToPolyfillSymbol[f]&&($jscomp.propertyToPolyfillSymbol[f]=$jscomp.IS_SYMBOL_NATIVE?$jscomp.global.Symbol(f):
$jscomp.POLYFILL_PREFIX+f),f=$jscomp.propertyToPolyfillSymbol[f],$jscomp.defineProperty(e,f,{configurable:!0,writable:!0,value:b})))};
$jscomp.getConstructImplementation=function(){function a(){function c(){}new c;Reflect.construct(c,[],function(){});return new c instanceof c}if($jscomp.TRUST_ES6_POLYFILLS&&"undefined"!=typeof Reflect&&Reflect.construct){if(a())return Reflect.construct;var b=Reflect.construct;return function(c,e,f){c=b(c,e);f&&Reflect.setPrototypeOf(c,f.prototype);return c}}return function(c,e,f){void 0===f&&(f=c);f=$jscomp.objectCreate(f.prototype||Object.prototype);return Function.prototype.apply.call(c,f,e)||
f}};$jscomp.construct={valueOf:$jscomp.getConstructImplementation}.valueOf();$jscomp.underscoreProtoCanBeSet=function(){var a={a:!0},b={};try{return b.__proto__=a,b.a}catch(c){}return!1};$jscomp.setPrototypeOf=$jscomp.TRUST_ES6_POLYFILLS&&"function"==typeof Object.setPrototypeOf?Object.setPrototypeOf:$jscomp.underscoreProtoCanBeSet()?function(a,b){a.__proto__=b;if(a.__proto__!==b)throw new TypeError(a+" is not extensible");return a}:null;
$jscomp.inherits=function(a,b){a.prototype=$jscomp.objectCreate(b.prototype);a.prototype.constructor=a;if($jscomp.setPrototypeOf){var c=$jscomp.setPrototypeOf;c(a,b)}else for(c in b)if("prototype"!=c)if(Object.defineProperties){var e=Object.getOwnPropertyDescriptor(b,c);e&&Object.defineProperty(a,c,e)}else a[c]=b[c];a.superClass_=b.prototype};$jscomp.polyfill("Reflect",function(a){return a?a:{}},"es6","es3");$jscomp.polyfill("Reflect.construct",function(a){return $jscomp.construct},"es6","es3");
$jscomp.polyfill("Reflect.setPrototypeOf",function(a){if(a)return a;if($jscomp.setPrototypeOf){var b=$jscomp.setPrototypeOf;return function(c,e){try{return b(c,e),!0}catch(f){return!1}}}return null},"es6","es5");$jscomp.polyfill("Array.prototype.fill",function(a){return a?a:function(b,c,e){var f=this.length||0;0>c&&(c=Math.max(0,f+c));if(null==e||e>f)e=f;e=Number(e);0>e&&(e=Math.max(0,f+e));for(c=Number(c||0);c<e;c++)this[c]=b;return this}},"es6","es3");
$jscomp.typedArrayFill=function(a){return a?a:Array.prototype.fill};$jscomp.polyfill("Int8Array.prototype.fill",$jscomp.typedArrayFill,"es6","es5");$jscomp.polyfill("Uint8Array.prototype.fill",$jscomp.typedArrayFill,"es6","es5");$jscomp.polyfill("Uint8ClampedArray.prototype.fill",$jscomp.typedArrayFill,"es6","es5");$jscomp.polyfill("Int16Array.prototype.fill",$jscomp.typedArrayFill,"es6","es5");$jscomp.polyfill("Uint16Array.prototype.fill",$jscomp.typedArrayFill,"es6","es5");
$jscomp.polyfill("Int32Array.prototype.fill",$jscomp.typedArrayFill,"es6","es5");$jscomp.polyfill("Uint32Array.prototype.fill",$jscomp.typedArrayFill,"es6","es5");$jscomp.polyfill("Float32Array.prototype.fill",$jscomp.typedArrayFill,"es6","es5");$jscomp.polyfill("Float64Array.prototype.fill",$jscomp.typedArrayFill,"es6","es5");$jscomp.findInternal=function(a,b,c){a instanceof String&&(a=String(a));for(var e=a.length,f=0;f<e;f++){var h=a[f];if(b.call(c,h,f,a))return{i:f,v:h}}return{i:-1,v:void 0}};
$jscomp.polyfill("Array.prototype.find",function(a){return a?a:function(b,c){return $jscomp.findInternal(this,b,c).v}},"es6","es3");$jscomp.polyfill("Array.prototype.findIndex",function(a){return a?a:function(b,c){return $jscomp.findInternal(this,b,c).i}},"es6","es3");mod=function(a,b){return(a%b+b)%b};
createAnimationFPSThrottler=function(){var a=window.performance.now(),b=1E3/60;return{requestAnimationFrame:function(c){var e=Math.max(0,b-(window.performance.now()-a)),f=function(){a=window.performance.now();c()};setTimeout(function(){return requestAnimationFrame(f)},e)}}};var origin={x:0,y:0,z:0},Vector=function(a,b){b||(b=a,a=origin);this.x=b.x-a.x;this.y=b.y-a.y;this.z=b.z-a.z};Vector.prototype.add=function(a){return new Vector(origin,{x:this.x+a.x,y:this.y+a.y,z:this.z+a.z})};
Vector.prototype.subtract=function(a){return this.add({x:-a.x,y:-a.y,z:-a.z})};Vector.prototype.multiply=function(a){return new Vector(origin,{x:this.x*a,y:this.y*a,z:this.z*a})};Vector.prototype.magnitude=function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)};Vector.prototype.unit=function(){return this.multiply(1/this.magnitude())};Vector.prototype.cross=function(a){return new Vector(origin,{x:this.y*a.z-this.z*a.y,y:this.z*a.x-this.x*a.z,z:this.x*a.y-this.y*a.x})};
var qDimensions=["w","x","y","z"],qProductSign=[[1,1,1,1],[1,-1,1,-1],[1,-1,-1,1],[1,1,-1,-1]],qProductAxis=[[0,1,2,3],[1,0,3,2],[2,3,0,1],[3,2,1,0]],Quaternion=function(a,b,c,e){this.w=a;this.x=b;this.y=c;this.z=e};Quaternion.prototype.conjugate=function(){return new Quaternion(this.w,-this.x,-this.y,-this.z)};
Quaternion.prototype.multiply=function(a){for(var b=new Quaternion(0,0,0,0),c=0;4>c;c++)for(var e=0;4>e;e++)b[qDimensions[qProductAxis[c][e]]]+=qProductSign[c][e]*this[qDimensions[c]]*a[qDimensions[e]];return b};var Point=function(a,b,c,e){this.base={x:a,y:b,z:c};this.x=a;this.y=b;this.z=c;this.id=e};Point.prototype.update=function(a){a=this.rotateAroundAxis(this.base,a.axis.unit(),a.angle);var b=a.y,c=a.z;this.x=a.x;this.y=b;this.z=c};
Point.prototype.saveOrientation=function(a){this.update(a);this.base.x=this.x;this.base.y=this.y;this.base.z=this.z};Point.prototype.clone=function(){return new Point(this.x,this.y,this.z,this.id)};Point.prototype.rotateAroundAxis=function(a,b,c){var e=Math.sin(c/2);b=new Quaternion(Math.cos(c/2),e*b.x,e*b.y,e*b.z);a=new Quaternion(0,a.x,a.y,a.z);a=b.multiply(a).multiply(b.conjugate());return new Point(a.x,a.y,a.z)};
var ColorData=function(a,b){this.code=a;this.originalStickerId=b},Sticker=function(a,b,c){this.id=a;this.colorData=new ColorData(b,this.id);this.points=c;this.attractor={}};Sticker.prototype.contains=function(a){for(var b=this.points[this.points.length-1],c=0,e=$jscomp.makeIterator(this.points),f=e.next();!f.done;f=e.next()){f=f.value;b=(new Vector(b,f)).cross(new Vector(b,a));if(0>c&&0<b.z||0<c&&0>b.z)return!1;0!==b.z&&(c=b.z);b=f}return!0};
Sticker.prototype.calculateNormalVector=function(){return(new Vector(this.points[0],this.points[1])).cross(new Vector(this.points[0],this.points[this.points.length-1]))};Sticker.prototype.update=function(a){this.points.forEach(function(b){return b.update(a)});this.attractor={x:this.points.reduce(function(b,c){return b+c.x},0),y:this.points.reduce(function(b,c){return b+c.y},0),z:this.points.reduce(function(b,c){return b+c.z},0)}};
Sticker.prototype.getPointProjection=function(a,b,c){a=[a.x,a.y];c&&(a[0]+=(this.attractor.x-a[0])/(10*this.points.length),a[1]+=(this.attractor.y-a[1])/(10*this.points.length));b&&(a[0]=-a[0]);return a};
Sticker.prototype.render=function(a,b,c){var e=this;a.fillStyle=this.colorData.code;a.strokeStyle="#202020";a.beginPath();a.moveTo.apply(a,$jscomp.arrayFromIterable(this.getPointProjection(this.points[0],b,c)));this.points.forEach(function(f){return a.lineTo.apply(a,$jscomp.arrayFromIterable(e.getPointProjection(f,b,c)))});a.closePath();a.fill();a.stroke()};var Face=function(a){this.stickers=a;this.normalVector=this.stickers[0].calculateNormalVector()};
Face.prototype.update=function(a){this.stickers.forEach(function(b){return b.update(a)});this.normalVector=this.stickers[0].calculateNormalVector()};Face.prototype.render=function(a,b,c){this.stickers.forEach(function(e){return e.render(a,b,c)})};var Cycle=function(a,b,c,e,f){this.index=a;this.stickerCollections=b;this.period=c;this.unitVector=e;this.animationConfig=f;this.stickerCover={}};
Cycle.prototype.computeStickerCover=function(){var a=this;this.stickerCollections.forEach(function(b){return b.forEach(function(c){return a.stickerCover[c.id]=!0})})};Cycle.prototype.saveOrientation=function(a){var b=new Point(this.unitVector.x,this.unitVector.y,this.unitVector.z);b.update(a);this.unitVector=new Vector(b)};
Cycle.prototype.twist=function(a){var b=this;a=void 0===a?1:a;this.stickerCollections.forEach(function(c){if(1!==c.length){var e=a*c.length/b.period;c.forEach(function(f,h){f.$newColorData=c[mod(h-e,c.length)].colorData});c.forEach(function(f){f.colorData=f.$newColorData;delete f.$newColorData})}})};
var Puzzle=function(a,b,c,e){this.displayName=a;this.displaySize=b;this.faces=c;this.cycles=e;this.twisting=this.rotating=!1;this.startEvtCoordinates={};this.baseOrientation={axis:new Vector({x:1,y:0,z:0}),angle:0};this.animationState={active:!1,counter:0,direction:void 0,cycle:void 0};this.stickers=[].concat.apply([],$jscomp.arrayFromIterable(this.faces.map(function(f){return f.stickers})));this.clearStats();this.cycleMap={};this.processCycleMap();this.startSticker=void 0};
Puzzle.prototype.clearStats=function(){this.startTime=void 0;this.movesMade=0};Puzzle.prototype.isSolved=function(){for(var a=0;a<this.faces.length;a++)for(var b=0;b<this.faces[a].stickers.length;b++)if(this.faces[a].stickers[b].colorData.code!==this.faces[a].stickers[0].colorData.code)return!1;return!0};
Puzzle.prototype.processCycleMap=function(){var a=this;this.cycles.forEach(function(b){return b.stickerCollections.forEach(function(c){c.isPrimary&&c.forEach(function(e){a.cycleMap[e.id]=a.cycleMap[e.id]||[];a.cycleMap[e.id].push(b)})})})};
Puzzle.prototype.update=function(){var a=this;if(this.animationState.active&&this.animationState.counter<(window.animate?this.animationState.cycle.animationConfig.steps:1)){var b={axis:this.animationState.cycle.unitVector,angle:this.animationState.direction*this.animationState.counter*this.animationState.cycle.animationConfig.dAlpha};this.stickers.forEach(function(c){a.animationState.cycle.stickerCover[c.id]&&c.update(b)});this.stickers.sort(function(c,e){return e.attractor.z-c.attractor.z});this.animationState.counter++}else if(this.faces.forEach(function(c){return c.update(a.updatedOrientation||
a.baseOrientation)}),this.faces.sort(function(c,e){return e.normalVector.z-c.normalVector.z}),this.animationState.active){this.animationState.cycle.twist(this.animationState.direction);this.startTime&&this.isSolved()?(this.onFinish&&this.onFinish(((new Date).getTime()-this.startTime)/1E3),this.clearStats()):this.startTime&&this.movesMade++;if(this.animationState.callback&&(this.animationState.callback(),this.animationState.counter<(window.animate?this.animationState.cycle.animationConfig.steps:1)))return this.update();
this.animationState={active:!1,counter:0,direction:void 0,cycle:void 0}}};Puzzle.prototype.findTouchedSticker=function(a,b){for(var c,e=this.faces.length-1;0<=e&&!(0<=this.faces[e].normalVector.z);e--)if(c=this.faces[e].stickers.find(function(h){return h.contains({x:a,y:b,z:0})}))if(window.pointAndSwap)if(window.tempS){var f=c.colorData;c.colorData=window.tempS.colorData;window.tempS.colorData=f;window.tempS=void 0}else window.tempS=c;else return c};
Puzzle.prototype.grab=function(a,b,c){this.startEvtCoordinates.x=a;this.startEvtCoordinates.y=b;2===c?this.rotating=!0:(this.startSticker=this.findTouchedSticker(a,b),this.twisting=!!this.startSticker,this.rotating=!this.startSticker)};
Puzzle.prototype.drag=function(a,b){if(!this.animationState.active)if(this.rotating){if(a=(a-this.startEvtCoordinates.x)/100,b=(b-this.startEvtCoordinates.y)/100,a||b)b=new Vector({x:b,y:-a,z:0}),this.updatedOrientation={axis:b,angle:b.magnitude()}}else this.twisting&&(b=new Vector(new Point(this.startEvtCoordinates.x,this.startEvtCoordinates.y,0),new Point(a,b,0)),20<b.magnitude()&&(window.clearSolution(),this.detectCycle(b)))};
Puzzle.prototype.detectCycle=function(a){if(this.cycleMap[this.startSticker.id]){var b=0,c,e;this.cycleMap[this.startSticker.id].forEach(function(f){var h=new Point(f.unitVector.x,f.unitVector.y,f.unitVector.z);h.z=0;h=new Vector(h);h=a.cross(h);b<h.magnitude()&&(b=h.magnitude(),c=f,e=0<h.z?-1:1)});this.animateAndTwist(c,e);this.release()}};Puzzle.prototype.animateAndTwist=function(a,b){if(this.animationState.active)return!1;this.animationState={active:!0,counter:0,direction:b,cycle:a};return!0};
Puzzle.prototype.release=function(){this.twisting=this.rotating=!1;this.startEvtCoordinates={};this.updatedOrientation&&(this.saveOrientation(this.updatedOrientation),this.updatedOrientation=void 0);this.startSticker=void 0};Puzzle.prototype.saveOrientation=function(a){this.stickers.forEach(function(b){return b.points.forEach(function(c){return c.saveOrientation(a)})});this.cycles.forEach(function(b){return b.saveOrientation(a)})};
Puzzle.prototype.scramble=function(){var a=this;this.clearStats();window.hideStartButton();for(var b=3*this.cycles.length,c=[],e=0;e<b;e++)c.push({cycle:this.cycles[Math.floor(Math.random()*this.cycles.length)],direction:.5>Math.random()?-1:1});var f=[];window.clearSolution();window.disableSolveButton();c.forEach(function(h,r){var y=h.cycle;h=h.direction;r&&y===c[r-1].cycle&&(h=c[r-1].direction);f.push({active:!0,counter:0,direction:h,cycle:y,callback:r<b-1?function(){return a.animationState=f[r+
1]}:function(){window.showStartButton();window.enableSolveButton();a.startTime=(new Date).getTime()}})});this.animationState=f[0]};
Puzzle.prototype.render=function(a,b,c){c=void 0===c?!0:c;if(this.animationState.active){var e=$jscomp.makeIterator(b?[this.stickers.length-1,-1,-1]:[0,this.stickers.length,1]),f=e.next().value,h=e.next().value;for(e=e.next().value;f!==h;f+=e)this.stickers[f].render(a,b,c)}else for(e=$jscomp.makeIterator(b?[this.faces.length-1,-1,-1]:[0,this.faces.length,1]),f=e.next().value,h=e.next().value,e=e.next().value;f!==h;f+=e)this.faces[f].render(a,b,c)};
var Cube=function(a,b){a=void 0===a?2:a;b=void 0===b?250:b;var c=b/a,e=b/2,f={steps:10,dAlpha:Math.PI/2/10},h={},r=[];b=[{slices:[{fIndex:1,sIndex:0,sJump:a,cJump:1},{fIndex:3,sIndex:a-1,sJump:-1,cJump:a},{fIndex:0,sIndex:(a-1)*a,sJump:-a,cJump:1},{fIndex:2,sIndex:0,sJump:1,cJump:a}],attachedFaces:{ffIndex:4,lfIndex:5,iStep:a,jStep:1},unitVector:new Vector(new Point(0,0,1))},{slices:[{fIndex:1,sIndex:0,sJump:1,cJump:a},{fIndex:5,sIndex:(a-1)*a,sJump:-a,cJump:1},{fIndex:0,sIndex:a-1,sJump:-1,cJump:a},
{fIndex:4,sIndex:0,sJump:a,cJump:1}],attachedFaces:{ffIndex:2,lfIndex:3,iStep:1,jStep:a},unitVector:new Vector(new Point(0,-1,0))},{slices:[{fIndex:2,sIndex:0,sJump:a,cJump:1},{fIndex:5,sIndex:0,sJump:1,cJump:a},{fIndex:3,sIndex:(a-1)*a,sJump:-a,cJump:1},{fIndex:4,sIndex:a-1,sJump:-1,cJump:a}],attachedFaces:{ffIndex:0,lfIndex:1,iStep:1,jStep:a},unitVector:new Vector(new Point(-1,0,0))}];var y=[{key:"iStep",dir:1},{key:"jStep",dir:1},{key:"iStep",dir:-1},{key:"jStep",dir:-1}],F,C,D,u,z,B;[{fixed:"x",
direction:-1,variable:["y","z"],color:"yellow"},{fixed:"x",direction:1,variable:["y","z"],color:"white"},{fixed:"y",direction:-1,variable:["z","x"],color:"blue"},{fixed:"y",direction:1,variable:["z","x"],color:"lawngreen"},{fixed:"z",direction:-1,variable:["x","y"],color:"red"},{fixed:"z",direction:1,variable:["x","y"],color:"darkorange"}].forEach(function(t,l){var A=[];F=-e;for(var w=0;w<=a;w++){C=-e;for(var x=0;x<=a;x++)u="p-"+l+"-"+w+"-"+x,D={},D[t.fixed]=t.direction*e,D[t.variable[0]]=F,D[t.variable[1]]=
C,h[u]=new Point(D.x,D.y,D.z,u),w&&x&&(z="s-"+l+"-"+w+"-"+x,B=[h["p-"+l+"-"+w+"-"+x].clone(),h["p-"+l+"-"+(w-1)+"-"+x].clone(),h["p-"+l+"-"+(w-1)+"-"+(x-1)].clone(),h["p-"+l+"-"+w+"-"+(x-1)].clone()],-1===t.direction&&B.reverse(),A.push(new Sticker(z,t.color,B))),C+=c;F+=c}r.push(new Face(A))});var k=[],d,g,m,n,p,q,v;b.forEach(function(t){for(var l={$jscomp$loop$prop$c$22:0};l.$jscomp$loop$prop$c$22<a;l={$jscomp$loop$prop$c$22:l.$jscomp$loop$prop$c$22},l.$jscomp$loop$prop$c$22++)d=new Cycle(k.length,
[],4,t.unitVector,f),g=[],t.slices.forEach(function(A){return function(w){for(var x=0;x<a;x++)m=w.sIndex+x*w.sJump+A.$jscomp$loop$prop$c$22*w.cJump,g.push(r[w.fIndex].stickers[m])}}(l)),d.stickerCollections.push(g),k.push(d);n=k[k.length-a];q=r[t.attachedFaces.ffIndex];for(l={$jscomp$loop$prop$c$5$24:0};l.$jscomp$loop$prop$c$5$24<Math.floor(a/2);l={$jscomp$loop$prop$c$5$24:l.$jscomp$loop$prop$c$5$24},l.$jscomp$loop$prop$c$5$24++)g=[],m=l.$jscomp$loop$prop$c$5$24*(a+1),y.forEach(function(A){return function(w){var x=
w.key;w=w.dir;for(var E=0;E<a-2*A.$jscomp$loop$prop$c$5$24-1;E++)g.push(q.stickers[m]),m+=t.attachedFaces[x]*w}}(l)),n.stickerCollections.push(g);p=k[k.length-1];v=r[t.attachedFaces.lfIndex];for(l={$jscomp$loop$prop$c$6$26:0};l.$jscomp$loop$prop$c$6$26<Math.floor(a/2);l={$jscomp$loop$prop$c$6$26:l.$jscomp$loop$prop$c$6$26},l.$jscomp$loop$prop$c$6$26++)g=[],m=l.$jscomp$loop$prop$c$6$26*(a+1),y.forEach(function(A){return function(w){var x=w.key;w=w.dir;for(var E=0;E<a-2*A.$jscomp$loop$prop$c$6$26-1;E++)g.push(v.stickers[m]),
m+=t.attachedFaces[x]*w}}(l)),p.stickerCollections.push(g);a%2&&(n.stickerCollections.push([q.stickers[(a*a-1)/2]]),p.stickerCollections.push([v.stickers[(a*a-1)/2]]))});k.forEach(function(t){t.stickerCollections[0].isPrimary=!0;t.computeStickerCover()});Puzzle.call(this,"Cube",a,r,k);this.saveOrientation({axis:new Vector({x:0,y:1,z:0}),angle:Math.PI/4});this.saveOrientation({axis:new Vector({x:1,y:0,z:0}),angle:Math.PI/8})};$jscomp.inherits(Cube,Puzzle);
var Tetrahedron=function(a,b){a=void 0===a?3:a;b=void 0===b?200:b;var c=b/Math.sqrt(2),e={steps:10,dAlpha:2*Math.PI/3/10},f={},h=[],r=[];c=[new Point(b,0,c),new Point(-b,0,c),new Point(0,b,-c),new Point(0,-b,-c)];b=[{points:[c[0],c[2],c[1]],color:"white"},{points:[c[0],c[1],c[3]],color:"blue"},{points:[c[0],c[3],c[2]],color:"lawngreen"},{points:[c[1],c[2],c[3]],color:"red"}];c=[{slices:[{fIndex:0,sIJ:function(k){return[k,0]},dIJ:function(){return[0,1]}},{fIndex:1,sIJ:function(k){return[k,0]},dIJ:function(){return[0,
1]}},{fIndex:2,sIJ:function(k){return[k,0]},dIJ:function(){return[0,1]}}],attachedFace:{fIndex:3,steps:[function(){return[1,2]},function(){return[0,-2]},function(){return[-1,0]}]},unitVector:(new Vector(c[0])).unit()},{slices:[{fIndex:0,sIJ:function(k){return[a-k-1,2*(a-k-1)]},dIJ:function(k,d){return[d%2?0:1,d%2?-1:1]}},{fIndex:3,sIJ:function(k){return[k,0]},dIJ:function(){return[0,1]}},{fIndex:1,sIJ:function(k){return[a-1,2*k]},dIJ:function(k,d){return[d%2?-1:0,-1]}}],attachedFace:{fIndex:2,steps:[function(){return[1,
2]},function(){return[0,-2]},function(){return[-1,0]}]},unitVector:(new Vector(c[1])).unit()},{slices:[{fIndex:0,sIJ:function(k){return[a-1,2*k]},dIJ:function(k,d){return[d%2?-1:0,-1]}},{fIndex:2,sIJ:function(k){return[a-k-1,2*(a-k-1)]},dIJ:function(k,d){return[d%2?0:1,d%2?-1:1]}},{fIndex:3,sIJ:function(k){return[a-1,2*k]},dIJ:function(k,d){return[d%2?-1:0,-1]}}],attachedFace:{fIndex:1,steps:[function(){return[1,2]},function(){return[0,-2]},function(){return[-1,0]}]},unitVector:(new Vector(c[2])).unit()},
{slices:[{fIndex:1,sIJ:function(k){return[a-k-1,2*(a-k-1)]},dIJ:function(k,d){return[d%2?0:1,d%2?-1:1]}},{fIndex:3,sIJ:function(k){return[a-k-1,2*(a-k-1)]},dIJ:function(k,d){return[d%2?0:1,d%2?-1:1]}},{fIndex:2,sIJ:function(k){return[a-1,2*k]},dIJ:function(k,d){return[d%2?-1:0,-1]}}],attachedFace:{fIndex:0,steps:[function(){return[1,2]},function(){return[0,-2]},function(){return[-1,0]}]},unitVector:(new Vector(c[3])).unit()}];b.forEach(function(k,d){for(var g=[],m=[k.points[0].clone()],n,p,q,v,t,
l=(new Vector(k.points[0],k.points[1])).multiply(1/a),A=(new Vector(k.points[1],k.points[2])).multiply(1/a),w,x={$jscomp$loop$prop$i$28:0};x.$jscomp$loop$prop$i$28<a;x={$jscomp$loop$prop$i$28:x.$jscomp$loop$prop$i$28},x.$jscomp$loop$prop$i$28++){n=[];w=l.add(m[0]);n.push(new Point(w.x,w.y,w.z));for(var E=0;E<=x.$jscomp$loop$prop$i$28;E++)w=A.add(w),n.push(new Point(w.x,w.y,w.z));m.forEach(function(G){return function(J,H){p=J.clone();q=n[H].clone();v=n[H+1].clone();p.id="p-"+d+"-"+G.$jscomp$loop$prop$i$28+
"-"+H;q.id="p-"+d+"-"+(G.$jscomp$loop$prop$i$28+1)+"-"+H;v.id="p-"+d+"-"+(G.$jscomp$loop$prop$i$28+1)+"-"+(H+1);p.clone();q.clone();v.clone();g.push(new Sticker("s-"+d+"-"+G.$jscomp$loop$prop$i$28+"-"+2*H,k.color,[p,q,v]));f[g[g.length-1].id]=g[g.length-1];H<m.length-1&&(p=p.clone(),v=v.clone(),t=m[H+1].clone(),t.id="q-"+d+"-"+G.$jscomp$loop$prop$i$28+"-"+(H+1),p.clone(),v.clone(),t.clone(),g.push(new Sticker("s-"+d+"-"+G.$jscomp$loop$prop$i$28+"-"+(2*H+1),k.color,[p,v,t])),f[g[g.length-1].id]=g[g.length-
1])}}(x));m=n}h.push(new Face(g))});var y,F,C,D,u,z,B;c.forEach(function(k){for(var d={$jscomp$loop$prop$c$30:0};d.$jscomp$loop$prop$c$30<a;d={$jscomp$loop$prop$c$30:d.$jscomp$loop$prop$c$30},d.$jscomp$loop$prop$c$30++)y=new Cycle(r.length,[],3,k.unitVector,e),C=[],k.slices.forEach(function(v){return function(t){var l=$jscomp.makeIterator(t.sIJ(v.$jscomp$loop$prop$c$30));D=l.next().value;u=l.next().value;for(l=0;l<1+2*v.$jscomp$loop$prop$c$30;l++){var A=$jscomp.makeIterator(t.dIJ(v.$jscomp$loop$prop$c$30,
l));z=A.next().value;B=A.next().value;C.push(f["s-"+t.fIndex+"-"+D+"-"+u]);D+=z;u+=B}}}(d)),y.stickerCollections.push(C),r.push(y);y=r[r.length-1];F=k.attachedFace.fIndex;var g=a-1;d=1;for(var m=0,n,p,q;0<g;)p=q=m,C=[],k.attachedFace.steps.forEach(function(v){for(var t=n=0;t<g;t++){var l=$jscomp.makeIterator(v(m,n)),A=l.next().value;l=l.next().value;C.push(f["s-"+F+"-"+p+"-"+q]);p+=A;q+=l;n+=1}}),y.stickerCollections.push(C),m+=1,g-=d,d=2===d?1:2;f["s-"+F+"-"+m+"-"+m]&&a%3&&y.stickerCollections.push([f["s-"+
F+"-"+m+"-"+m]])});r.forEach(function(k){k.stickerCollections[0].isPrimary=!0;k.computeStickerCover()});Puzzle.call(this,"Tetrahedron",a,h,r);this.saveOrientation({axis:new Vector({x:0,y:1,z:0}),angle:Math.PI/3})};$jscomp.inherits(Tetrahedron,Puzzle);
var Octahedron=function(a,b){a=void 0===a?2:a;b=void 0===b?200:b;var c={steps:10,dAlpha:2*Math.PI/3/10},e={},f=[],h=[];b=[new Point(0,0,-b),new Point(b,0,0),new Point(0,b,0),new Point(-b,0,0),new Point(0,-b,0),new Point(0,0,b)];b=[{points:[b[0],b[2],b[1]],color:"white"},{points:[b[0],b[1],b[4]],color:"blue"},{points:[b[0],b[4],b[3]],color:"lawngreen"},{points:[b[0],b[3],b[2]],color:"skyblue"},{points:[b[5],b[1],b[2]],color:"red"},{points:[b[5],b[2],b[3]],color:"darkorange"},{points:[b[5],b[3],b[4]],
color:"purple"},{points:[b[5],b[4],b[1]],color:"yellow"}];var r=[{slices:[{fIndex:4,sIJ:function(d){return[a-d-1,2*(a-d-1)]},dIJ:function(){return[0,-1]},limJ:function(d){return 1+2*(a-d-1)}},{fIndex:7,sIJ:function(d){return[a-d-1,2*(a-d-1)]},dIJ:function(d,g){return[g%2?0:1,g%2?-1:1]},limJ:function(d){return 1+2*d}},{fIndex:1,sIJ:function(d){return[a-1,2*d]},dIJ:function(d,g){return[g%2?-1:0,g%2?-1:1]},limJ:function(d){return 1+2*(a-d-1)}},{fIndex:2,sIJ:function(d){return[d,0]},dIJ:function(){return[0,
1]},limJ:function(d){return 1+2*d}},{fIndex:3,sIJ:function(d){return[d,0]},dIJ:function(d,g){return[g%2?0:1,1]},limJ:function(d){return 1+2*(a-d-1)}},{fIndex:5,sIJ:function(d){return[a-1,2*d]},dIJ:function(d,g){return[g%2?-1:0,-1]},limJ:function(d){return 1+2*d}}],attachedFaces:[{fIndex:0,steps:[function(){return[1,0]},function(){return[0,2]},function(){return[-1,-2]}]},{fIndex:6,steps:[function(){return[1,2]},function(){return[0,-2]},function(){return[-1,0]}]}],unitVector:(new Vector(new Point(1,
1,-1))).unit()},{slices:[{fIndex:0,sIJ:function(d){return[d,0]},dIJ:function(d,g){return[g%2?0:1,1]},limJ:function(d){return 1+2*(a-d-1)}},{fIndex:4,sIJ:function(d){return[a-1,2*d]},dIJ:function(d,g){return[g%2?-1:0,-1]},limJ:function(d){return 1+2*d}},{fIndex:7,sIJ:function(d){return[a-d-1,2*(a-d-1)]},dIJ:function(){return[0,-1]},limJ:function(d){return 1+2*(a-d-1)}},{fIndex:6,sIJ:function(d){return[a-d-1,2*(a-d-1)]},dIJ:function(d,g){return[g%2?0:1,g%2?-1:1]},limJ:function(d){return 1+2*d}},{fIndex:2,
sIJ:function(d){return[a-1,2*d]},dIJ:function(d,g){return[g%2?-1:0,g%2?-1:1]},limJ:function(d){return 1+2*(a-d-1)}},{fIndex:3,sIJ:function(d){return[d,0]},dIJ:function(){return[0,1]},limJ:function(d){return 1+2*d}}],attachedFaces:[{fIndex:1,steps:[function(){return[1,0]},function(){return[0,2]},function(){return[-1,-2]}]},{fIndex:5,steps:[function(){return[1,2]},function(){return[0,-2]},function(){return[-1,0]}]}],unitVector:(new Vector(new Point(1,-1,-1))).unit()},{slices:[{fIndex:1,sIJ:function(d){return[d,
0]},dIJ:function(d,g){return[g%2?0:1,1]},limJ:function(d){return 1+2*(a-d-1)}},{fIndex:7,sIJ:function(d){return[a-1,2*d]},dIJ:function(d,g){return[g%2?-1:0,-1]},limJ:function(d){return 1+2*d}},{fIndex:6,sIJ:function(d){return[a-d-1,2*(a-d-1)]},dIJ:function(){return[0,-1]},limJ:function(d){return 1+2*(a-d-1)}},{fIndex:5,sIJ:function(d){return[a-d-1,2*(a-d-1)]},dIJ:function(d,g){return[g%2?0:1,g%2?-1:1]},limJ:function(d){return 1+2*d}},{fIndex:3,sIJ:function(d){return[a-1,2*d]},dIJ:function(d,g){return[g%
2?-1:0,g%2?-1:1]},limJ:function(d){return 1+2*(a-d-1)}},{fIndex:0,sIJ:function(d){return[d,0]},dIJ:function(){return[0,1]},limJ:function(d){return 1+2*d}}],attachedFaces:[{fIndex:2,steps:[function(){return[1,0]},function(){return[0,2]},function(){return[-1,-2]}]},{fIndex:4,steps:[function(){return[1,2]},function(){return[0,-2]},function(){return[-1,0]}]}],unitVector:(new Vector(new Point(-1,-1,-1))).unit()},{slices:[{fIndex:2,sIJ:function(d){return[d,0]},dIJ:function(d,g){return[g%2?0:1,1]},limJ:function(d){return 1+
2*(a-d-1)}},{fIndex:6,sIJ:function(d){return[a-1,2*d]},dIJ:function(d,g){return[g%2?-1:0,-1]},limJ:function(d){return 1+2*d}},{fIndex:5,sIJ:function(d){return[a-d-1,2*(a-d-1)]},dIJ:function(){return[0,-1]},limJ:function(d){return 1+2*(a-d-1)}},{fIndex:4,sIJ:function(d){return[a-d-1,2*(a-d-1)]},dIJ:function(d,g){return[g%2?0:1,g%2?-1:1]},limJ:function(d){return 1+2*d}},{fIndex:0,sIJ:function(d){return[a-1,2*d]},dIJ:function(d,g){return[g%2?-1:0,g%2?-1:1]},limJ:function(d){return 1+2*(a-d-1)}},{fIndex:1,
sIJ:function(d){return[d,0]},dIJ:function(){return[0,1]},limJ:function(d){return 1+2*d}}],attachedFaces:[{fIndex:3,steps:[function(){return[1,0]},function(){return[0,2]},function(){return[-1,-2]}]},{fIndex:7,steps:[function(){return[1,2]},function(){return[0,-2]},function(){return[-1,0]}]}],unitVector:(new Vector(new Point(-1,1,-1))).unit()}];b.forEach(function(d,g){for(var m=[],n=[d.points[0].clone()],p,q,v,t,l,A=(new Vector(d.points[0],d.points[1])).multiply(1/a),w=(new Vector(d.points[1],d.points[2])).multiply(1/
a),x,E={$jscomp$loop$prop$i$32:0};E.$jscomp$loop$prop$i$32<a;E={$jscomp$loop$prop$i$32:E.$jscomp$loop$prop$i$32},E.$jscomp$loop$prop$i$32++){p=[];x=A.add(n[0]);p.push(new Point(x.x,x.y,x.z));for(var G=0;G<=E.$jscomp$loop$prop$i$32;G++)x=w.add(x),p.push(new Point(x.x,x.y,x.z));n.forEach(function(J){return function(H,I){q=H.clone();v=p[I].clone();t=p[I+1].clone();q.id="p-"+g+"-"+J.$jscomp$loop$prop$i$32+"-"+I;v.id="p-"+g+"-"+(J.$jscomp$loop$prop$i$32+1)+"-"+I;t.id="p-"+g+"-"+(J.$jscomp$loop$prop$i$32+
1)+"-"+(I+1);q.clone();v.clone();t.clone();m.push(new Sticker("s-"+g+"-"+J.$jscomp$loop$prop$i$32+"-"+2*I,d.color,[q,v,t]));e[m[m.length-1].id]=m[m.length-1];I<n.length-1&&(q=q.clone(),t=t.clone(),l=n[I+1].clone(),l.id="q-"+g+"-"+J.$jscomp$loop$prop$i$32+"-"+(I+1),q.clone(),t.clone(),l.clone(),m.push(new Sticker("s-"+g+"-"+J.$jscomp$loop$prop$i$32+"-"+(2*I+1),d.color,[q,t,l])),e[m[m.length-1].id]=m[m.length-1])}}(E));n=p}f.push(new Face(m))});var y,F,C,D,u,z,B,k;r.forEach(function(d){for(var g={$jscomp$loop$prop$c$34:0};g.$jscomp$loop$prop$c$34<
a;g={$jscomp$loop$prop$c$34:g.$jscomp$loop$prop$c$34},g.$jscomp$loop$prop$c$34++)y=new Cycle(h.length,[],3,d.unitVector,c),C=[],d.slices.forEach(function(m){return function(n){var p=$jscomp.makeIterator(n.sIJ(m.$jscomp$loop$prop$c$34));D=p.next().value;u=p.next().value;k=n.limJ(m.$jscomp$loop$prop$c$34);for(p=0;p<k;p++){var q=$jscomp.makeIterator(n.dIJ(m.$jscomp$loop$prop$c$34,p));z=q.next().value;B=q.next().value;C.push(e["s-"+n.fIndex+"-"+D+"-"+u]);D+=z;u+=B}}}(g)),y.stickerCollections.push(C),
h.push(y);d.attachedFaces.forEach(function(m,n){y=n?h[h.length-1]:h[h.length-a];F=m.fIndex;var p=a-1;n=1;for(var q=0,v,t,l;0<p;)t=l=q,C=[],m.steps.forEach(function(A){for(var w=v=0;w<p;w++){var x=$jscomp.makeIterator(A(q,v)),E=x.next().value;x=x.next().value;C.push(e["s-"+F+"-"+t+"-"+l]);t+=E;l+=x;v+=1}}),y.stickerCollections.push(C),q+=1,p-=n,n=2===n?1:2;e["s-"+F+"-"+q+"-"+q]&&y.stickerCollections.push([e["s-"+F+"-"+q+"-"+q]])})});h.forEach(function(d){d.stickerCollections[0].isPrimary=!0;d.computeStickerCover()});
Puzzle.call(this,"Octahedron",a,f,h);this.saveOrientation({axis:new Vector({x:0,y:1,z:0}),angle:Math.PI/12});this.saveOrientation({axis:new Vector({x:1,y:0,z:0}),angle:Math.PI/24})};$jscomp.inherits(Octahedron,Puzzle);
var Dodecahedron=function(a,b){a=void 0===a?1:a;var c=(1+Math.sqrt(5))/2;b=(void 0===b?200:b)/2;var e=b*c;c=1*b/c;var f=[],h=[],r={},y={},F={steps:10,dAlpha:2*Math.PI/5/10};c=[new Point(b,b,b,"r0"),new Point(b,b,-b,"r1"),new Point(b,-b,b,"r2"),new Point(b,-b,-b,"r3"),new Point(-b,b,b,"r4"),new Point(-b,b,-b,"r5"),new Point(-b,-b,b,"r6"),new Point(-b,-b,-b,"r7"),new Point(e,c,0,"r8"),new Point(e,-c,0,"r9"),new Point(-e,c,0,"r10"),new Point(-e,-c,0,"r11"),new Point(0,e,c,"r12"),new Point(0,e,-c,"r13"),
new Point(0,-e,c,"r14"),new Point(0,-e,-c,"r15"),new Point(c,0,e,"r16"),new Point(c,0,-e,"r17"),new Point(-c,0,e,"r18"),new Point(-c,0,-e,"r19")];var C=[{points:[c[8],c[1],c[13],c[12],c[0]],color:"purple"},{points:[c[9],c[2],c[14],c[15],c[3]],color:"magenta"},{points:[c[10],c[4],c[12],c[13],c[5]],color:"white"},{points:[c[11],c[7],c[15],c[14],c[6]],color:"yellow"},{points:[c[12],c[4],c[18],c[16],c[0]],color:"pink"},{points:[c[13],c[1],c[17],c[19],c[5]],color:"blue"},{points:[c[14],c[2],c[16],c[18],
c[6]],color:"green"},{points:[c[15],c[7],c[19],c[17],c[3]],color:"crimson"},{points:[c[16],c[2],c[9],c[8],c[0]],color:"red"},{points:[c[17],c[1],c[8],c[9],c[3]],color:"lawngreen"},{points:[c[18],c[4],c[10],c[11],c[6]],color:"brown"},{points:[c[19],c[7],c[11],c[10],c[5]],color:"skyblue"}];c=function(g){return C[g].points.reduce(function(m,n){return m.add(n)},new Vector({x:0,y:0,z:0}))};b=[];for(e=0;12>e;e++){var D={unitVector:c(e),slices:{length:5}},u=void 0,z=void 0,B=void 0;for(u=0;12>u;u++)if(u!=
e)for(var k=0;5>k;k++)for(var d=0;5>d;d++)C[e].points[k].id===C[u].points[d].id&&C[e].points[mod(k+1,5)].id===C[u].points[mod(d-1,5)].id&&(z=d,B=mod(d-1,5),D.slices[k]={face:u,startV:z,endV:B});D.slices=Array.prototype.slice.apply(D.slices);b.push(D)}C.forEach(function(g,m){var n=[];g.points.forEach(function(p,q){var v=new Vector(p),t=(new Vector(p,g.points[mod(q+1,g.points.length)])).multiply(1/(2*a));p=(new Vector(p,g.points[mod(q-1,g.points.length)])).multiply(1/(2*a));var l,A;for(l=0;l<=a;l++)for(A=
0;A<=a;A++){var w=v.add(t.multiply(l)).add(p.multiply(A));r["p-"+m+"-"+q+"-"+l+"-"+A]=new Point(w.x,w.y,w.z);l&&A&&(n.push(new Sticker("s-"+m+"-"+q+"-"+(l-1)+"-"+(A-1),g.color,[r["p-"+m+"-"+q+"-"+l+"-"+A].clone(),r["p-"+m+"-"+q+"-"+(l-1)+"-"+A].clone(),r["p-"+m+"-"+q+"-"+(l-1)+"-"+(A-1)].clone(),r["p-"+m+"-"+q+"-"+l+"-"+(A-1)].clone()])),y[n[n.length-1].id]=n[n.length-1])}w=(new Vector(g.points[mod(q,g.points.length)],g.points[mod(q-1,g.points.length)])).multiply(1/(2*a));A=(new Vector(g.points[mod(q+
1,g.points.length)],g.points[mod(q+2,g.points.length)])).multiply(1/(2*a));var x=v.add(t.multiply(a));for(l=0;l<=a;l++){var E=x.add(w.multiply(l));var G=x.add(A.multiply(l));r["p-m-"+m+"-"+q+"-"+l+"-l"]=new Point(E.x,E.y,E.z);r["p-m-"+m+"-"+q+"-"+l+"-r"]=new Point(G.x,G.y,G.z);l&&(n.push(new Sticker("s-"+m+"-"+q+"-"+(l-1)+"-"+a,g.color,[r["p-m-"+m+"-"+q+"-"+l+"-l"].clone(),r["p-m-"+m+"-"+q+"-"+l+"-r"].clone(),r["p-m-"+m+"-"+q+"-"+(l-1)+"-r"].clone(),r["p-m-"+m+"-"+q+"-"+(l-1)+"-l"].clone()])),y[n[n.length-
1].id]=n[n.length-1])}v=v.add(t.multiply(a)).add(p.multiply(a));r["p-"+m+"-"+q]=new Point(v.x,v.y,v.z)});n.push(new Sticker("s-"+m,g.color,[r["p-"+m+"-0"].clone(),r["p-"+m+"-1"].clone(),r["p-"+m+"-2"].clone(),r["p-"+m+"-3"].clone(),r["p-"+m+"-4"].clone()]));y[n[n.length-1].id]=n[n.length-1];f.push(new Face(n))});b.forEach(function(g,m){for(var n,p={$jscomp$loop$prop$i$41:0};p.$jscomp$loop$prop$i$41<a;p={$jscomp$loop$prop$i$41:p.$jscomp$loop$prop$i$41,$jscomp$loop$prop$stickerCollection$8$40:p.$jscomp$loop$prop$stickerCollection$8$40},
p.$jscomp$loop$prop$i$41++){for(var q=new Cycle(h.length,[],5,g.unitVector,F),v={$jscomp$loop$prop$j$39:0};v.$jscomp$loop$prop$j$39<a;v={$jscomp$loop$prop$stickerCollection$36:v.$jscomp$loop$prop$stickerCollection$36,$jscomp$loop$prop$j$39:v.$jscomp$loop$prop$j$39},v.$jscomp$loop$prop$j$39++)v.$jscomp$loop$prop$stickerCollection$36=[],g.slices.forEach(function(t,l){return function(A){t.$jscomp$loop$prop$stickerCollection$36.push(y["s-"+A.face+"-"+A.startV+"-"+l.$jscomp$loop$prop$i$41+"-"+t.$jscomp$loop$prop$j$39]);
t.$jscomp$loop$prop$stickerCollection$36.push(y["s-"+A.face+"-"+A.endV+"-"+t.$jscomp$loop$prop$j$39+"-"+l.$jscomp$loop$prop$i$41])}}(v,p)),q.stickerCollections.push(v.$jscomp$loop$prop$stickerCollection$36);p.$jscomp$loop$prop$stickerCollection$8$40=[];g.slices.forEach(function(t){return function(l){t.$jscomp$loop$prop$stickerCollection$8$40.push(y["s-"+l.face+"-"+l.endV+"-"+t.$jscomp$loop$prop$i$41+"-"+a])}}(p));q.stickerCollections.push(p.$jscomp$loop$prop$stickerCollection$8$40);q.stickerCollections.forEach(function(t){return t.isPrimary=
!0});h.push(q);p.$jscomp$loop$prop$i$41||(n=q)}for(g=0;g<a;g++)for(p=0;p<=a;p++){q=[];for(v=0;5>v;v++)q.push(y["s-"+m+"-"+v+"-"+g+"-"+p]);n.stickerCollections.push(q)}n.stickerCollections.push([y["s-"+m]])});h.forEach(function(g){return g.computeStickerCover()});Puzzle.call(this,"Dodecahedron",a<<1,f,h);this.saveOrientation({axis:new Vector({x:1,y:0,z:0}),angle:-Math.PI/5})};$jscomp.inherits(Dodecahedron,Puzzle);
var Icosahedron=function(a,b){a=void 0===a?2:a;var c={},e={},f=[],h=[],r={steps:10,dAlpha:2*Math.PI/5/10};b=(void 0===b?200:b)/2;var y=b*(1+Math.sqrt(5))/2;b=[new Point(0,y,b,"r0"),new Point(0,y,-b,"r1"),new Point(0,-y,b,"r2"),new Point(0,-y,-b,"r3"),new Point(y,b,0,"r4"),new Point(y,-b,0,"r5"),new Point(-y,b,0,"r6"),new Point(-y,-b,0,"r7"),new Point(b,0,y,"r8"),new Point(-b,0,y,"r9"),new Point(b,0,-y,"r10"),new Point(-b,0,-y,"r11")];var F=[{points:[b[0],b[4],b[1]],color:"white"},{points:[b[0],b[1],
b[6]],color:"blue"},{points:[b[0],b[6],b[9]],color:"red"},{points:[b[0],b[9],b[8]],color:"lawngreen"},{points:[b[0],b[8],b[4]],color:"skyblue"},{points:[b[3],b[2],b[7]],color:"orange"},{points:[b[3],b[5],b[2]],color:"darkolivegreen"},{points:[b[3],b[10],b[5]],color:"yellow"},{points:[b[3],b[11],b[10]],color:"lightgreen"},{points:[b[3],b[7],b[11]],color:"salmon"},{points:[b[4],b[5],b[10]],color:"magenta"},{points:[b[1],b[10],b[11]],color:"crimson"},{points:[b[6],b[11],b[7]],color:"indigo"},{points:[b[9],
b[7],b[2]],color:"brown"},{points:[b[8],b[2],b[5]],color:"darkblue"},{points:[b[2],b[8],b[9]],color:"pink"},{points:[b[5],b[4],b[8]],color:"burlywood"},{points:[b[10],b[1],b[4]],color:"darkcyan"},{points:[b[11],b[6],b[1]],color:"darkmagenta"},{points:[b[7],b[9],b[6]],color:"goldenrod"}];F.forEach(function(u,z){return u.id=z});var C={},D=[];b.forEach(function(u){var z=u.id;u={root:u,faces:[]};var B=F.find(function(g){return g.points.find(function(m){return m.id===z})});u.faces.push(B);[].push(B.points[mod(B.points.findIndex(function(g){return g.id===
z})+2,3)].id);for(var k={},d=0;4>d;k={$jscomp$loop$prop$p1id$43:k.$jscomp$loop$prop$p1id$43,$jscomp$loop$prop$p0id$44:k.$jscomp$loop$prop$p0id$44,$jscomp$loop$prop$p2id$45:k.$jscomp$loop$prop$p2id$45},d++)k.$jscomp$loop$prop$p0id$44=z,k.$jscomp$loop$prop$p1id$43=B.points[mod(B.points.findIndex(function(g){return g.id===z})+1,3)].id,k.$jscomp$loop$prop$p2id$45=B.points[mod(B.points.findIndex(function(g){return g.id===z})+2,3)].id,B=F.find(function(g){return function(m){m=m.points;return!m.find(function(n){return n.id===
g.$jscomp$loop$prop$p1id$43})&&m.find(function(n){return n.id===g.$jscomp$loop$prop$p0id$44})&&m.find(function(n){return n.id===g.$jscomp$loop$prop$p2id$45})}}(k)),u.faces.push(B);D.push(u)});F.forEach(function(u,z){var B=u.points;u=u.color;var k=[],d=new Vector(B[0]),g=(new Vector(B[0],B[1])).multiply(1/a),m=(new Vector(B[1],B[2])).multiply(1/a),n,p;for(n=0;n<=a;n++)for(p=0;p<=n;p++){var q=d.add(g.multiply(n)).add(m.multiply(p));c["p-"+z+"-"+n+"-"+p]=new Point(q.x,q.y,q.z);n&&p&&(k.push(new Sticker("s-"+
z+"-"+n+"-"+p,u,[c["p-"+z+"-"+(n-1)+"-"+(p-1)].clone(),c["p-"+z+"-"+n+"-"+(p-1)].clone(),c["p-"+z+"-"+n+"-"+p].clone()])),e[k[k.length-1].id]=k[k.length-1],p<n&&(k.push(new Sticker("s-"+z+"-"+n+"-"+p+"-r",u,[c["p-"+z+"-"+n+"-"+p].clone(),c["p-"+z+"-"+(n-1)+"-"+p].clone(),c["p-"+z+"-"+(n-1)+"-"+(p-1)].clone()])),e[k[k.length-1].id]=k[k.length-1]))}f.push(new Face(k));u={};u[B[0].id]=[];for(k=1;k<=a;k++){d=[];for(g=1;g<=k;g++)d.push(e["s-"+z+"-"+k+"-"+g]),g<k&&d.push(e["s-"+z+"-"+k+"-"+g+"-r"]);u[B[0].id].push(d)}u[B[1].id]=
[];for(k=1;k<=a;k++){d=[];for(g=1;g<=k;g++)d.push(e["s-"+z+"-"+(a-(g-1))+"-"+(k-(g-1))]),g<k&&d.push(e["s-"+z+"-"+(a-(g-1))+"-"+(k-g)+"-r"]);u[B[1].id].push(d)}u[B[2].id]=[];for(k=1;k<=a;k++){d=[];for(g=1;g<=k;g++)d.push(e["s-"+z+"-"+(a+(g-1)-(k-1))+"-"+(a-(k-1))]),g<k&&d.push(e["s-"+z+"-"+(a+1+(g-1)-(k-1))+"-"+(a-(k-1))+"-r"]);u[B[2].id].push(d)}C[z]=u});D.forEach(function(u){var z=u.faces,B=u.root;for(u={$jscomp$loop$prop$c$47:0};u.$jscomp$loop$prop$c$47<a;u={$jscomp$loop$prop$c$47:u.$jscomp$loop$prop$c$47},
u.$jscomp$loop$prop$c$47++){var k=(new Vector(B)).unit(),d=[Array.prototype.concat.apply([],z.map(function(g){return function(m){return C[m.id][B.id][g.$jscomp$loop$prop$c$47]}}(u)))];h.push(new Cycle(h.length,d,5,k,r))}});h.forEach(function(u){u.stickerCollections[0].isPrimary=!0;u.computeStickerCover()});Puzzle.call(this,"Icosahedron",a,f,h);this.saveOrientation({axis:new Vector({x:1,y:0,z:0}),angle:-27*Math.PI/40})};$jscomp.inherits(Icosahedron,Puzzle);
(function(){window.menuConfig={puzzles:{tetrahedron:function(b,c){return new Tetrahedron(b,c?42.5:void 0)},cube:function(b,c){return new Cube(b,c?50:void 0)},octahedron:function(b,c){return new Octahedron(b,c?42.5:void 0)},dodecahedron:function(b,c){return new Dodecahedron(b,c?42.5:void 0)},icosahedron:function(b,c){return new Icosahedron(b,c?42.5:void 0)}},sizes:{tetrahedron:[3,4,5],cube:[2,3,4],octahedron:[2,3,4],dodecahedron:[1,2,3],icosahedron:[2,3,4]}};var a=0;window.showShapeMenu=function(){a++;
window.puzzlemenu.style.display=window.shapemenu.style.display=window.settingsmenubutton.style.display="inline-block";window.configurationmenu.style.display=window.puzzlemenubutton.style.display=window.sizemenu.style.display="none";var b=a,c={},e;for(e in window.menuConfig.puzzles)c.$jscomp$loop$prop$elemId$53=e,c.$jscomp$loop$prop$ctx$49=window[c.$jscomp$loop$prop$elemId$53].getContext("2d"),c.$jscomp$loop$prop$puzzle$50=(0,window.menuConfig.puzzles[c.$jscomp$loop$prop$elemId$53])(void 0,!0),c.$jscomp$loop$prop$puzzle$50.updatedOrientation=
{axis:new Vector({x:1,y:1,z:0}),angle:0},c.$jscomp$loop$prop$ctx$49.setTransform(1,0,0,1,0,0),c.$jscomp$loop$prop$ctx$49.translate(50,50),c.$jscomp$loop$prop$animationFPSThrottler$20$51=createAnimationFPSThrottler(),c.$jscomp$loop$prop$loop$52=function(f){return function(){f.$jscomp$loop$prop$ctx$49.save();f.$jscomp$loop$prop$ctx$49.setTransform(1,0,0,1,0,0);f.$jscomp$loop$prop$ctx$49.clearRect(0,0,gameCanvas.width,gameCanvas.height);f.$jscomp$loop$prop$ctx$49.restore();f.$jscomp$loop$prop$puzzle$50.updatedOrientation.angle+=
.015;f.$jscomp$loop$prop$puzzle$50.update();f.$jscomp$loop$prop$puzzle$50.render(f.$jscomp$loop$prop$ctx$49);a===b&&f.$jscomp$loop$prop$animationFPSThrottler$20$51.requestAnimationFrame(f.$jscomp$loop$prop$loop$52)}}(c),c.$jscomp$loop$prop$animationFPSThrottler$20$51.requestAnimationFrame(c.$jscomp$loop$prop$loop$52),window[c.$jscomp$loop$prop$elemId$53].onmousedown=function(f){return function(){return showSizeMenu(f.$jscomp$loop$prop$elemId$53)}}(c),c={$jscomp$loop$prop$ctx$49:c.$jscomp$loop$prop$ctx$49,
$jscomp$loop$prop$puzzle$50:c.$jscomp$loop$prop$puzzle$50,$jscomp$loop$prop$animationFPSThrottler$20$51:c.$jscomp$loop$prop$animationFPSThrottler$20$51,$jscomp$loop$prop$loop$52:c.$jscomp$loop$prop$loop$52,$jscomp$loop$prop$elemId$53:c.$jscomp$loop$prop$elemId$53}};window.showSizeMenu=function(b){a++;var c=a;window.shapemenu.style.display=window.settingsmenubutton.style.display="none";window.sizemenu.style.display=window.puzzlemenubutton.style.display="inline-block";for(var e={},f=0;3>f;e={$jscomp$loop$prop$ctx$55:e.$jscomp$loop$prop$ctx$55,
$jscomp$loop$prop$puzzle$56:e.$jscomp$loop$prop$puzzle$56,$jscomp$loop$prop$loop$57:e.$jscomp$loop$prop$loop$57,$jscomp$loop$prop$constructor$58:e.$jscomp$loop$prop$constructor$58,$jscomp$loop$prop$puzzleSize$59:e.$jscomp$loop$prop$puzzleSize$59},f++)e.$jscomp$loop$prop$ctx$55=window["size-"+(f+1)].getContext("2d"),e.$jscomp$loop$prop$constructor$58=window.menuConfig.puzzles[b],e.$jscomp$loop$prop$puzzleSize$59=window.menuConfig.sizes[b][f],e.$jscomp$loop$prop$puzzle$56=e.$jscomp$loop$prop$constructor$58(e.$jscomp$loop$prop$puzzleSize$59,
!0),e.$jscomp$loop$prop$puzzle$56.updatedOrientation={axis:new Vector({x:1,y:1,z:0}),angle:0},e.$jscomp$loop$prop$ctx$55.setTransform(1,0,0,1,0,0),e.$jscomp$loop$prop$ctx$55.translate(50,50),animationFPSThrottler=createAnimationFPSThrottler(),e.$jscomp$loop$prop$loop$57=function(h){return function(){h.$jscomp$loop$prop$ctx$55.save();h.$jscomp$loop$prop$ctx$55.setTransform(1,0,0,1,0,0);h.$jscomp$loop$prop$ctx$55.clearRect(0,0,gameCanvas.width,gameCanvas.height);h.$jscomp$loop$prop$ctx$55.restore();
h.$jscomp$loop$prop$puzzle$56.updatedOrientation.angle+=.015;h.$jscomp$loop$prop$puzzle$56.update();h.$jscomp$loop$prop$puzzle$56.render(h.$jscomp$loop$prop$ctx$55);a===c&&animationFPSThrottler.requestAnimationFrame(h.$jscomp$loop$prop$loop$57)}}(e),animationFPSThrottler.requestAnimationFrame(e.$jscomp$loop$prop$loop$57),window["size-"+(f+1)].onmousedown=function(h){return function(){window.clearSolution();window.selectedPuzzle=h.$jscomp$loop$prop$constructor$58(h.$jscomp$loop$prop$puzzleSize$59,
!1);window.showStartButton()}}(e)};window.showSettingsMenu=function(){window.puzzlemenu.style.display=window.settingsmenubutton.style.display="none";window.configurationmenu.style.display=window.puzzlemenubutton.style.display="inline-block"};window.hideStartButton=function(){window.startbutton.style.visibility="hidden"};window.showStartButton=function(){window.startbutton.style.visibility="visible"};window.showShapeMenu()})();
(function(){var a=gameCanvas.getContext("2d"),b=gameCanvasInverted.getContext("2d");a.translate(300,300);b.scale(1/3,1/3);b.translate(300,300);var c=function(){var h=gameCanvas.getBoundingClientRect();return{x:h.left+300,y:h.top+300}};window.explodedStickers=!0;window.animate=!0;window.selectedPuzzle=new Tetrahedron;Puzzle.prototype.onFinish=function(h){window.help.style.display="none";window.menu.style.display="none";window.success.style.display="inline-block";window.message.innerHTML="You solved it in "+
h+" seconds.<br/> Good Job."};var e=createAnimationFPSThrottler(),f=function(){a.save();a.setTransform(1,0,0,1,0,0);a.clearRect(0,0,gameCanvas.width,gameCanvas.height);a.restore();window.selectedPuzzle.update();window.selectedPuzzle.render(a,!1,window.explodedStickers);window.showRearView&&(b.save(),b.setTransform(1,0,0,1,0,0),b.clearRect(0,0,gameCanvas.width,gameCanvas.height),b.restore(),window.selectedPuzzle.render(b,!0,window.explodedStickers));if(window.selectedPuzzle.startTime){var h=Math.floor(((new Date).getTime()-
window.selectedPuzzle.startTime)/1E3),r=""+Math.floor(h/60);h=""+h%60;2>r.length&&(r="0"+r);2>h.length&&(h="0"+h);window.stats.innerHTML="Time Taken: "+r+":"+h+", Moves Made: "+window.selectedPuzzle.movesMade}else window.stats.innerHTML="Time Taken: --:--, Moves Made: --";e.requestAnimationFrame(f)};e.requestAnimationFrame(f);document.addEventListener("contextmenu",function(h){return h.preventDefault()});gameCanvas.addEventListener("mousedown",function(h){h.preventDefault();h.stopPropagation();var r=
c();window.selectedPuzzle.grab(h.clientX-r.x,h.clientY-r.y,h.ctrlKey?2:h.button)});gameCanvas.addEventListener("mousemove",function(h){h.preventDefault();h.stopPropagation();var r=c();window.selectedPuzzle.drag(h.clientX-r.x,h.clientY-r.y)});gameCanvas.addEventListener("mouseup",function(h){h.preventDefault();h.stopPropagation();window.selectedPuzzle.release()});gameCanvas.addEventListener("mouseleave",function(h){window.selectedPuzzle.release()});gameCanvas.addEventListener("touchstart",function(h){h.preventDefault();
h.stopPropagation();var r=c();window.selectedPuzzle.grab(h.touches[0].clientX-r.x,h.touches[0].clientY-r.y,1)});gameCanvas.addEventListener("touchmove",function(h){h.preventDefault();h.stopPropagation();var r=c();window.selectedPuzzle.drag(h.touches[0].clientX-r.x,h.touches[0].clientY-r.y)});gameCanvas.addEventListener("touchend",function(h){h.preventDefault();h.stopPropagation();window.selectedPuzzle.release()});gameCanvas.addEventListener("touchcancel",function(h){window.selectedPuzzle.release()})})();
(function(){window.Worker?window.solverWorker=new Worker("src/solver-worker.js"):(window.solverunsupported.style.display="block",window.solvewrapper.style.display="none");var a=window.solutionStack={movesMade:[],movesToMake:[]};window.updateSolutionPanel=function(){var f=a.movesToMake.length?a.movesToMake[a.movesToMake.length-1].subSequence:"";window.solutioninfo.innerHTML="\n            "+(a.movesToMake.length?a.movesToMake[a.movesToMake.length-1].sequence:a.movesMade.length?"Solved!":"Already Solved!")+
"\n            <br/>\n            "+(f?f+"<br/>":"")+"\n            "+a.movesMade.length+"/"+(a.movesMade.length+a.movesToMake.length);window.applysolutionpanel.style.visibility=a.movesToMake.length?"visible":"hidden";window.revertsolutionpanel.style.visibility=a.movesMade.length?"visible":"hidden"};var b=!1,c=!1,e=!1;window.clearSolution=function(){b?c=!0:window.solutionpanel.style.display="none"};window.disableSolveButton=function(){window.solvebutton.style.color="grey";window.solvebutton.style.borderColor=
"grey";e=!0};window.enableSolveButton=function(){window.solvebutton.style.color="skyblue";window.solvebutton.style.borderColor="skyblue";e=!1};window.generateSolution=function(){b||e||(b=!0,window.selectedPuzzle.clearStats(),window.solvebutton.style.display="none",window.solverstatus.style.display="block",window.solverstatustext.innerHTML="Initializing solver for "+window.selectedPuzzle.displayName+" of size "+window.selectedPuzzle.displaySize+"\n            <br/>(This may take minutes for large puzzles)\n            ",
window.solverWorker.postMessage(window.selectedPuzzle))};window.solverWorker&&(window.solverWorker.onmessage=function(f){"INITIALIZED"===f.data.status&&(window.solverstatustext.innerText="Solving "+window.selectedPuzzle.displayName+" of size "+window.selectedPuzzle.displaySize);"SOLVED"===f.data.status&&(window.solverstatus.style.display="none",window.solvebutton.style.display="inline-block",c||(window.solutionStack.movesMade=[],window.solutionStack.movesToMake=f.data.solution.reverse(),window.solutionpanel.style.display=
"block",updateSolutionPanel()),b=c=!1)});window.makeSolverMove=function(){if(a.movesToMake.length){var f=a.movesToMake.pop();window.selectedPuzzle.animateAndTwist(window.selectedPuzzle.cycles[f.cycleIndex],f.direction>f.period>>1?f.direction-f.period:f.direction)?(a.movesMade.push(f),updateSolutionPanel()):a.movesToMake.push(f)}};window.revertSolverMove=function(){if(a.movesMade.length){var f=a.movesMade.pop();window.selectedPuzzle.animateAndTwist(window.selectedPuzzle.cycles[f.cycleIndex],-(f.direction>
f.period>>1?f.direction-f.period:f.direction))?(a.movesToMake.push(f),updateSolutionPanel()):a.movesMade.push(f)}};window.makeSolverMoveSequence=function(){if(a.movesToMake.length){for(var f=a.movesToMake[a.movesToMake.length-1].sequence;a.movesToMake.length&&a.movesToMake[a.movesToMake.length-1].sequence===f;){var h=a.movesToMake.pop();window.selectedPuzzle.cycles[h.cycleIndex].twist(h.direction);a.movesMade.push(h)}updateSolutionPanel()}};window.revertSolverMoveSequence=function(){if(a.movesMade.length){for(var f=
a.movesMade[a.movesMade.length-1].sequence;a.movesMade.length&&a.movesMade[a.movesMade.length-1].sequence===f;){var h=a.movesMade.pop();window.selectedPuzzle.cycles[h.cycleIndex].twist(-h.direction);a.movesToMake.push(h)}updateSolutionPanel()}};window.makeAllSolverMoves=function(){for(;a.movesToMake.length;){var f=a.movesToMake.pop();window.selectedPuzzle.cycles[f.cycleIndex].twist(f.direction);a.movesMade.push(f)}updateSolutionPanel()};window.revertAllSolverMoves=function(){for(;a.movesMade.length;){var f=
a.movesMade.pop();window.selectedPuzzle.cycles[f.cycleIndex].twist(-f.direction);a.movesToMake.push(f)}updateSolutionPanel()}})();
