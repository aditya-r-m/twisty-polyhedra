var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.createTemplateTagFirstArg=function(b){return b.raw=b};$jscomp.createTemplateTagFirstArgWithRaw=function(b,a){b.raw=a;return b};$jscomp.arrayIteratorImpl=function(b){var a=0;return function(){return a<b.length?{done:!1,value:b[a++]}:{done:!0}}};$jscomp.arrayIterator=function(b){return{next:$jscomp.arrayIteratorImpl(b)}};$jscomp.makeIterator=function(b){var a="undefined"!=typeof Symbol&&Symbol.iterator&&b[Symbol.iterator];return a?a.call(b):$jscomp.arrayIterator(b)};
$jscomp.arrayFromIterator=function(b){for(var a,c=[];!(a=b.next()).done;)c.push(a.value);return c};$jscomp.arrayFromIterable=function(b){return b instanceof Array?b:$jscomp.arrayFromIterator($jscomp.makeIterator(b))};$jscomp.ASSUME_ES5=!1;$jscomp.ASSUME_NO_NATIVE_MAP=!1;$jscomp.ASSUME_NO_NATIVE_SET=!1;$jscomp.SIMPLE_FROUND_POLYFILL=!1;$jscomp.ISOLATE_POLYFILLS=!1;$jscomp.objectCreate=$jscomp.ASSUME_ES5||"function"==typeof Object.create?Object.create:function(b){var a=function(){};a.prototype=b;return new a};
$jscomp.defineProperty=$jscomp.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(b,a,c){if(b==Array.prototype||b==Object.prototype)return b;b[a]=c.value;return b};$jscomp.getGlobal=function(b){b=["object"==typeof globalThis&&globalThis,b,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof global&&global];for(var a=0;a<b.length;++a){var c=b[a];if(c&&c.Math==Math)return c}throw Error("Cannot find global object");};$jscomp.global=$jscomp.getGlobal(this);
$jscomp.IS_SYMBOL_NATIVE="function"===typeof Symbol&&"symbol"===typeof Symbol("x");$jscomp.TRUST_ES6_POLYFILLS=!$jscomp.ISOLATE_POLYFILLS||$jscomp.IS_SYMBOL_NATIVE;$jscomp.polyfills={};$jscomp.propertyToPolyfillSymbol={};$jscomp.POLYFILL_PREFIX="$jscp$";var $jscomp$lookupPolyfilledValue=function(b,a){var c=$jscomp.propertyToPolyfillSymbol[a];if(null==c)return b[a];c=b[c];return void 0!==c?c:b[a]};
$jscomp.polyfill=function(b,a,c,d){a&&($jscomp.ISOLATE_POLYFILLS?$jscomp.polyfillIsolated(b,a,c,d):$jscomp.polyfillUnisolated(b,a,c,d))};$jscomp.polyfillUnisolated=function(b,a,c,d){c=$jscomp.global;b=b.split(".");for(d=0;d<b.length-1;d++){var e=b[d];if(!(e in c))return;c=c[e]}b=b[b.length-1];d=c[b];a=a(d);a!=d&&null!=a&&$jscomp.defineProperty(c,b,{configurable:!0,writable:!0,value:a})};
$jscomp.polyfillIsolated=function(b,a,c,d){var e=b.split(".");b=1===e.length;d=e[0];d=!b&&d in $jscomp.polyfills?$jscomp.polyfills:$jscomp.global;for(var f=0;f<e.length-1;f++){var m=e[f];if(!(m in d))return;d=d[m]}e=e[e.length-1];c=$jscomp.IS_SYMBOL_NATIVE&&"es6"===c?d[e]:null;a=a(c);null!=a&&(b?$jscomp.defineProperty($jscomp.polyfills,e,{configurable:!0,writable:!0,value:a}):a!==c&&($jscomp.propertyToPolyfillSymbol[e]=$jscomp.IS_SYMBOL_NATIVE?$jscomp.global.Symbol(e):$jscomp.POLYFILL_PREFIX+e,e=
$jscomp.propertyToPolyfillSymbol[e],$jscomp.defineProperty(d,e,{configurable:!0,writable:!0,value:a})))};
$jscomp.getConstructImplementation=function(){function b(){function b(){}new b;Reflect.construct(b,[],function(){});return new b instanceof b}if($jscomp.TRUST_ES6_POLYFILLS&&"undefined"!=typeof Reflect&&Reflect.construct){if(b())return Reflect.construct;var a=Reflect.construct;return function(b,d,e){b=a(b,d);e&&Reflect.setPrototypeOf(b,e.prototype);return b}}return function(b,a,e){void 0===e&&(e=b);e=$jscomp.objectCreate(e.prototype||Object.prototype);return Function.prototype.apply.call(b,e,a)||
e}};$jscomp.construct={valueOf:$jscomp.getConstructImplementation}.valueOf();$jscomp.underscoreProtoCanBeSet=function(){var b={a:!0},a={};try{return a.__proto__=b,a.a}catch(c){}return!1};$jscomp.setPrototypeOf=$jscomp.TRUST_ES6_POLYFILLS&&"function"==typeof Object.setPrototypeOf?Object.setPrototypeOf:$jscomp.underscoreProtoCanBeSet()?function(b,a){b.__proto__=a;if(b.__proto__!==a)throw new TypeError(b+" is not extensible");return b}:null;
$jscomp.inherits=function(b,a){b.prototype=$jscomp.objectCreate(a.prototype);b.prototype.constructor=b;if($jscomp.setPrototypeOf){var c=$jscomp.setPrototypeOf;c(b,a)}else for(c in a)if("prototype"!=c)if(Object.defineProperties){var d=Object.getOwnPropertyDescriptor(a,c);d&&Object.defineProperty(b,c,d)}else b[c]=a[c];b.superClass_=a.prototype};$jscomp.polyfill("Reflect",function(b){return b?b:{}},"es6","es3");$jscomp.polyfill("Reflect.construct",function(b){return $jscomp.construct},"es6","es3");
$jscomp.polyfill("Reflect.setPrototypeOf",function(b){if(b)return b;if($jscomp.setPrototypeOf){var a=$jscomp.setPrototypeOf;return function(b,d){try{return a(b,d),!0}catch(e){return!1}}}return null},"es6","es5");$jscomp.polyfill("Array.prototype.fill",function(b){return b?b:function(b,c,d){var a=this.length||0;0>c&&(c=Math.max(0,a+c));if(null==d||d>a)d=a;d=Number(d);0>d&&(d=Math.max(0,a+d));for(c=Number(c||0);c<d;c++)this[c]=b;return this}},"es6","es3");
$jscomp.findInternal=function(b,a,c){b instanceof String&&(b=String(b));for(var d=b.length,e=0;e<d;e++){var f=b[e];if(a.call(c,f,e,b))return{i:e,v:f}}return{i:-1,v:void 0}};$jscomp.polyfill("Array.prototype.find",function(b){return b?b:function(b,c){return $jscomp.findInternal(this,b,c).v}},"es6","es3");$jscomp.polyfill("Array.prototype.findIndex",function(b){return b?b:function(b,c){return $jscomp.findInternal(this,b,c).i}},"es6","es3");mod=function(b,a){return(b%a+a)%a};
var origin={x:0,y:0,z:0},Vector=function(b,a){a||(a=b,b=origin);this.x=a.x-b.x;this.y=a.y-b.y;this.z=a.z-b.z};Vector.prototype.add=function(b){return new Vector(origin,{x:this.x+b.x,y:this.y+b.y,z:this.z+b.z})};Vector.prototype.subtract=function(b){return this.add({x:-b.x,y:-b.y,z:-b.z})};Vector.prototype.multiply=function(b){return new Vector(origin,{x:this.x*b,y:this.y*b,z:this.z*b})};Vector.prototype.magnitude=function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)};
Vector.prototype.unit=function(){return this.multiply(1/this.magnitude())};Vector.prototype.cross=function(b){return new Vector(origin,{x:this.y*b.z-this.z*b.y,y:this.z*b.x-this.x*b.z,z:this.x*b.y-this.y*b.x})};var qDimensions=["w","x","y","z"],qProductSign=[[1,1,1,1],[1,-1,1,-1],[1,-1,-1,1],[1,1,-1,-1]],qProductAxis=[[0,1,2,3],[1,0,3,2],[2,3,0,1],[3,2,1,0]],Quaternion=function(b,a,c,d){this.w=b;this.x=a;this.y=c;this.z=d};
Quaternion.prototype.conjugate=function(){return new Quaternion(this.w,-this.x,-this.y,-this.z)};Quaternion.prototype.multiply=function(b){for(var a=new Quaternion(0,0,0,0),c=0;4>c;c++)for(var d=0;4>d;d++)a[qDimensions[qProductAxis[c][d]]]+=qProductSign[c][d]*this[qDimensions[c]]*b[qDimensions[d]];return a};var Point=function(b,a,c,d){this.base={x:b,y:a,z:c};this.x=b;this.y=a;this.z=c;this.id=d};
Point.prototype.update=function(b){b=this.rotateAroundAxis(this.base,b.axis.unit(),b.angle);var a=b.y,c=b.z;this.x=b.x;this.y=a;this.z=c};Point.prototype.saveOrientation=function(b){this.update(b);this.base.x=this.x;this.base.y=this.y;this.base.z=this.z};Point.prototype.clone=function(){return new Point(this.x,this.y,this.z,this.id)};
Point.prototype.rotateAroundAxis=function(b,a,c){var d=Math.sin(c/2);a=new Quaternion(Math.cos(c/2),d*a.x,d*a.y,d*a.z);b=new Quaternion(0,b.x,b.y,b.z);b=a.multiply(b).multiply(a.conjugate());return new Point(b.x,b.y,b.z)};var ColorData=function(b,a){this.code=b;this.originalStickerId=a},Sticker=function(b,a,c){this.id=b;this.colorData=new ColorData(a,this.id);this.points=c;this.attractor={}};
Sticker.prototype.contains=function(b){for(var a=this.points[this.points.length-1],c=0,d=$jscomp.makeIterator(this.points),e=d.next();!e.done;e=d.next()){e=e.value;a=(new Vector(a,e)).cross(new Vector(a,b));if(0>c&&0<a.z||0<c&&0>a.z)return!1;0!==a.z&&(c=a.z);a=e}return!0};Sticker.prototype.calculateNormalVector=function(){return(new Vector(this.points[0],this.points[1])).cross(new Vector(this.points[0],this.points[this.points.length-1]))};
Sticker.prototype.update=function(b){this.points.forEach(function(a){return a.update(b)});this.attractor={x:this.points.reduce(function(b,c){return b+c.x},0),y:this.points.reduce(function(b,c){return b+c.y},0),z:this.points.reduce(function(b,c){return b+c.z},0)}};Sticker.prototype.getPointProjection=function(b,a,c){b=[b.x,b.y];c&&(b[0]+=(this.attractor.x-b[0])/(10*this.points.length),b[1]+=(this.attractor.y-b[1])/(10*this.points.length));a&&(b[0]=-b[0]);return b};
Sticker.prototype.render=function(b,a,c){var d=this;b.fillStyle=this.colorData.code;b.strokeStyle="#202020";b.beginPath();b.moveTo.apply(b,$jscomp.arrayFromIterable(this.getPointProjection(this.points[0],a,c)));this.points.forEach(function(e){return b.lineTo.apply(b,$jscomp.arrayFromIterable(d.getPointProjection(e,a,c)))});b.closePath();b.fill();b.stroke()};var Face=function(b){this.stickers=b;this.normalVector=this.stickers[0].calculateNormalVector()};
Face.prototype.update=function(b){this.stickers.forEach(function(a){return a.update(b)});this.normalVector=this.stickers[0].calculateNormalVector()};Face.prototype.render=function(b,a,c){this.stickers.forEach(function(d){return d.render(b,a,c)})};var Cycle=function(b,a,c,d,e){this.index=b;this.stickerCollections=a;this.period=c;this.unitVector=d;this.animationConfig=e;this.stickerCover={}};
Cycle.prototype.computeStickerCover=function(){var b=this;this.stickerCollections.forEach(function(a){return a.forEach(function(a){return b.stickerCover[a.id]=!0})})};Cycle.prototype.saveOrientation=function(b){var a=new Point(this.unitVector.x,this.unitVector.y,this.unitVector.z);a.update(b);this.unitVector=new Vector(a)};
Cycle.prototype.twist=function(b){var a=this;b=void 0===b?1:b;this.stickerCollections.forEach(function(c){if(1!==c.length){var d=b*c.length/a.period;c.forEach(function(b,a){b.$newColorData=c[mod(a-d,c.length)].colorData});c.forEach(function(b){b.colorData=b.$newColorData;delete b.$newColorData})}})};
var Puzzle=function(b,a,c,d){this.displayName=b;this.displaySize=a;this.faces=c;this.cycles=d;this.twisting=this.rotating=!1;this.startEvtCoordinates={};this.baseOrientation={axis:new Vector({x:1,y:0,z:0}),angle:0};this.animationState={active:!1,counter:0,direction:void 0,cycle:void 0};this.stickers=[].concat.apply([],$jscomp.arrayFromIterable(this.faces.map(function(b){return b.stickers})));this.clearStats();this.cycleMap={};this.processCycleMap();this.startSticker=void 0};
Puzzle.prototype.clearStats=function(){this.startTime=void 0;this.movesMade=0};Puzzle.prototype.isSolved=function(){for(var b=0;b<this.faces.length;b++)for(var a=0;a<this.faces[b].stickers.length;a++)if(this.faces[b].stickers[a].colorData.code!==this.faces[b].stickers[0].colorData.code)return!1;return!0};
Puzzle.prototype.processCycleMap=function(){var b=this;this.cycles.forEach(function(a){return a.stickerCollections.forEach(function(c){c.isPrimary&&c.forEach(function(c){b.cycleMap[c.id]=b.cycleMap[c.id]||[];b.cycleMap[c.id].push(a)})})})};
Puzzle.prototype.update=function(){var b=this;if(this.animationState.active&&this.animationState.counter<this.animationState.cycle.animationConfig.steps){var a={axis:this.animationState.cycle.unitVector,angle:this.animationState.direction*this.animationState.counter*this.animationState.cycle.animationConfig.dAlpha};this.stickers.forEach(function(c){b.animationState.cycle.stickerCover[c.id]&&c.update(a)});this.stickers.sort(function(b,a){return a.attractor.z-b.attractor.z});this.animationState.counter++}else if(this.faces.forEach(function(a){return a.update(b.updatedOrientation||
b.baseOrientation)}),this.faces.sort(function(b,a){return a.normalVector.z-b.normalVector.z}),this.animationState.active){this.animationState.cycle.twist(this.animationState.direction);this.startTime&&this.isSolved()?(this.onFinish&&this.onFinish(((new Date).getTime()-this.startTime)/1E3),this.clearStats()):this.startTime&&this.movesMade++;if(this.animationState.callback&&(this.animationState.callback(),this.animationState.counter<this.animationState.cycle.animationConfig.steps))return this.update();
this.animationState={active:!1,counter:0,direction:void 0,cycle:void 0}}};Puzzle.prototype.findTouchedSticker=function(b,a){for(var c,d=this.faces.length-1;0<=d&&!(0<=this.faces[d].normalVector.z);d--)if(c=this.faces[d].stickers.find(function(c){return c.contains({x:b,y:a,z:0})}))if(window.pointAndSwap)if(window.tempS){var e=c.colorData;c.colorData=window.tempS.colorData;window.tempS.colorData=e;window.tempS=void 0}else window.tempS=c;else return c};
Puzzle.prototype.grab=function(b,a,c){this.startEvtCoordinates.x=b;this.startEvtCoordinates.y=a;2===c?this.rotating=!0:(this.startSticker=this.findTouchedSticker(b,a),this.twisting=!!this.startSticker)};
Puzzle.prototype.drag=function(b,a){if(!this.animationState.active)if(this.rotating){if(b=(b-this.startEvtCoordinates.x)/100,a=(a-this.startEvtCoordinates.y)/100,b||a)a=new Vector({x:a,y:-b,z:0}),this.updatedOrientation={axis:a,angle:a.magnitude()}}else this.twisting&&(a=new Vector(new Point(this.startEvtCoordinates.x,this.startEvtCoordinates.y,0),new Point(b,a,0)),20<a.magnitude()&&(this.detectCycle(a),window.showSolveButton()))};
Puzzle.prototype.detectCycle=function(b){if(this.cycleMap[this.startSticker.id]){var a=0,c,d;this.cycleMap[this.startSticker.id].forEach(function(e){var f=new Point(e.unitVector.x,e.unitVector.y,e.unitVector.z);f.z=0;f=new Vector(f);f=b.cross(f);a<f.magnitude()&&(a=f.magnitude(),c=e,d=0<f.z?-1:1)});this.animateAndTwist(c,d);this.release()}};Puzzle.prototype.animateAndTwist=function(b,a){if(this.animationState.active)return!1;this.animationState={active:!0,counter:0,direction:a,cycle:b};return!0};
Puzzle.prototype.release=function(){this.twisting=this.rotating=!1;this.startEvtCoordinates={};this.updatedOrientation&&(this.saveOrientation(this.updatedOrientation),this.updatedOrientation=void 0);this.startSticker=void 0};Puzzle.prototype.saveOrientation=function(b){this.stickers.forEach(function(a){return a.points.forEach(function(a){return a.saveOrientation(b)})});this.cycles.forEach(function(a){return a.saveOrientation(b)})};
Puzzle.prototype.scramble=function(){for(var b=this,a=3*this.cycles.length,c=[],d=0;d<a;d++)c.push({cycle:this.cycles[Math.floor(Math.random()*this.cycles.length)],direction:.5>Math.random()?-1:1});var e=[];window.clearSolution();c.forEach(function(d,m){var f=d.cycle;d=d.direction;m&&f===c[m-1].cycle&&(d=c[m-1].direction);e.push({active:!0,counter:0,direction:d,cycle:f,callback:m<a-1?function(){return b.animationState=e[m+1]}:function(){b.startTime=(new Date).getTime();window.showSolveButton()}})});
this.animationState=e[0]};Puzzle.prototype.render=function(b,a,c){c=void 0===c?!0:c;if(this.animationState.active){var d=$jscomp.makeIterator(a?[this.stickers.length-1,-1,-1]:[0,this.stickers.length,1]),e=d.next().value,f=d.next().value;for(d=d.next().value;e!==f;e+=d)this.stickers[e].render(b,a,c)}else for(d=$jscomp.makeIterator(a?[this.faces.length-1,-1,-1]:[0,this.faces.length,1]),e=d.next().value,f=d.next().value,d=d.next().value;e!==f;e+=d)this.faces[e].render(b,a,c)};
var Cube=function(b,a){b=void 0===b?2:b;a=void 0===a?250:a;var c=a/b,d=a/2,e={steps:10,dAlpha:Math.PI/2/10},f={},m=[];a=[{slices:[{fIndex:1,sIndex:0,sJump:b,cJump:1},{fIndex:3,sIndex:b-1,sJump:-1,cJump:b},{fIndex:0,sIndex:(b-1)*b,sJump:-b,cJump:1},{fIndex:2,sIndex:0,sJump:1,cJump:b}],attachedFaces:{ffIndex:4,lfIndex:5,iStep:b,jStep:1},unitVector:new Vector(new Point(0,0,1))},{slices:[{fIndex:1,sIndex:0,sJump:1,cJump:b},{fIndex:5,sIndex:(b-1)*b,sJump:-b,cJump:1},{fIndex:0,sIndex:b-1,sJump:-1,cJump:b},
{fIndex:4,sIndex:0,sJump:b,cJump:1}],attachedFaces:{ffIndex:2,lfIndex:3,iStep:1,jStep:b},unitVector:new Vector(new Point(0,-1,0))},{slices:[{fIndex:2,sIndex:0,sJump:b,cJump:1},{fIndex:5,sIndex:0,sJump:1,cJump:b},{fIndex:3,sIndex:(b-1)*b,sJump:-b,cJump:1},{fIndex:4,sIndex:b-1,sJump:-1,cJump:b}],attachedFaces:{ffIndex:0,lfIndex:1,iStep:1,jStep:b},unitVector:new Vector(new Point(-1,0,0))}];var n=[{key:"iStep",dir:1},{key:"jStep",dir:1},{key:"iStep",dir:-1},{key:"jStep",dir:-1}],v,q,t,l,r,u;[{fixed:"x",
direction:-1,variable:["y","z"],color:"yellow"},{fixed:"x",direction:1,variable:["y","z"],color:"white"},{fixed:"y",direction:-1,variable:["z","x"],color:"blue"},{fixed:"y",direction:1,variable:["z","x"],color:"lawngreen"},{fixed:"z",direction:-1,variable:["x","y"],color:"red"},{fixed:"z",direction:1,variable:["x","y"],color:"darkorange"}].forEach(function(a,k){var h=[];v=-d;for(var e=0;e<=b;e++){q=-d;for(var g=0;g<=b;g++)l="p-"+k+"-"+e+"-"+g,t={},t[a.fixed]=a.direction*d,t[a.variable[0]]=v,t[a.variable[1]]=
q,f[l]=new Point(t.x,t.y,t.z,l),e&&g&&(r="s-"+k+"-"+e+"-"+g,u=[f["p-"+k+"-"+e+"-"+g].clone(),f["p-"+k+"-"+(e-1)+"-"+g].clone(),f["p-"+k+"-"+(e-1)+"-"+(g-1)].clone(),f["p-"+k+"-"+e+"-"+(g-1)].clone()],-1===a.direction&&u.reverse(),h.push(new Sticker(r,a.color,u))),q+=c;v+=c}m.push(new Face(h))});var g=[],k,h,x,y,p,w,z;a.forEach(function(a){for(var c={$jscomp$loop$prop$c$21:0};c.$jscomp$loop$prop$c$21<b;c={$jscomp$loop$prop$c$21:c.$jscomp$loop$prop$c$21},c.$jscomp$loop$prop$c$21++)k=new Cycle(g.length,
[],4,a.unitVector,e),h=[],a.slices.forEach(function(a){return function(c){for(var k=0;k<b;k++)x=c.sIndex+k*c.sJump+a.$jscomp$loop$prop$c$21*c.cJump,h.push(m[c.fIndex].stickers[x])}}(c)),k.stickerCollections.push(h),g.push(k);y=g[g.length-b];w=m[a.attachedFaces.ffIndex];for(c={$jscomp$loop$prop$c$5$23:0};c.$jscomp$loop$prop$c$5$23<Math.floor(b/2);c={$jscomp$loop$prop$c$5$23:c.$jscomp$loop$prop$c$5$23},c.$jscomp$loop$prop$c$5$23++)h=[],x=c.$jscomp$loop$prop$c$5$23*(b+1),n.forEach(function(c){return function(k){var d=
k.key;k=k.dir;for(var e=0;e<b-2*c.$jscomp$loop$prop$c$5$23-1;e++)h.push(w.stickers[x]),x+=a.attachedFaces[d]*k}}(c)),y.stickerCollections.push(h);p=g[g.length-1];z=m[a.attachedFaces.lfIndex];for(c={$jscomp$loop$prop$c$6$25:0};c.$jscomp$loop$prop$c$6$25<Math.floor(b/2);c={$jscomp$loop$prop$c$6$25:c.$jscomp$loop$prop$c$6$25},c.$jscomp$loop$prop$c$6$25++)h=[],x=c.$jscomp$loop$prop$c$6$25*(b+1),n.forEach(function(c){return function(k){var d=k.key;k=k.dir;for(var e=0;e<b-2*c.$jscomp$loop$prop$c$6$25-1;e++)h.push(z.stickers[x]),
x+=a.attachedFaces[d]*k}}(c)),p.stickerCollections.push(h);b%2&&(y.stickerCollections.push([w.stickers[(b*b-1)/2]]),p.stickerCollections.push([z.stickers[(b*b-1)/2]]))});g.forEach(function(b){b.stickerCollections[0].isPrimary=!0;b.computeStickerCover()});Puzzle.call(this,"Cube",b,m,g);this.saveOrientation({axis:new Vector({x:0,y:1,z:0}),angle:Math.PI/4});this.saveOrientation({axis:new Vector({x:1,y:0,z:0}),angle:Math.PI/8})};$jscomp.inherits(Cube,Puzzle);
var Tetrahedron=function(b,a){b=void 0===b?3:b;a=void 0===a?200:a;var c=a/Math.sqrt(2),d={steps:10,dAlpha:2*Math.PI/3/10},e={},f=[],m=[];c=[new Point(a,0,c),new Point(-a,0,c),new Point(0,a,-c),new Point(0,-a,-c)];a=[{points:[c[0],c[2],c[1]],color:"white"},{points:[c[0],c[1],c[3]],color:"blue"},{points:[c[0],c[3],c[2]],color:"lawngreen"},{points:[c[1],c[2],c[3]],color:"red"}];c=[{slices:[{fIndex:0,sIJ:function(b){return[b,0]},dIJ:function(){return[0,1]}},{fIndex:1,sIJ:function(b){return[b,0]},dIJ:function(){return[0,
1]}},{fIndex:2,sIJ:function(b){return[b,0]},dIJ:function(){return[0,1]}}],attachedFace:{fIndex:3,steps:[function(){return[1,2]},function(){return[0,-2]},function(){return[-1,0]}]},unitVector:(new Vector(c[0])).unit()},{slices:[{fIndex:0,sIJ:function(a){return[b-a-1,2*(b-a-1)]},dIJ:function(b,a){return[a%2?0:1,a%2?-1:1]}},{fIndex:3,sIJ:function(b){return[b,0]},dIJ:function(){return[0,1]}},{fIndex:1,sIJ:function(a){return[b-1,2*a]},dIJ:function(b,a){return[a%2?-1:0,-1]}}],attachedFace:{fIndex:2,steps:[function(){return[1,
2]},function(){return[0,-2]},function(){return[-1,0]}]},unitVector:(new Vector(c[1])).unit()},{slices:[{fIndex:0,sIJ:function(a){return[b-1,2*a]},dIJ:function(b,a){return[a%2?-1:0,-1]}},{fIndex:2,sIJ:function(a){return[b-a-1,2*(b-a-1)]},dIJ:function(b,a){return[a%2?0:1,a%2?-1:1]}},{fIndex:3,sIJ:function(a){return[b-1,2*a]},dIJ:function(b,a){return[a%2?-1:0,-1]}}],attachedFace:{fIndex:1,steps:[function(){return[1,2]},function(){return[0,-2]},function(){return[-1,0]}]},unitVector:(new Vector(c[2])).unit()},
{slices:[{fIndex:1,sIJ:function(a){return[b-a-1,2*(b-a-1)]},dIJ:function(b,a){return[a%2?0:1,a%2?-1:1]}},{fIndex:3,sIJ:function(a){return[b-a-1,2*(b-a-1)]},dIJ:function(b,a){return[a%2?0:1,a%2?-1:1]}},{fIndex:2,sIJ:function(a){return[b-1,2*a]},dIJ:function(b,a){return[a%2?-1:0,-1]}}],attachedFace:{fIndex:0,steps:[function(){return[1,2]},function(){return[0,-2]},function(){return[-1,0]}]},unitVector:(new Vector(c[3])).unit()}];a.forEach(function(a,c){for(var k=[],d=[a.points[0].clone()],g,p,w,l,m,
A=(new Vector(a.points[0],a.points[1])).multiply(1/b),n=(new Vector(a.points[1],a.points[2])).multiply(1/b),r,u={$jscomp$loop$prop$i$27:0};u.$jscomp$loop$prop$i$27<b;u={$jscomp$loop$prop$i$27:u.$jscomp$loop$prop$i$27},u.$jscomp$loop$prop$i$27++){g=[];r=A.add(d[0]);g.push(new Point(r.x,r.y,r.z));for(var q=0;q<=u.$jscomp$loop$prop$i$27;q++)r=n.add(r),g.push(new Point(r.x,r.y,r.z));d.forEach(function(b){return function(h,f){p=h.clone();w=g[f].clone();l=g[f+1].clone();p.id="p-"+c+"-"+b.$jscomp$loop$prop$i$27+
"-"+f;w.id="p-"+c+"-"+(b.$jscomp$loop$prop$i$27+1)+"-"+f;l.id="p-"+c+"-"+(b.$jscomp$loop$prop$i$27+1)+"-"+(f+1);p.clone();w.clone();l.clone();k.push(new Sticker("s-"+c+"-"+b.$jscomp$loop$prop$i$27+"-"+2*f,a.color,[p,w,l]));e[k[k.length-1].id]=k[k.length-1];f<d.length-1&&(p=p.clone(),l=l.clone(),m=d[f+1].clone(),m.id="q-"+c+"-"+b.$jscomp$loop$prop$i$27+"-"+(f+1),p.clone(),l.clone(),m.clone(),k.push(new Sticker("s-"+c+"-"+b.$jscomp$loop$prop$i$27+"-"+(2*f+1),a.color,[p,l,m])),e[k[k.length-1].id]=k[k.length-
1])}}(u));d=g}f.push(new Face(k))});var n,v,q,t,l,r,u;c.forEach(function(a){for(var c={$jscomp$loop$prop$c$29:0};c.$jscomp$loop$prop$c$29<b;c={$jscomp$loop$prop$c$29:c.$jscomp$loop$prop$c$29},c.$jscomp$loop$prop$c$29++)n=new Cycle(m.length,[],3,a.unitVector,d),q=[],a.slices.forEach(function(b){return function(a){var c=$jscomp.makeIterator(a.sIJ(b.$jscomp$loop$prop$c$29));t=c.next().value;l=c.next().value;for(c=0;c<1+2*b.$jscomp$loop$prop$c$29;c++){var k=$jscomp.makeIterator(a.dIJ(b.$jscomp$loop$prop$c$29,
c));r=k.next().value;u=k.next().value;q.push(e["s-"+a.fIndex+"-"+t+"-"+l]);t+=r;l+=u}}}(c)),n.stickerCollections.push(q),m.push(n);n=m[m.length-1];v=a.attachedFace.fIndex;var h=b-1;c=1;for(var f=0,g,p,w;0<h;)p=w=f,q=[],a.attachedFace.steps.forEach(function(b){for(var a=g=0;a<h;a++){var c=$jscomp.makeIterator(b(f,g)),k=c.next().value;c=c.next().value;q.push(e["s-"+v+"-"+p+"-"+w]);p+=k;w+=c;g+=1}}),n.stickerCollections.push(q),f+=1,h-=c,c=2===c?1:2;e["s-"+v+"-"+f+"-"+f]&&b%3&&n.stickerCollections.push([e["s-"+
v+"-"+f+"-"+f]])});m.forEach(function(b){b.stickerCollections[0].isPrimary=!0;b.computeStickerCover()});Puzzle.call(this,"Tetrahedron",b,f,m);this.saveOrientation({axis:new Vector({x:0,y:1,z:0}),angle:Math.PI/3})};$jscomp.inherits(Tetrahedron,Puzzle);
var Octahedron=function(b,a){b=void 0===b?2:b;a=void 0===a?200:a;var c={steps:10,dAlpha:2*Math.PI/3/10},d={},e=[],f=[];a=[new Point(0,0,-a),new Point(a,0,0),new Point(0,a,0),new Point(-a,0,0),new Point(0,-a,0),new Point(0,0,a)];a=[{points:[a[0],a[2],a[1]],color:"white"},{points:[a[0],a[1],a[4]],color:"blue"},{points:[a[0],a[4],a[3]],color:"lawngreen"},{points:[a[0],a[3],a[2]],color:"skyblue"},{points:[a[5],a[1],a[2]],color:"red"},{points:[a[5],a[2],a[3]],color:"darkorange"},{points:[a[5],a[3],a[4]],
color:"purple"},{points:[a[5],a[4],a[1]],color:"yellow"}];var m=[{slices:[{fIndex:4,sIJ:function(a){return[b-a-1,2*(b-a-1)]},dIJ:function(){return[0,-1]},limJ:function(a){return 1+2*(b-a-1)}},{fIndex:7,sIJ:function(a){return[b-a-1,2*(b-a-1)]},dIJ:function(b,a){return[a%2?0:1,a%2?-1:1]},limJ:function(b){return 1+2*b}},{fIndex:1,sIJ:function(a){return[b-1,2*a]},dIJ:function(b,a){return[a%2?-1:0,a%2?-1:1]},limJ:function(a){return 1+2*(b-a-1)}},{fIndex:2,sIJ:function(b){return[b,0]},dIJ:function(){return[0,
1]},limJ:function(b){return 1+2*b}},{fIndex:3,sIJ:function(b){return[b,0]},dIJ:function(b,a){return[a%2?0:1,1]},limJ:function(a){return 1+2*(b-a-1)}},{fIndex:5,sIJ:function(a){return[b-1,2*a]},dIJ:function(b,a){return[a%2?-1:0,-1]},limJ:function(b){return 1+2*b}}],attachedFaces:[{fIndex:0,steps:[function(){return[1,0]},function(){return[0,2]},function(){return[-1,-2]}]},{fIndex:6,steps:[function(){return[1,2]},function(){return[0,-2]},function(){return[-1,0]}]}],unitVector:(new Vector(new Point(1,
1,-1))).unit()},{slices:[{fIndex:0,sIJ:function(b){return[b,0]},dIJ:function(b,a){return[a%2?0:1,1]},limJ:function(a){return 1+2*(b-a-1)}},{fIndex:4,sIJ:function(a){return[b-1,2*a]},dIJ:function(b,a){return[a%2?-1:0,-1]},limJ:function(b){return 1+2*b}},{fIndex:7,sIJ:function(a){return[b-a-1,2*(b-a-1)]},dIJ:function(){return[0,-1]},limJ:function(a){return 1+2*(b-a-1)}},{fIndex:6,sIJ:function(a){return[b-a-1,2*(b-a-1)]},dIJ:function(b,a){return[a%2?0:1,a%2?-1:1]},limJ:function(b){return 1+2*b}},{fIndex:2,
sIJ:function(a){return[b-1,2*a]},dIJ:function(b,a){return[a%2?-1:0,a%2?-1:1]},limJ:function(a){return 1+2*(b-a-1)}},{fIndex:3,sIJ:function(b){return[b,0]},dIJ:function(){return[0,1]},limJ:function(b){return 1+2*b}}],attachedFaces:[{fIndex:1,steps:[function(){return[1,0]},function(){return[0,2]},function(){return[-1,-2]}]},{fIndex:5,steps:[function(){return[1,2]},function(){return[0,-2]},function(){return[-1,0]}]}],unitVector:(new Vector(new Point(1,-1,-1))).unit()},{slices:[{fIndex:1,sIJ:function(b){return[b,
0]},dIJ:function(b,a){return[a%2?0:1,1]},limJ:function(a){return 1+2*(b-a-1)}},{fIndex:7,sIJ:function(a){return[b-1,2*a]},dIJ:function(b,a){return[a%2?-1:0,-1]},limJ:function(b){return 1+2*b}},{fIndex:6,sIJ:function(a){return[b-a-1,2*(b-a-1)]},dIJ:function(){return[0,-1]},limJ:function(a){return 1+2*(b-a-1)}},{fIndex:5,sIJ:function(a){return[b-a-1,2*(b-a-1)]},dIJ:function(b,a){return[a%2?0:1,a%2?-1:1]},limJ:function(b){return 1+2*b}},{fIndex:3,sIJ:function(a){return[b-1,2*a]},dIJ:function(b,a){return[a%
2?-1:0,a%2?-1:1]},limJ:function(a){return 1+2*(b-a-1)}},{fIndex:0,sIJ:function(b){return[b,0]},dIJ:function(){return[0,1]},limJ:function(b){return 1+2*b}}],attachedFaces:[{fIndex:2,steps:[function(){return[1,0]},function(){return[0,2]},function(){return[-1,-2]}]},{fIndex:4,steps:[function(){return[1,2]},function(){return[0,-2]},function(){return[-1,0]}]}],unitVector:(new Vector(new Point(-1,-1,-1))).unit()},{slices:[{fIndex:2,sIJ:function(b){return[b,0]},dIJ:function(b,a){return[a%2?0:1,1]},limJ:function(a){return 1+
2*(b-a-1)}},{fIndex:6,sIJ:function(a){return[b-1,2*a]},dIJ:function(b,a){return[a%2?-1:0,-1]},limJ:function(b){return 1+2*b}},{fIndex:5,sIJ:function(a){return[b-a-1,2*(b-a-1)]},dIJ:function(){return[0,-1]},limJ:function(a){return 1+2*(b-a-1)}},{fIndex:4,sIJ:function(a){return[b-a-1,2*(b-a-1)]},dIJ:function(b,a){return[a%2?0:1,a%2?-1:1]},limJ:function(b){return 1+2*b}},{fIndex:0,sIJ:function(a){return[b-1,2*a]},dIJ:function(b,a){return[a%2?-1:0,a%2?-1:1]},limJ:function(a){return 1+2*(b-a-1)}},{fIndex:1,
sIJ:function(b){return[b,0]},dIJ:function(){return[0,1]},limJ:function(b){return 1+2*b}}],attachedFaces:[{fIndex:3,steps:[function(){return[1,0]},function(){return[0,2]},function(){return[-1,-2]}]},{fIndex:7,steps:[function(){return[1,2]},function(){return[0,-2]},function(){return[-1,0]}]}],unitVector:(new Vector(new Point(-1,1,-1))).unit()}];a.forEach(function(a,c){for(var f=[],h=[a.points[0].clone()],g,k,l,m,r,u=(new Vector(a.points[0],a.points[1])).multiply(1/b),n=(new Vector(a.points[1],a.points[2])).multiply(1/
b),q,t={$jscomp$loop$prop$i$31:0};t.$jscomp$loop$prop$i$31<b;t={$jscomp$loop$prop$i$31:t.$jscomp$loop$prop$i$31},t.$jscomp$loop$prop$i$31++){g=[];q=u.add(h[0]);g.push(new Point(q.x,q.y,q.z));for(var v=0;v<=t.$jscomp$loop$prop$i$31;v++)q=n.add(q),g.push(new Point(q.x,q.y,q.z));h.forEach(function(b){return function(e,p){k=e.clone();l=g[p].clone();m=g[p+1].clone();k.id="p-"+c+"-"+b.$jscomp$loop$prop$i$31+"-"+p;l.id="p-"+c+"-"+(b.$jscomp$loop$prop$i$31+1)+"-"+p;m.id="p-"+c+"-"+(b.$jscomp$loop$prop$i$31+
1)+"-"+(p+1);k.clone();l.clone();m.clone();f.push(new Sticker("s-"+c+"-"+b.$jscomp$loop$prop$i$31+"-"+2*p,a.color,[k,l,m]));d[f[f.length-1].id]=f[f.length-1];p<h.length-1&&(k=k.clone(),m=m.clone(),r=h[p+1].clone(),r.id="q-"+c+"-"+b.$jscomp$loop$prop$i$31+"-"+(p+1),k.clone(),m.clone(),r.clone(),f.push(new Sticker("s-"+c+"-"+b.$jscomp$loop$prop$i$31+"-"+(2*p+1),a.color,[k,m,r])),d[f[f.length-1].id]=f[f.length-1])}}(t));h=g}e.push(new Face(f))});var n,v,q,t,l,r,u,g;m.forEach(function(a){for(var e={$jscomp$loop$prop$c$33:0};e.$jscomp$loop$prop$c$33<
b;e={$jscomp$loop$prop$c$33:e.$jscomp$loop$prop$c$33},e.$jscomp$loop$prop$c$33++)n=new Cycle(f.length,[],3,a.unitVector,c),q=[],a.slices.forEach(function(b){return function(a){var c=$jscomp.makeIterator(a.sIJ(b.$jscomp$loop$prop$c$33));t=c.next().value;l=c.next().value;g=a.limJ(b.$jscomp$loop$prop$c$33);for(c=0;c<g;c++){var e=$jscomp.makeIterator(a.dIJ(b.$jscomp$loop$prop$c$33,c));r=e.next().value;u=e.next().value;q.push(d["s-"+a.fIndex+"-"+t+"-"+l]);t+=r;l+=u}}}(e)),n.stickerCollections.push(q),
f.push(n);a.attachedFaces.forEach(function(a,c){n=c?f[f.length-1]:f[f.length-b];v=a.fIndex;var e=b-1;c=1;for(var g=0,h,k,l;0<e;)k=l=g,q=[],a.steps.forEach(function(b){for(var a=h=0;a<e;a++){var c=$jscomp.makeIterator(b(g,h)),f=c.next().value;c=c.next().value;q.push(d["s-"+v+"-"+k+"-"+l]);k+=f;l+=c;h+=1}}),n.stickerCollections.push(q),g+=1,e-=c,c=2===c?1:2;d["s-"+v+"-"+g+"-"+g]&&n.stickerCollections.push([d["s-"+v+"-"+g+"-"+g]])})});f.forEach(function(b){b.stickerCollections[0].isPrimary=!0;b.computeStickerCover()});
Puzzle.call(this,"Octahedron",b,e,f);this.saveOrientation({axis:new Vector({x:0,y:1,z:0}),angle:Math.PI/12});this.saveOrientation({axis:new Vector({x:1,y:0,z:0}),angle:Math.PI/24})};$jscomp.inherits(Octahedron,Puzzle);
var Dodecahedron=function(b,a){b=void 0===b?1:b;var c=(1+Math.sqrt(5))/2;a=(void 0===a?200:a)/2;var d=a*c;c=1*a/c;var e=[],f=[],m={},n={},v={steps:10,dAlpha:2*Math.PI/5/10};c=[new Point(a,a,a,"r0"),new Point(a,a,-a,"r1"),new Point(a,-a,a,"r2"),new Point(a,-a,-a,"r3"),new Point(-a,a,a,"r4"),new Point(-a,a,-a,"r5"),new Point(-a,-a,a,"r6"),new Point(-a,-a,-a,"r7"),new Point(d,c,0,"r8"),new Point(d,-c,0,"r9"),new Point(-d,c,0,"r10"),new Point(-d,-c,0,"r11"),new Point(0,d,c,"r12"),new Point(0,d,-c,"r13"),
new Point(0,-d,c,"r14"),new Point(0,-d,-c,"r15"),new Point(c,0,d,"r16"),new Point(c,0,-d,"r17"),new Point(-c,0,d,"r18"),new Point(-c,0,-d,"r19")];var q=[{points:[c[8],c[1],c[13],c[12],c[0]],color:"purple"},{points:[c[9],c[2],c[14],c[15],c[3]],color:"magenta"},{points:[c[10],c[4],c[12],c[13],c[5]],color:"white"},{points:[c[11],c[7],c[15],c[14],c[6]],color:"yellow"},{points:[c[12],c[4],c[18],c[16],c[0]],color:"pink"},{points:[c[13],c[1],c[17],c[19],c[5]],color:"blue"},{points:[c[14],c[2],c[16],c[18],
c[6]],color:"green"},{points:[c[15],c[7],c[19],c[17],c[3]],color:"crimson"},{points:[c[16],c[2],c[9],c[8],c[0]],color:"red"},{points:[c[17],c[1],c[8],c[9],c[3]],color:"lawngreen"},{points:[c[18],c[4],c[10],c[11],c[6]],color:"brown"},{points:[c[19],c[7],c[11],c[10],c[5]],color:"skyblue"}];c=function(b){return q[b].points.reduce(function(b,a){return b.add(a)},new Vector({x:0,y:0,z:0}))};a=[];for(d=0;12>d;d++){var t={unitVector:c(d),slices:{length:5}},l=void 0,r=void 0,u=void 0;for(l=0;12>l;l++)if(l!=
d)for(var g=0;5>g;g++)for(var k=0;5>k;k++)q[d].points[g].id===q[l].points[k].id&&q[d].points[mod(g+1,5)].id===q[l].points[mod(k-1,5)].id&&(r=k,u=mod(k-1,5),t.slices[g]={face:l,startV:r,endV:u});t.slices=Array.prototype.slice.apply(t.slices);a.push(t)}q.forEach(function(a,c){var d=[];a.points.forEach(function(e,f){var g=new Vector(e),k=(new Vector(e,a.points[mod(f+1,a.points.length)])).multiply(1/(2*b));e=(new Vector(e,a.points[mod(f-1,a.points.length)])).multiply(1/(2*b));var h,l;for(h=0;h<=b;h++)for(l=
0;l<=b;l++){var p=g.add(k.multiply(h)).add(e.multiply(l));m["p-"+c+"-"+f+"-"+h+"-"+l]=new Point(p.x,p.y,p.z);h&&l&&(d.push(new Sticker("s-"+c+"-"+f+"-"+(h-1)+"-"+(l-1),a.color,[m["p-"+c+"-"+f+"-"+h+"-"+l].clone(),m["p-"+c+"-"+f+"-"+(h-1)+"-"+l].clone(),m["p-"+c+"-"+f+"-"+(h-1)+"-"+(l-1)].clone(),m["p-"+c+"-"+f+"-"+h+"-"+(l-1)].clone()])),n[d[d.length-1].id]=d[d.length-1])}p=(new Vector(a.points[mod(f,a.points.length)],a.points[mod(f-1,a.points.length)])).multiply(1/(2*b));l=(new Vector(a.points[mod(f+
1,a.points.length)],a.points[mod(f+2,a.points.length)])).multiply(1/(2*b));var r=g.add(k.multiply(b));for(h=0;h<=b;h++){var u=r.add(p.multiply(h));var q=r.add(l.multiply(h));m["p-m-"+c+"-"+f+"-"+h+"-l"]=new Point(u.x,u.y,u.z);m["p-m-"+c+"-"+f+"-"+h+"-r"]=new Point(q.x,q.y,q.z);h&&(d.push(new Sticker("s-"+c+"-"+f+"-"+(h-1)+"-"+b,a.color,[m["p-m-"+c+"-"+f+"-"+h+"-l"].clone(),m["p-m-"+c+"-"+f+"-"+h+"-r"].clone(),m["p-m-"+c+"-"+f+"-"+(h-1)+"-r"].clone(),m["p-m-"+c+"-"+f+"-"+(h-1)+"-l"].clone()])),n[d[d.length-
1].id]=d[d.length-1])}g=g.add(k.multiply(b)).add(e.multiply(b));m["p-"+c+"-"+f]=new Point(g.x,g.y,g.z)});d.push(new Sticker("s-"+c,a.color,[m["p-"+c+"-0"].clone(),m["p-"+c+"-1"].clone(),m["p-"+c+"-2"].clone(),m["p-"+c+"-3"].clone(),m["p-"+c+"-4"].clone()]));n[d[d.length-1].id]=d[d.length-1];e.push(new Face(d))});a.forEach(function(a,c){for(var d,e={$jscomp$loop$prop$i$40:0};e.$jscomp$loop$prop$i$40<b;e={$jscomp$loop$prop$i$40:e.$jscomp$loop$prop$i$40,$jscomp$loop$prop$stickerCollection$8$39:e.$jscomp$loop$prop$stickerCollection$8$39},
e.$jscomp$loop$prop$i$40++){for(var g=new Cycle(f.length,[],5,a.unitVector,v),h={$jscomp$loop$prop$j$38:0};h.$jscomp$loop$prop$j$38<b;h={$jscomp$loop$prop$stickerCollection$35:h.$jscomp$loop$prop$stickerCollection$35,$jscomp$loop$prop$j$38:h.$jscomp$loop$prop$j$38},h.$jscomp$loop$prop$j$38++)h.$jscomp$loop$prop$stickerCollection$35=[],a.slices.forEach(function(a,b){return function(c){a.$jscomp$loop$prop$stickerCollection$35.push(n["s-"+c.face+"-"+c.startV+"-"+b.$jscomp$loop$prop$i$40+"-"+a.$jscomp$loop$prop$j$38]);
a.$jscomp$loop$prop$stickerCollection$35.push(n["s-"+c.face+"-"+c.endV+"-"+a.$jscomp$loop$prop$j$38+"-"+b.$jscomp$loop$prop$i$40])}}(h,e)),g.stickerCollections.push(h.$jscomp$loop$prop$stickerCollection$35);e.$jscomp$loop$prop$stickerCollection$8$39=[];a.slices.forEach(function(a){return function(c){a.$jscomp$loop$prop$stickerCollection$8$39.push(n["s-"+c.face+"-"+c.endV+"-"+a.$jscomp$loop$prop$i$40+"-"+b])}}(e));g.stickerCollections.push(e.$jscomp$loop$prop$stickerCollection$8$39);g.stickerCollections.forEach(function(a){return a.isPrimary=
!0});f.push(g);e.$jscomp$loop$prop$i$40||(d=g)}for(a=0;a<b;a++)for(e=0;e<=b;e++){g=[];for(h=0;5>h;h++)g.push(n["s-"+c+"-"+h+"-"+a+"-"+e]);d.stickerCollections.push(g)}d.stickerCollections.push([n["s-"+c]])});f.forEach(function(a){return a.computeStickerCover()});Puzzle.call(this,"Dodecahedron",b<<1,e,f);this.saveOrientation({axis:new Vector({x:1,y:0,z:0}),angle:-Math.PI/5})};$jscomp.inherits(Dodecahedron,Puzzle);
var Icosahedron=function(b,a){b=void 0===b?2:b;var c={},d={},e=[],f=[],m={steps:10,dAlpha:2*Math.PI/5/10};a=(void 0===a?200:a)/2;var n=a*(1+Math.sqrt(5))/2;a=[new Point(0,n,a,"r0"),new Point(0,n,-a,"r1"),new Point(0,-n,a,"r2"),new Point(0,-n,-a,"r3"),new Point(n,a,0,"r4"),new Point(n,-a,0,"r5"),new Point(-n,a,0,"r6"),new Point(-n,-a,0,"r7"),new Point(a,0,n,"r8"),new Point(-a,0,n,"r9"),new Point(a,0,-n,"r10"),new Point(-a,0,-n,"r11")];var v=[{points:[a[0],a[4],a[1]],color:"white"},{points:[a[0],a[1],
a[6]],color:"blue"},{points:[a[0],a[6],a[9]],color:"red"},{points:[a[0],a[9],a[8]],color:"lawngreen"},{points:[a[0],a[8],a[4]],color:"skyblue"},{points:[a[3],a[2],a[7]],color:"orange"},{points:[a[3],a[5],a[2]],color:"darkolivegreen"},{points:[a[3],a[10],a[5]],color:"yellow"},{points:[a[3],a[11],a[10]],color:"lightgreen"},{points:[a[3],a[7],a[11]],color:"salmon"},{points:[a[4],a[5],a[10]],color:"magenta"},{points:[a[1],a[10],a[11]],color:"crimson"},{points:[a[6],a[11],a[7]],color:"indigo"},{points:[a[9],
a[7],a[2]],color:"brown"},{points:[a[8],a[2],a[5]],color:"darkblue"},{points:[a[2],a[8],a[9]],color:"pink"},{points:[a[5],a[4],a[8]],color:"burlywood"},{points:[a[10],a[1],a[4]],color:"darkcyan"},{points:[a[11],a[6],a[1]],color:"darkmagenta"},{points:[a[7],a[9],a[6]],color:"goldenrod"}];v.forEach(function(a,b){return a.id=b});var q={},t=[];a.forEach(function(a){var b=a.id;a={root:a,faces:[]};var c=v.find(function(a){return a.points.find(function(a){return a.id===b})});a.faces.push(c);[].push(c.points[mod(c.points.findIndex(function(a){return a.id===
b})+2,3)].id);for(var d={},e=0;4>e;d={$jscomp$loop$prop$p1id$42:d.$jscomp$loop$prop$p1id$42,$jscomp$loop$prop$p0id$43:d.$jscomp$loop$prop$p0id$43,$jscomp$loop$prop$p2id$44:d.$jscomp$loop$prop$p2id$44},e++)d.$jscomp$loop$prop$p0id$43=b,d.$jscomp$loop$prop$p1id$42=c.points[mod(c.points.findIndex(function(a){return a.id===b})+1,3)].id,d.$jscomp$loop$prop$p2id$44=c.points[mod(c.points.findIndex(function(a){return a.id===b})+2,3)].id,c=v.find(function(a){return function(b){b=b.points;return!b.find(function(b){return b.id===
a.$jscomp$loop$prop$p1id$42})&&b.find(function(b){return b.id===a.$jscomp$loop$prop$p0id$43})&&b.find(function(b){return b.id===a.$jscomp$loop$prop$p2id$44})}}(d)),a.faces.push(c);t.push(a)});v.forEach(function(a,f){var l=a.points;a=a.color;var g=[],k=new Vector(l[0]),h=(new Vector(l[0],l[1])).multiply(1/b),m=(new Vector(l[1],l[2])).multiply(1/b),n,p;for(n=0;n<=b;n++)for(p=0;p<=n;p++){var r=k.add(h.multiply(n)).add(m.multiply(p));c["p-"+f+"-"+n+"-"+p]=new Point(r.x,r.y,r.z);n&&p&&(g.push(new Sticker("s-"+
f+"-"+n+"-"+p,a,[c["p-"+f+"-"+(n-1)+"-"+(p-1)].clone(),c["p-"+f+"-"+n+"-"+(p-1)].clone(),c["p-"+f+"-"+n+"-"+p].clone()])),d[g[g.length-1].id]=g[g.length-1],p<n&&(g.push(new Sticker("s-"+f+"-"+n+"-"+p+"-r",a,[c["p-"+f+"-"+n+"-"+p].clone(),c["p-"+f+"-"+(n-1)+"-"+p].clone(),c["p-"+f+"-"+(n-1)+"-"+(p-1)].clone()])),d[g[g.length-1].id]=g[g.length-1]))}e.push(new Face(g));a={};a[l[0].id]=[];for(g=1;g<=b;g++){k=[];for(h=1;h<=g;h++)k.push(d["s-"+f+"-"+g+"-"+h]),h<g&&k.push(d["s-"+f+"-"+g+"-"+h+"-r"]);a[l[0].id].push(k)}a[l[1].id]=
[];for(g=1;g<=b;g++){k=[];for(h=1;h<=g;h++)k.push(d["s-"+f+"-"+(b-(h-1))+"-"+(g-(h-1))]),h<g&&k.push(d["s-"+f+"-"+(b-(h-1))+"-"+(g-h)+"-r"]);a[l[1].id].push(k)}a[l[2].id]=[];for(g=1;g<=b;g++){k=[];for(h=1;h<=g;h++)k.push(d["s-"+f+"-"+(b+(h-1)-(g-1))+"-"+(b-(g-1))]),h<g&&k.push(d["s-"+f+"-"+(b+1+(h-1)-(g-1))+"-"+(b-(g-1))+"-r"]);a[l[2].id].push(k)}q[f]=a});t.forEach(function(a){var c=a.faces,d=a.root;for(a={$jscomp$loop$prop$c$46:0};a.$jscomp$loop$prop$c$46<b;a={$jscomp$loop$prop$c$46:a.$jscomp$loop$prop$c$46},
a.$jscomp$loop$prop$c$46++){var e=(new Vector(d)).unit(),k=[Array.prototype.concat.apply([],c.map(function(a){return function(b){return q[b.id][d.id][a.$jscomp$loop$prop$c$46]}}(a)))];f.push(new Cycle(f.length,k,5,e,m))}});f.forEach(function(a){a.stickerCollections[0].isPrimary=!0;a.computeStickerCover()});Puzzle.call(this,"Icosahedron",b,e,f);this.saveOrientation({axis:new Vector({x:1,y:0,z:0}),angle:-27*Math.PI/40})};$jscomp.inherits(Icosahedron,Puzzle);
(function(){window.menuConfig={puzzles:{tetrahedron:function(a,b){return new Tetrahedron(a,b?42.5:void 0)},cube:function(a,b){return new Cube(a,b?50:void 0)},octahedron:function(a,b){return new Octahedron(a,b?42.5:void 0)},dodecahedron:function(a,b){return new Dodecahedron(a,b?42.5:void 0)},icosahedron:function(a,b){return new Icosahedron(a,b?42.5:void 0)}},sizes:{tetrahedron:[3,4,5],cube:[2,3,4],octahedron:[2,3,4],dodecahedron:[1,2,3],icosahedron:[2,3,4]}};var b=0;window.showShapeMenu=function(){b++;
window.puzzlemenu.style.display=window.shapemenu.style.display=window.settingsmenubutton.style.display="inline-block";window.configurationmenu.style.display=window.puzzlemenubutton.style.display=window.sizemenu.style.display="none";var a=b,c={},d;for(d in window.menuConfig.puzzles)c.$jscomp$loop$prop$elemId$51=d,c.$jscomp$loop$prop$ctx$48=window[c.$jscomp$loop$prop$elemId$51].getContext("2d"),c.$jscomp$loop$prop$puzzle$49=(0,window.menuConfig.puzzles[c.$jscomp$loop$prop$elemId$51])(void 0,!0),c.$jscomp$loop$prop$puzzle$49.updatedOrientation=
{axis:new Vector({x:1,y:1,z:0}),angle:0},c.$jscomp$loop$prop$ctx$48.setTransform(1,0,0,1,0,0),c.$jscomp$loop$prop$ctx$48.translate(50,50),c.$jscomp$loop$prop$loop$50=function(c){return function(){c.$jscomp$loop$prop$ctx$48.save();c.$jscomp$loop$prop$ctx$48.setTransform(1,0,0,1,0,0);c.$jscomp$loop$prop$ctx$48.clearRect(0,0,gameCanvas.width,gameCanvas.height);c.$jscomp$loop$prop$ctx$48.restore();c.$jscomp$loop$prop$puzzle$49.updatedOrientation.angle+=.015;c.$jscomp$loop$prop$puzzle$49.update();c.$jscomp$loop$prop$puzzle$49.render(c.$jscomp$loop$prop$ctx$48);
b===a&&requestAnimationFrame(c.$jscomp$loop$prop$loop$50)}}(c),requestAnimationFrame(c.$jscomp$loop$prop$loop$50),window[c.$jscomp$loop$prop$elemId$51].onmousedown=function(a){return function(){return showSizeMenu(a.$jscomp$loop$prop$elemId$51)}}(c),c={$jscomp$loop$prop$ctx$48:c.$jscomp$loop$prop$ctx$48,$jscomp$loop$prop$puzzle$49:c.$jscomp$loop$prop$puzzle$49,$jscomp$loop$prop$loop$50:c.$jscomp$loop$prop$loop$50,$jscomp$loop$prop$elemId$51:c.$jscomp$loop$prop$elemId$51}};window.showSizeMenu=function(a){b++;
var c=b;window.shapemenu.style.display=window.settingsmenubutton.style.display="none";window.sizemenu.style.display=window.puzzlemenubutton.style.display="inline-block";for(var d={},e=0;3>e;d={$jscomp$loop$prop$ctx$53:d.$jscomp$loop$prop$ctx$53,$jscomp$loop$prop$puzzle$54:d.$jscomp$loop$prop$puzzle$54,$jscomp$loop$prop$loop$55:d.$jscomp$loop$prop$loop$55,$jscomp$loop$prop$constructor$56:d.$jscomp$loop$prop$constructor$56,$jscomp$loop$prop$puzzleSize$57:d.$jscomp$loop$prop$puzzleSize$57},e++)d.$jscomp$loop$prop$ctx$53=
window["size-"+(e+1)].getContext("2d"),d.$jscomp$loop$prop$constructor$56=window.menuConfig.puzzles[a],d.$jscomp$loop$prop$puzzleSize$57=window.menuConfig.sizes[a][e],d.$jscomp$loop$prop$puzzle$54=d.$jscomp$loop$prop$constructor$56(d.$jscomp$loop$prop$puzzleSize$57,!0),d.$jscomp$loop$prop$puzzle$54.updatedOrientation={axis:new Vector({x:1,y:1,z:0}),angle:0},d.$jscomp$loop$prop$ctx$53.setTransform(1,0,0,1,0,0),d.$jscomp$loop$prop$ctx$53.translate(50,50),d.$jscomp$loop$prop$loop$55=function(a){return function(){a.$jscomp$loop$prop$ctx$53.save();
a.$jscomp$loop$prop$ctx$53.setTransform(1,0,0,1,0,0);a.$jscomp$loop$prop$ctx$53.clearRect(0,0,gameCanvas.width,gameCanvas.height);a.$jscomp$loop$prop$ctx$53.restore();a.$jscomp$loop$prop$puzzle$54.updatedOrientation.angle+=.015;a.$jscomp$loop$prop$puzzle$54.update();a.$jscomp$loop$prop$puzzle$54.render(a.$jscomp$loop$prop$ctx$53);b===c&&requestAnimationFrame(a.$jscomp$loop$prop$loop$55)}}(d),requestAnimationFrame(d.$jscomp$loop$prop$loop$55),window["size-"+(e+1)].onmousedown=function(a){return function(){window.clearSolution();
window.selectedPuzzle=a.$jscomp$loop$prop$constructor$56(a.$jscomp$loop$prop$puzzleSize$57,!1);window.startbutton.style.visibility="visible"}}(d)};window.showSettingsMenu=function(){window.puzzlemenu.style.display=window.settingsmenubutton.style.display="none";window.configurationmenu.style.display=window.puzzlemenubutton.style.display="inline-block"};window.showShapeMenu()})();
(function(){var b=gameCanvas.getContext("2d"),a=gameCanvasInverted.getContext("2d");b.translate(300,300);a.scale(1/3,1/3);a.translate(300,300);var c=function(){var a=gameCanvas.getBoundingClientRect();return{x:a.left+300,y:a.top+300}};window.explodedStickers=!0;window.selectedPuzzle=new Tetrahedron;Puzzle.prototype.onFinish=function(a){window.help.style.display="none";window.menu.style.display="none";window.startbutton.style.visibility="visible";window.success.style.display="inline-block";window.message.innerHTML=
"You solved it in "+a+" seconds.<br/> Good Job."};var d=function(){b.save();b.setTransform(1,0,0,1,0,0);b.clearRect(0,0,gameCanvas.width,gameCanvas.height);b.restore();window.selectedPuzzle.update();window.selectedPuzzle.render(b,!1,window.explodedStickers);window.showRearView&&(a.save(),a.setTransform(1,0,0,1,0,0),a.clearRect(0,0,gameCanvas.width,gameCanvas.height),a.restore(),window.selectedPuzzle.render(a,!0,window.explodedStickers));if(window.selectedPuzzle.startTime){var c=Math.floor(((new Date).getTime()-
window.selectedPuzzle.startTime)/1E3),f=""+Math.floor(c/60);c=""+c%60;2>f.length&&(f="0"+f);2>c.length&&(c="0"+c);window.stats.innerHTML="Time Taken: "+f+":"+c+", Moves Made: "+window.selectedPuzzle.movesMade}else window.stats.innerHTML="Time Taken: --:--, Moves Made: --";requestAnimationFrame(d)};requestAnimationFrame(d);document.addEventListener("contextmenu",function(a){return a.preventDefault()});gameCanvas.addEventListener("mousedown",function(a){a.preventDefault();a.stopPropagation();var b=
c();window.selectedPuzzle.grab(a.clientX-b.x,a.clientY-b.y,a.ctrlKey?2:a.button)});gameCanvas.addEventListener("mousemove",function(a){a.preventDefault();a.stopPropagation();var b=c();window.selectedPuzzle.drag(a.clientX-b.x,a.clientY-b.y)});gameCanvas.addEventListener("mouseup",function(a){a.preventDefault();a.stopPropagation();window.selectedPuzzle.release()});gameCanvas.addEventListener("mouseleave",function(a){window.selectedPuzzle.release()})})();
(function(){var b=window.solutionStack={movesMade:[],movesToMake:[]};window.updateSolutionPanel=function(){var a=b.movesToMake.length?b.movesToMake[b.movesToMake.length-1].subSequence:"";window.solutioninfo.innerHTML="\n            "+(b.movesToMake.length?b.movesToMake[b.movesToMake.length-1].sequence:"Solved!")+"\n            <br/>\n            "+(a?a+"<br/>":"")+"\n            "+b.movesMade.length+"/"+(b.movesMade.length+b.movesToMake.length)+"\n        "};window.clearSolution=function(){window.solutionpanel.style.display=
"none"};window.showSolveButton=function(){window.solvebutton.style.display="inline-block";window.clearSolution()};var a=!1;window.solverWorker=new Worker("src/solver-worker.js");window.generateSolution=function(){a||(a=!0,window.selectedPuzzle.clearStats(),window.solverWorker.postMessage(window.selectedPuzzle),window.solvebutton.style.display="none",window.solvebutton.style.color="grey",window.solvebutton.style.borderColor="grey",window.solverstatus.style.display="block",window.solverstatustext.innerHTML=
"Initializing solver for "+window.selectedPuzzle.displayName+" of size "+window.selectedPuzzle.displaySize+"\n            <br/>(This may take minutes for large puzzles)\n            ")};window.solverWorker.onmessage=function(b){"INITIALIZED"===b.data.status&&(window.solverstatustext.innerText="Solving "+window.selectedPuzzle.displayName+" of size "+window.selectedPuzzle.displaySize);"SOLVED"===b.data.status&&(window.solutionStack.movesMade=[],window.solutionStack.movesToMake=b.data.solution.reverse(),
updateSolutionPanel(),window.solvebutton.style.color="skyblue",window.solvebutton.style.borderColor="skyblue",window.solverstatus.style.display="none",window.solutionpanel.style.display="block",a=!1)};window.makeSolverMove=function(){if(b.movesToMake.length){var a=b.movesToMake.pop();window.selectedPuzzle.animateAndTwist(window.selectedPuzzle.cycles[a.cycleIndex],a.direction>a.period>>1?a.direction-a.period:a.direction)?(b.movesMade.push(a),updateSolutionPanel()):b.movesToMake.push(a)}};window.revertSolverMove=
function(){if(b.movesMade.length){var a=b.movesMade.pop();window.selectedPuzzle.animateAndTwist(window.selectedPuzzle.cycles[a.cycleIndex],-(a.direction>a.period>>1?a.direction-a.period:a.direction))?(b.movesToMake.push(a),updateSolutionPanel()):b.movesMade.push(a)}};window.makeSolverMoveSequence=function(){if(b.movesToMake.length){for(var a=b.movesToMake[b.movesToMake.length-1].sequence;b.movesToMake.length&&b.movesToMake[b.movesToMake.length-1].sequence===a;){var d=b.movesToMake.pop();window.selectedPuzzle.cycles[d.cycleIndex].twist(d.direction);
b.movesMade.push(d)}updateSolutionPanel()}};window.revertSolverMoveSequence=function(){if(b.movesMade.length){for(var a=b.movesMade[b.movesMade.length-1].sequence;b.movesMade.length&&b.movesMade[b.movesMade.length-1].sequence===a;){var d=b.movesMade.pop();window.selectedPuzzle.cycles[d.cycleIndex].twist(-d.direction);b.movesToMake.push(d)}updateSolutionPanel()}};window.makeAllSolverMoves=function(){for(;b.movesToMake.length;){var a=b.movesToMake.pop();window.selectedPuzzle.cycles[a.cycleIndex].twist(a.direction);
b.movesMade.push(a)}updateSolutionPanel()};window.revertAllSolverMoves=function(){for(;b.movesMade.length;){var a=b.movesMade.pop();window.selectedPuzzle.cycles[a.cycleIndex].twist(-a.direction);b.movesToMake.push(a)}updateSolutionPanel()}})();
