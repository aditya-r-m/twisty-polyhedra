var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.createTemplateTagFirstArg=function(a){return a.raw=a};$jscomp.createTemplateTagFirstArgWithRaw=function(a,b){a.raw=b;return a};$jscomp.arrayIteratorImpl=function(a){var b=0;return function(){return b<a.length?{done:!1,value:a[b++]}:{done:!0}}};$jscomp.arrayIterator=function(a){return{next:$jscomp.arrayIteratorImpl(a)}};$jscomp.makeIterator=function(a){var b="undefined"!=typeof Symbol&&Symbol.iterator&&a[Symbol.iterator];return b?b.call(a):$jscomp.arrayIterator(a)};
$jscomp.arrayFromIterator=function(a){for(var b,c=[];!(b=a.next()).done;)c.push(b.value);return c};$jscomp.arrayFromIterable=function(a){return a instanceof Array?a:$jscomp.arrayFromIterator($jscomp.makeIterator(a))};$jscomp.ASSUME_ES5=!1;$jscomp.ASSUME_NO_NATIVE_MAP=!1;$jscomp.ASSUME_NO_NATIVE_SET=!1;$jscomp.SIMPLE_FROUND_POLYFILL=!1;$jscomp.ISOLATE_POLYFILLS=!1;$jscomp.FORCE_POLYFILL_PROMISE=!1;$jscomp.FORCE_POLYFILL_PROMISE_WHEN_NO_UNHANDLED_REJECTION=!1;
$jscomp.objectCreate=$jscomp.ASSUME_ES5||"function"==typeof Object.create?Object.create:function(a){var b=function(){};b.prototype=a;return new b};$jscomp.defineProperty=$jscomp.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(a,b,c){if(a==Array.prototype||a==Object.prototype)return a;a[b]=c.value;return a};
$jscomp.getGlobal=function(a){a=["object"==typeof globalThis&&globalThis,a,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof global&&global];for(var b=0;b<a.length;++b){var c=a[b];if(c&&c.Math==Math)return c}throw Error("Cannot find global object");};$jscomp.global=$jscomp.getGlobal(this);$jscomp.IS_SYMBOL_NATIVE="function"===typeof Symbol&&"symbol"===typeof Symbol("x");$jscomp.TRUST_ES6_POLYFILLS=!$jscomp.ISOLATE_POLYFILLS||$jscomp.IS_SYMBOL_NATIVE;$jscomp.polyfills={};
$jscomp.propertyToPolyfillSymbol={};$jscomp.POLYFILL_PREFIX="$jscp$";var $jscomp$lookupPolyfilledValue=function(a,b){var c=$jscomp.propertyToPolyfillSymbol[b];if(null==c)return a[b];c=a[c];return void 0!==c?c:a[b]};$jscomp.polyfill=function(a,b,c,f){b&&($jscomp.ISOLATE_POLYFILLS?$jscomp.polyfillIsolated(a,b,c,f):$jscomp.polyfillUnisolated(a,b,c,f))};
$jscomp.polyfillUnisolated=function(a,b,c,f){c=$jscomp.global;a=a.split(".");for(f=0;f<a.length-1;f++){var e=a[f];if(!(e in c))return;c=c[e]}a=a[a.length-1];f=c[a];b=b(f);b!=f&&null!=b&&$jscomp.defineProperty(c,a,{configurable:!0,writable:!0,value:b})};
$jscomp.polyfillIsolated=function(a,b,c,f){var e=a.split(".");a=1===e.length;f=e[0];f=!a&&f in $jscomp.polyfills?$jscomp.polyfills:$jscomp.global;for(var k=0;k<e.length-1;k++){var w=e[k];if(!(w in f))return;f=f[w]}e=e[e.length-1];c=$jscomp.IS_SYMBOL_NATIVE&&"es6"===c?f[e]:null;b=b(c);null!=b&&(a?$jscomp.defineProperty($jscomp.polyfills,e,{configurable:!0,writable:!0,value:b}):b!==c&&($jscomp.propertyToPolyfillSymbol[e]=$jscomp.IS_SYMBOL_NATIVE?$jscomp.global.Symbol(e):$jscomp.POLYFILL_PREFIX+e,e=
$jscomp.propertyToPolyfillSymbol[e],$jscomp.defineProperty(f,e,{configurable:!0,writable:!0,value:b})))};
$jscomp.getConstructImplementation=function(){function a(){function c(){}new c;Reflect.construct(c,[],function(){});return new c instanceof c}if($jscomp.TRUST_ES6_POLYFILLS&&"undefined"!=typeof Reflect&&Reflect.construct){if(a())return Reflect.construct;var b=Reflect.construct;return function(c,f,e){c=b(c,f);e&&Reflect.setPrototypeOf(c,e.prototype);return c}}return function(c,f,e){void 0===e&&(e=c);e=$jscomp.objectCreate(e.prototype||Object.prototype);return Function.prototype.apply.call(c,e,f)||
e}};$jscomp.construct={valueOf:$jscomp.getConstructImplementation}.valueOf();$jscomp.underscoreProtoCanBeSet=function(){var a={a:!0},b={};try{return b.__proto__=a,b.a}catch(c){}return!1};$jscomp.setPrototypeOf=$jscomp.TRUST_ES6_POLYFILLS&&"function"==typeof Object.setPrototypeOf?Object.setPrototypeOf:$jscomp.underscoreProtoCanBeSet()?function(a,b){a.__proto__=b;if(a.__proto__!==b)throw new TypeError(a+" is not extensible");return a}:null;
$jscomp.inherits=function(a,b){a.prototype=$jscomp.objectCreate(b.prototype);a.prototype.constructor=a;if($jscomp.setPrototypeOf){var c=$jscomp.setPrototypeOf;c(a,b)}else for(c in b)if("prototype"!=c)if(Object.defineProperties){var f=Object.getOwnPropertyDescriptor(b,c);f&&Object.defineProperty(a,c,f)}else a[c]=b[c];a.superClass_=b.prototype};$jscomp.polyfill("Reflect",function(a){return a?a:{}},"es6","es3");$jscomp.polyfill("Reflect.construct",function(a){return $jscomp.construct},"es6","es3");
$jscomp.polyfill("Reflect.setPrototypeOf",function(a){if(a)return a;if($jscomp.setPrototypeOf){var b=$jscomp.setPrototypeOf;return function(c,f){try{return b(c,f),!0}catch(e){return!1}}}return null},"es6","es5");$jscomp.polyfill("Array.prototype.fill",function(a){return a?a:function(b,c,f){var e=this.length||0;0>c&&(c=Math.max(0,e+c));if(null==f||f>e)f=e;f=Number(f);0>f&&(f=Math.max(0,e+f));for(c=Number(c||0);c<f;c++)this[c]=b;return this}},"es6","es3");
$jscomp.typedArrayFill=function(a){return a?a:Array.prototype.fill};$jscomp.polyfill("Int8Array.prototype.fill",$jscomp.typedArrayFill,"es6","es5");$jscomp.polyfill("Uint8Array.prototype.fill",$jscomp.typedArrayFill,"es6","es5");$jscomp.polyfill("Uint8ClampedArray.prototype.fill",$jscomp.typedArrayFill,"es6","es5");$jscomp.polyfill("Int16Array.prototype.fill",$jscomp.typedArrayFill,"es6","es5");$jscomp.polyfill("Uint16Array.prototype.fill",$jscomp.typedArrayFill,"es6","es5");
$jscomp.polyfill("Int32Array.prototype.fill",$jscomp.typedArrayFill,"es6","es5");$jscomp.polyfill("Uint32Array.prototype.fill",$jscomp.typedArrayFill,"es6","es5");$jscomp.polyfill("Float32Array.prototype.fill",$jscomp.typedArrayFill,"es6","es5");$jscomp.polyfill("Float64Array.prototype.fill",$jscomp.typedArrayFill,"es6","es5");$jscomp.findInternal=function(a,b,c){a instanceof String&&(a=String(a));for(var f=a.length,e=0;e<f;e++){var k=a[e];if(b.call(c,k,e,a))return{i:e,v:k}}return{i:-1,v:void 0}};
$jscomp.polyfill("Array.prototype.find",function(a){return a?a:function(b,c){return $jscomp.findInternal(this,b,c).v}},"es6","es3");$jscomp.polyfill("Array.prototype.findIndex",function(a){return a?a:function(b,c){return $jscomp.findInternal(this,b,c).i}},"es6","es3");mod=function(a,b){return(a%b+b)%b};var origin={x:0,y:0,z:0},Vector=function(a,b){b||(b=a,a=origin);this.x=b.x-a.x;this.y=b.y-a.y;this.z=b.z-a.z};
Vector.prototype.add=function(a){return new Vector(origin,{x:this.x+a.x,y:this.y+a.y,z:this.z+a.z})};Vector.prototype.subtract=function(a){return this.add({x:-a.x,y:-a.y,z:-a.z})};Vector.prototype.multiply=function(a){return new Vector(origin,{x:this.x*a,y:this.y*a,z:this.z*a})};Vector.prototype.magnitude=function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)};Vector.prototype.unit=function(){return this.multiply(1/this.magnitude())};
Vector.prototype.cross=function(a){return new Vector(origin,{x:this.y*a.z-this.z*a.y,y:this.z*a.x-this.x*a.z,z:this.x*a.y-this.y*a.x})};var qDimensions=["w","x","y","z"],qProductSign=[[1,1,1,1],[1,-1,1,-1],[1,-1,-1,1],[1,1,-1,-1]],qProductAxis=[[0,1,2,3],[1,0,3,2],[2,3,0,1],[3,2,1,0]],Quaternion=function(a,b,c,f){this.w=a;this.x=b;this.y=c;this.z=f};Quaternion.prototype.conjugate=function(){return new Quaternion(this.w,-this.x,-this.y,-this.z)};
Quaternion.prototype.multiply=function(a){for(var b=new Quaternion(0,0,0,0),c=0;4>c;c++)for(var f=0;4>f;f++)b[qDimensions[qProductAxis[c][f]]]+=qProductSign[c][f]*this[qDimensions[c]]*a[qDimensions[f]];return b};var Point=function(a,b,c,f){this.base={x:a,y:b,z:c};this.x=a;this.y=b;this.z=c;this.id=f};Point.prototype.update=function(a){a=this.rotateAroundAxis(this.base,a.axis.unit(),a.angle);var b=a.y,c=a.z;this.x=a.x;this.y=b;this.z=c};
Point.prototype.saveOrientation=function(a){this.update(a);this.base.x=this.x;this.base.y=this.y;this.base.z=this.z};Point.prototype.clone=function(){return new Point(this.x,this.y,this.z,this.id)};Point.prototype.rotateAroundAxis=function(a,b,c){var f=Math.sin(c/2);b=new Quaternion(Math.cos(c/2),f*b.x,f*b.y,f*b.z);a=new Quaternion(0,a.x,a.y,a.z);a=b.multiply(a).multiply(b.conjugate());return new Point(a.x,a.y,a.z)};
var ColorData=function(a,b){this.code=a;this.originalStickerId=b},Sticker=function(a,b,c){this.id=a;this.colorData=new ColorData(b,this.id);this.points=c;this.attractor={}};Sticker.prototype.contains=function(a){for(var b=this.points[this.points.length-1],c=0,f=$jscomp.makeIterator(this.points),e=f.next();!e.done;e=f.next()){e=e.value;b=(new Vector(b,e)).cross(new Vector(b,a));if(0>c&&0<b.z||0<c&&0>b.z)return!1;0!==b.z&&(c=b.z);b=e}return!0};
Sticker.prototype.calculateNormalVector=function(){return(new Vector(this.points[0],this.points[1])).cross(new Vector(this.points[0],this.points[this.points.length-1]))};Sticker.prototype.update=function(a){this.points.forEach(function(b){return b.update(a)});this.attractor={x:this.points.reduce(function(b,c){return b+c.x},0),y:this.points.reduce(function(b,c){return b+c.y},0),z:this.points.reduce(function(b,c){return b+c.z},0)}};
Sticker.prototype.getPointProjection=function(a,b,c){a=[a.x,a.y];c&&(a[0]+=(this.attractor.x-a[0])/(10*this.points.length),a[1]+=(this.attractor.y-a[1])/(10*this.points.length));b&&(a[0]=-a[0]);return a};
Sticker.prototype.render=function(a,b,c){var f=this;a.fillStyle=this.colorData.code;a.strokeStyle="#202020";a.beginPath();a.moveTo.apply(a,$jscomp.arrayFromIterable(this.getPointProjection(this.points[0],b,c)));this.points.forEach(function(e){return a.lineTo.apply(a,$jscomp.arrayFromIterable(f.getPointProjection(e,b,c)))});a.closePath();a.fill();a.stroke()};var Face=function(a){this.stickers=a;this.normalVector=this.stickers[0].calculateNormalVector()};
Face.prototype.update=function(a){this.stickers.forEach(function(b){return b.update(a)});this.normalVector=this.stickers[0].calculateNormalVector()};Face.prototype.render=function(a,b,c){this.stickers.forEach(function(f){return f.render(a,b,c)})};var Cycle=function(a,b,c,f,e){this.index=a;this.stickerCollections=b;this.period=c;this.unitVector=f;this.animationConfig=e;this.stickerCover={}};
Cycle.prototype.computeStickerCover=function(){var a=this;this.stickerCollections.forEach(function(b){return b.forEach(function(c){return a.stickerCover[c.id]=!0})})};Cycle.prototype.saveOrientation=function(a){var b=new Point(this.unitVector.x,this.unitVector.y,this.unitVector.z);b.update(a);this.unitVector=new Vector(b)};
Cycle.prototype.twist=function(a){var b=this;a=void 0===a?1:a;this.stickerCollections.forEach(function(c){if(1!==c.length){var f=a*c.length/b.period;c.forEach(function(e,k){e.$newColorData=c[mod(k-f,c.length)].colorData});c.forEach(function(e){e.colorData=e.$newColorData;delete e.$newColorData})}})};
var Puzzle=function(a,b,c,f){this.displayName=a;this.displaySize=b;this.faces=c;this.cycles=f;this.twisting=this.rotating=!1;this.startEvtCoordinates={};this.baseOrientation={axis:new Vector({x:1,y:0,z:0}),angle:0};this.animationState={active:!1,counter:0,direction:void 0,cycle:void 0};this.stickers=[].concat.apply([],$jscomp.arrayFromIterable(this.faces.map(function(e){return e.stickers})));this.clearStats();this.cycleMap={};this.processCycleMap();this.startSticker=void 0};
Puzzle.prototype.clearStats=function(){this.startTime=void 0;this.movesMade=0};Puzzle.prototype.isSolved=function(){for(var a=0;a<this.faces.length;a++)for(var b=0;b<this.faces[a].stickers.length;b++)if(this.faces[a].stickers[b].colorData.code!==this.faces[a].stickers[0].colorData.code)return!1;return!0};
Puzzle.prototype.processCycleMap=function(){var a=this;this.cycles.forEach(function(b){return b.stickerCollections.forEach(function(c){c.isPrimary&&c.forEach(function(f){a.cycleMap[f.id]=a.cycleMap[f.id]||[];a.cycleMap[f.id].push(b)})})})};
Puzzle.prototype.update=function(){var a=this;if(this.animationState.active&&this.animationState.counter<(window.animate?this.animationState.cycle.animationConfig.steps:1)){var b={axis:this.animationState.cycle.unitVector,angle:this.animationState.direction*this.animationState.counter*this.animationState.cycle.animationConfig.dAlpha};this.stickers.forEach(function(c){a.animationState.cycle.stickerCover[c.id]&&c.update(b)});this.stickers.sort(function(c,f){return f.attractor.z-c.attractor.z});this.animationState.counter++}else if(this.faces.forEach(function(c){return c.update(a.updatedOrientation||
a.baseOrientation)}),this.faces.sort(function(c,f){return f.normalVector.z-c.normalVector.z}),this.animationState.active){this.animationState.cycle.twist(this.animationState.direction);this.startTime&&this.isSolved()?(this.onFinish&&this.onFinish(((new Date).getTime()-this.startTime)/1E3),this.clearStats()):this.startTime&&this.movesMade++;if(this.animationState.callback&&(this.animationState.callback(),this.animationState.counter<(window.animate?this.animationState.cycle.animationConfig.steps:1)))return this.update();
this.animationState={active:!1,counter:0,direction:void 0,cycle:void 0}}};Puzzle.prototype.findTouchedSticker=function(a,b){for(var c,f=this.faces.length-1;0<=f&&!(0<=this.faces[f].normalVector.z);f--)if(c=this.faces[f].stickers.find(function(k){return k.contains({x:a,y:b,z:0})}))if(window.pointAndSwap)if(window.tempS){var e=c.colorData;c.colorData=window.tempS.colorData;window.tempS.colorData=e;window.tempS=void 0}else window.tempS=c;else return c};
Puzzle.prototype.grab=function(a,b,c){this.startEvtCoordinates.x=a;this.startEvtCoordinates.y=b;2===c?this.rotating=!0:(this.startSticker=this.findTouchedSticker(a,b),this.twisting=!!this.startSticker)};
Puzzle.prototype.drag=function(a,b){if(!this.animationState.active)if(this.rotating){if(a=(a-this.startEvtCoordinates.x)/100,b=(b-this.startEvtCoordinates.y)/100,a||b)b=new Vector({x:b,y:-a,z:0}),this.updatedOrientation={axis:b,angle:b.magnitude()}}else this.twisting&&(b=new Vector(new Point(this.startEvtCoordinates.x,this.startEvtCoordinates.y,0),new Point(a,b,0)),20<b.magnitude()&&(window.clearSolution(),this.detectCycle(b)))};
Puzzle.prototype.detectCycle=function(a){if(this.cycleMap[this.startSticker.id]){var b=0,c,f;this.cycleMap[this.startSticker.id].forEach(function(e){var k=new Point(e.unitVector.x,e.unitVector.y,e.unitVector.z);k.z=0;k=new Vector(k);k=a.cross(k);b<k.magnitude()&&(b=k.magnitude(),c=e,f=0<k.z?-1:1)});this.animateAndTwist(c,f);this.release()}};Puzzle.prototype.animateAndTwist=function(a,b){if(this.animationState.active)return!1;this.animationState={active:!0,counter:0,direction:b,cycle:a};return!0};
Puzzle.prototype.release=function(){this.twisting=this.rotating=!1;this.startEvtCoordinates={};this.updatedOrientation&&(this.saveOrientation(this.updatedOrientation),this.updatedOrientation=void 0);this.startSticker=void 0};Puzzle.prototype.saveOrientation=function(a){this.stickers.forEach(function(b){return b.points.forEach(function(c){return c.saveOrientation(a)})});this.cycles.forEach(function(b){return b.saveOrientation(a)})};
Puzzle.prototype.scramble=function(){var a=this;this.clearStats();window.hideStartButton();for(var b=3*this.cycles.length,c=[],f=0;f<b;f++)c.push({cycle:this.cycles[Math.floor(Math.random()*this.cycles.length)],direction:.5>Math.random()?-1:1});var e=[];window.clearSolution();window.disableSolveButton();c.forEach(function(k,w){var y=k.cycle;k=k.direction;w&&y===c[w-1].cycle&&(k=c[w-1].direction);e.push({active:!0,counter:0,direction:k,cycle:y,callback:w<b-1?function(){return a.animationState=e[w+
1]}:function(){window.showStartButton();window.enableSolveButton();a.startTime=(new Date).getTime()}})});this.animationState=e[0]};
Puzzle.prototype.render=function(a,b,c){c=void 0===c?!0:c;if(this.animationState.active){var f=$jscomp.makeIterator(b?[this.stickers.length-1,-1,-1]:[0,this.stickers.length,1]),e=f.next().value,k=f.next().value;for(f=f.next().value;e!==k;e+=f)this.stickers[e].render(a,b,c)}else for(f=$jscomp.makeIterator(b?[this.faces.length-1,-1,-1]:[0,this.faces.length,1]),e=f.next().value,k=f.next().value,f=f.next().value;e!==k;e+=f)this.faces[e].render(a,b,c)};
var Cube=function(a,b){a=void 0===a?2:a;b=void 0===b?250:b;var c=b/a,f=b/2,e={steps:10,dAlpha:Math.PI/2/10},k={},w=[];b=[{slices:[{fIndex:1,sIndex:0,sJump:a,cJump:1},{fIndex:3,sIndex:a-1,sJump:-1,cJump:a},{fIndex:0,sIndex:(a-1)*a,sJump:-a,cJump:1},{fIndex:2,sIndex:0,sJump:1,cJump:a}],attachedFaces:{ffIndex:4,lfIndex:5,iStep:a,jStep:1},unitVector:new Vector(new Point(0,0,1))},{slices:[{fIndex:1,sIndex:0,sJump:1,cJump:a},{fIndex:5,sIndex:(a-1)*a,sJump:-a,cJump:1},{fIndex:0,sIndex:a-1,sJump:-1,cJump:a},
{fIndex:4,sIndex:0,sJump:a,cJump:1}],attachedFaces:{ffIndex:2,lfIndex:3,iStep:1,jStep:a},unitVector:new Vector(new Point(0,-1,0))},{slices:[{fIndex:2,sIndex:0,sJump:a,cJump:1},{fIndex:5,sIndex:0,sJump:1,cJump:a},{fIndex:3,sIndex:(a-1)*a,sJump:-a,cJump:1},{fIndex:4,sIndex:a-1,sJump:-1,cJump:a}],attachedFaces:{ffIndex:0,lfIndex:1,iStep:1,jStep:a},unitVector:new Vector(new Point(-1,0,0))}];var y=[{key:"iStep",dir:1},{key:"jStep",dir:1},{key:"iStep",dir:-1},{key:"jStep",dir:-1}],F,C,D,t,z,B;[{fixed:"x",
direction:-1,variable:["y","z"],color:"yellow"},{fixed:"x",direction:1,variable:["y","z"],color:"white"},{fixed:"y",direction:-1,variable:["z","x"],color:"blue"},{fixed:"y",direction:1,variable:["z","x"],color:"lawngreen"},{fixed:"z",direction:-1,variable:["x","y"],color:"red"},{fixed:"z",direction:1,variable:["x","y"],color:"darkorange"}].forEach(function(r,l){var A=[];F=-f;for(var v=0;v<=a;v++){C=-f;for(var x=0;x<=a;x++)t="p-"+l+"-"+v+"-"+x,D={},D[r.fixed]=r.direction*f,D[r.variable[0]]=F,D[r.variable[1]]=
C,k[t]=new Point(D.x,D.y,D.z,t),v&&x&&(z="s-"+l+"-"+v+"-"+x,B=[k["p-"+l+"-"+v+"-"+x].clone(),k["p-"+l+"-"+(v-1)+"-"+x].clone(),k["p-"+l+"-"+(v-1)+"-"+(x-1)].clone(),k["p-"+l+"-"+v+"-"+(x-1)].clone()],-1===r.direction&&B.reverse(),A.push(new Sticker(z,r.color,B))),C+=c;F+=c}w.push(new Face(A))});var h=[],d,g,m,n,p,q,u;b.forEach(function(r){for(var l={$jscomp$loop$prop$c$21:0};l.$jscomp$loop$prop$c$21<a;l={$jscomp$loop$prop$c$21:l.$jscomp$loop$prop$c$21},l.$jscomp$loop$prop$c$21++)d=new Cycle(h.length,
[],4,r.unitVector,e),g=[],r.slices.forEach(function(A){return function(v){for(var x=0;x<a;x++)m=v.sIndex+x*v.sJump+A.$jscomp$loop$prop$c$21*v.cJump,g.push(w[v.fIndex].stickers[m])}}(l)),d.stickerCollections.push(g),h.push(d);n=h[h.length-a];q=w[r.attachedFaces.ffIndex];for(l={$jscomp$loop$prop$c$5$23:0};l.$jscomp$loop$prop$c$5$23<Math.floor(a/2);l={$jscomp$loop$prop$c$5$23:l.$jscomp$loop$prop$c$5$23},l.$jscomp$loop$prop$c$5$23++)g=[],m=l.$jscomp$loop$prop$c$5$23*(a+1),y.forEach(function(A){return function(v){var x=
v.key;v=v.dir;for(var E=0;E<a-2*A.$jscomp$loop$prop$c$5$23-1;E++)g.push(q.stickers[m]),m+=r.attachedFaces[x]*v}}(l)),n.stickerCollections.push(g);p=h[h.length-1];u=w[r.attachedFaces.lfIndex];for(l={$jscomp$loop$prop$c$6$25:0};l.$jscomp$loop$prop$c$6$25<Math.floor(a/2);l={$jscomp$loop$prop$c$6$25:l.$jscomp$loop$prop$c$6$25},l.$jscomp$loop$prop$c$6$25++)g=[],m=l.$jscomp$loop$prop$c$6$25*(a+1),y.forEach(function(A){return function(v){var x=v.key;v=v.dir;for(var E=0;E<a-2*A.$jscomp$loop$prop$c$6$25-1;E++)g.push(u.stickers[m]),
m+=r.attachedFaces[x]*v}}(l)),p.stickerCollections.push(g);a%2&&(n.stickerCollections.push([q.stickers[(a*a-1)/2]]),p.stickerCollections.push([u.stickers[(a*a-1)/2]]))});h.forEach(function(r){r.stickerCollections[0].isPrimary=!0;r.computeStickerCover()});Puzzle.call(this,"Cube",a,w,h);this.saveOrientation({axis:new Vector({x:0,y:1,z:0}),angle:Math.PI/4});this.saveOrientation({axis:new Vector({x:1,y:0,z:0}),angle:Math.PI/8})};$jscomp.inherits(Cube,Puzzle);
var Tetrahedron=function(a,b){a=void 0===a?3:a;b=void 0===b?200:b;var c=b/Math.sqrt(2),f={steps:10,dAlpha:2*Math.PI/3/10},e={},k=[],w=[];c=[new Point(b,0,c),new Point(-b,0,c),new Point(0,b,-c),new Point(0,-b,-c)];b=[{points:[c[0],c[2],c[1]],color:"white"},{points:[c[0],c[1],c[3]],color:"blue"},{points:[c[0],c[3],c[2]],color:"lawngreen"},{points:[c[1],c[2],c[3]],color:"red"}];c=[{slices:[{fIndex:0,sIJ:function(h){return[h,0]},dIJ:function(){return[0,1]}},{fIndex:1,sIJ:function(h){return[h,0]},dIJ:function(){return[0,
1]}},{fIndex:2,sIJ:function(h){return[h,0]},dIJ:function(){return[0,1]}}],attachedFace:{fIndex:3,steps:[function(){return[1,2]},function(){return[0,-2]},function(){return[-1,0]}]},unitVector:(new Vector(c[0])).unit()},{slices:[{fIndex:0,sIJ:function(h){return[a-h-1,2*(a-h-1)]},dIJ:function(h,d){return[d%2?0:1,d%2?-1:1]}},{fIndex:3,sIJ:function(h){return[h,0]},dIJ:function(){return[0,1]}},{fIndex:1,sIJ:function(h){return[a-1,2*h]},dIJ:function(h,d){return[d%2?-1:0,-1]}}],attachedFace:{fIndex:2,steps:[function(){return[1,
2]},function(){return[0,-2]},function(){return[-1,0]}]},unitVector:(new Vector(c[1])).unit()},{slices:[{fIndex:0,sIJ:function(h){return[a-1,2*h]},dIJ:function(h,d){return[d%2?-1:0,-1]}},{fIndex:2,sIJ:function(h){return[a-h-1,2*(a-h-1)]},dIJ:function(h,d){return[d%2?0:1,d%2?-1:1]}},{fIndex:3,sIJ:function(h){return[a-1,2*h]},dIJ:function(h,d){return[d%2?-1:0,-1]}}],attachedFace:{fIndex:1,steps:[function(){return[1,2]},function(){return[0,-2]},function(){return[-1,0]}]},unitVector:(new Vector(c[2])).unit()},
{slices:[{fIndex:1,sIJ:function(h){return[a-h-1,2*(a-h-1)]},dIJ:function(h,d){return[d%2?0:1,d%2?-1:1]}},{fIndex:3,sIJ:function(h){return[a-h-1,2*(a-h-1)]},dIJ:function(h,d){return[d%2?0:1,d%2?-1:1]}},{fIndex:2,sIJ:function(h){return[a-1,2*h]},dIJ:function(h,d){return[d%2?-1:0,-1]}}],attachedFace:{fIndex:0,steps:[function(){return[1,2]},function(){return[0,-2]},function(){return[-1,0]}]},unitVector:(new Vector(c[3])).unit()}];b.forEach(function(h,d){for(var g=[],m=[h.points[0].clone()],n,p,q,u,r,
l=(new Vector(h.points[0],h.points[1])).multiply(1/a),A=(new Vector(h.points[1],h.points[2])).multiply(1/a),v,x={$jscomp$loop$prop$i$27:0};x.$jscomp$loop$prop$i$27<a;x={$jscomp$loop$prop$i$27:x.$jscomp$loop$prop$i$27},x.$jscomp$loop$prop$i$27++){n=[];v=l.add(m[0]);n.push(new Point(v.x,v.y,v.z));for(var E=0;E<=x.$jscomp$loop$prop$i$27;E++)v=A.add(v),n.push(new Point(v.x,v.y,v.z));m.forEach(function(G){return function(J,H){p=J.clone();q=n[H].clone();u=n[H+1].clone();p.id="p-"+d+"-"+G.$jscomp$loop$prop$i$27+
"-"+H;q.id="p-"+d+"-"+(G.$jscomp$loop$prop$i$27+1)+"-"+H;u.id="p-"+d+"-"+(G.$jscomp$loop$prop$i$27+1)+"-"+(H+1);p.clone();q.clone();u.clone();g.push(new Sticker("s-"+d+"-"+G.$jscomp$loop$prop$i$27+"-"+2*H,h.color,[p,q,u]));e[g[g.length-1].id]=g[g.length-1];H<m.length-1&&(p=p.clone(),u=u.clone(),r=m[H+1].clone(),r.id="q-"+d+"-"+G.$jscomp$loop$prop$i$27+"-"+(H+1),p.clone(),u.clone(),r.clone(),g.push(new Sticker("s-"+d+"-"+G.$jscomp$loop$prop$i$27+"-"+(2*H+1),h.color,[p,u,r])),e[g[g.length-1].id]=g[g.length-
1])}}(x));m=n}k.push(new Face(g))});var y,F,C,D,t,z,B;c.forEach(function(h){for(var d={$jscomp$loop$prop$c$29:0};d.$jscomp$loop$prop$c$29<a;d={$jscomp$loop$prop$c$29:d.$jscomp$loop$prop$c$29},d.$jscomp$loop$prop$c$29++)y=new Cycle(w.length,[],3,h.unitVector,f),C=[],h.slices.forEach(function(u){return function(r){var l=$jscomp.makeIterator(r.sIJ(u.$jscomp$loop$prop$c$29));D=l.next().value;t=l.next().value;for(l=0;l<1+2*u.$jscomp$loop$prop$c$29;l++){var A=$jscomp.makeIterator(r.dIJ(u.$jscomp$loop$prop$c$29,
l));z=A.next().value;B=A.next().value;C.push(e["s-"+r.fIndex+"-"+D+"-"+t]);D+=z;t+=B}}}(d)),y.stickerCollections.push(C),w.push(y);y=w[w.length-1];F=h.attachedFace.fIndex;var g=a-1;d=1;for(var m=0,n,p,q;0<g;)p=q=m,C=[],h.attachedFace.steps.forEach(function(u){for(var r=n=0;r<g;r++){var l=$jscomp.makeIterator(u(m,n)),A=l.next().value;l=l.next().value;C.push(e["s-"+F+"-"+p+"-"+q]);p+=A;q+=l;n+=1}}),y.stickerCollections.push(C),m+=1,g-=d,d=2===d?1:2;e["s-"+F+"-"+m+"-"+m]&&a%3&&y.stickerCollections.push([e["s-"+
F+"-"+m+"-"+m]])});w.forEach(function(h){h.stickerCollections[0].isPrimary=!0;h.computeStickerCover()});Puzzle.call(this,"Tetrahedron",a,k,w);this.saveOrientation({axis:new Vector({x:0,y:1,z:0}),angle:Math.PI/3})};$jscomp.inherits(Tetrahedron,Puzzle);
var Octahedron=function(a,b){a=void 0===a?2:a;b=void 0===b?200:b;var c={steps:10,dAlpha:2*Math.PI/3/10},f={},e=[],k=[];b=[new Point(0,0,-b),new Point(b,0,0),new Point(0,b,0),new Point(-b,0,0),new Point(0,-b,0),new Point(0,0,b)];b=[{points:[b[0],b[2],b[1]],color:"white"},{points:[b[0],b[1],b[4]],color:"blue"},{points:[b[0],b[4],b[3]],color:"lawngreen"},{points:[b[0],b[3],b[2]],color:"skyblue"},{points:[b[5],b[1],b[2]],color:"red"},{points:[b[5],b[2],b[3]],color:"darkorange"},{points:[b[5],b[3],b[4]],
color:"purple"},{points:[b[5],b[4],b[1]],color:"yellow"}];var w=[{slices:[{fIndex:4,sIJ:function(d){return[a-d-1,2*(a-d-1)]},dIJ:function(){return[0,-1]},limJ:function(d){return 1+2*(a-d-1)}},{fIndex:7,sIJ:function(d){return[a-d-1,2*(a-d-1)]},dIJ:function(d,g){return[g%2?0:1,g%2?-1:1]},limJ:function(d){return 1+2*d}},{fIndex:1,sIJ:function(d){return[a-1,2*d]},dIJ:function(d,g){return[g%2?-1:0,g%2?-1:1]},limJ:function(d){return 1+2*(a-d-1)}},{fIndex:2,sIJ:function(d){return[d,0]},dIJ:function(){return[0,
1]},limJ:function(d){return 1+2*d}},{fIndex:3,sIJ:function(d){return[d,0]},dIJ:function(d,g){return[g%2?0:1,1]},limJ:function(d){return 1+2*(a-d-1)}},{fIndex:5,sIJ:function(d){return[a-1,2*d]},dIJ:function(d,g){return[g%2?-1:0,-1]},limJ:function(d){return 1+2*d}}],attachedFaces:[{fIndex:0,steps:[function(){return[1,0]},function(){return[0,2]},function(){return[-1,-2]}]},{fIndex:6,steps:[function(){return[1,2]},function(){return[0,-2]},function(){return[-1,0]}]}],unitVector:(new Vector(new Point(1,
1,-1))).unit()},{slices:[{fIndex:0,sIJ:function(d){return[d,0]},dIJ:function(d,g){return[g%2?0:1,1]},limJ:function(d){return 1+2*(a-d-1)}},{fIndex:4,sIJ:function(d){return[a-1,2*d]},dIJ:function(d,g){return[g%2?-1:0,-1]},limJ:function(d){return 1+2*d}},{fIndex:7,sIJ:function(d){return[a-d-1,2*(a-d-1)]},dIJ:function(){return[0,-1]},limJ:function(d){return 1+2*(a-d-1)}},{fIndex:6,sIJ:function(d){return[a-d-1,2*(a-d-1)]},dIJ:function(d,g){return[g%2?0:1,g%2?-1:1]},limJ:function(d){return 1+2*d}},{fIndex:2,
sIJ:function(d){return[a-1,2*d]},dIJ:function(d,g){return[g%2?-1:0,g%2?-1:1]},limJ:function(d){return 1+2*(a-d-1)}},{fIndex:3,sIJ:function(d){return[d,0]},dIJ:function(){return[0,1]},limJ:function(d){return 1+2*d}}],attachedFaces:[{fIndex:1,steps:[function(){return[1,0]},function(){return[0,2]},function(){return[-1,-2]}]},{fIndex:5,steps:[function(){return[1,2]},function(){return[0,-2]},function(){return[-1,0]}]}],unitVector:(new Vector(new Point(1,-1,-1))).unit()},{slices:[{fIndex:1,sIJ:function(d){return[d,
0]},dIJ:function(d,g){return[g%2?0:1,1]},limJ:function(d){return 1+2*(a-d-1)}},{fIndex:7,sIJ:function(d){return[a-1,2*d]},dIJ:function(d,g){return[g%2?-1:0,-1]},limJ:function(d){return 1+2*d}},{fIndex:6,sIJ:function(d){return[a-d-1,2*(a-d-1)]},dIJ:function(){return[0,-1]},limJ:function(d){return 1+2*(a-d-1)}},{fIndex:5,sIJ:function(d){return[a-d-1,2*(a-d-1)]},dIJ:function(d,g){return[g%2?0:1,g%2?-1:1]},limJ:function(d){return 1+2*d}},{fIndex:3,sIJ:function(d){return[a-1,2*d]},dIJ:function(d,g){return[g%
2?-1:0,g%2?-1:1]},limJ:function(d){return 1+2*(a-d-1)}},{fIndex:0,sIJ:function(d){return[d,0]},dIJ:function(){return[0,1]},limJ:function(d){return 1+2*d}}],attachedFaces:[{fIndex:2,steps:[function(){return[1,0]},function(){return[0,2]},function(){return[-1,-2]}]},{fIndex:4,steps:[function(){return[1,2]},function(){return[0,-2]},function(){return[-1,0]}]}],unitVector:(new Vector(new Point(-1,-1,-1))).unit()},{slices:[{fIndex:2,sIJ:function(d){return[d,0]},dIJ:function(d,g){return[g%2?0:1,1]},limJ:function(d){return 1+
2*(a-d-1)}},{fIndex:6,sIJ:function(d){return[a-1,2*d]},dIJ:function(d,g){return[g%2?-1:0,-1]},limJ:function(d){return 1+2*d}},{fIndex:5,sIJ:function(d){return[a-d-1,2*(a-d-1)]},dIJ:function(){return[0,-1]},limJ:function(d){return 1+2*(a-d-1)}},{fIndex:4,sIJ:function(d){return[a-d-1,2*(a-d-1)]},dIJ:function(d,g){return[g%2?0:1,g%2?-1:1]},limJ:function(d){return 1+2*d}},{fIndex:0,sIJ:function(d){return[a-1,2*d]},dIJ:function(d,g){return[g%2?-1:0,g%2?-1:1]},limJ:function(d){return 1+2*(a-d-1)}},{fIndex:1,
sIJ:function(d){return[d,0]},dIJ:function(){return[0,1]},limJ:function(d){return 1+2*d}}],attachedFaces:[{fIndex:3,steps:[function(){return[1,0]},function(){return[0,2]},function(){return[-1,-2]}]},{fIndex:7,steps:[function(){return[1,2]},function(){return[0,-2]},function(){return[-1,0]}]}],unitVector:(new Vector(new Point(-1,1,-1))).unit()}];b.forEach(function(d,g){for(var m=[],n=[d.points[0].clone()],p,q,u,r,l,A=(new Vector(d.points[0],d.points[1])).multiply(1/a),v=(new Vector(d.points[1],d.points[2])).multiply(1/
a),x,E={$jscomp$loop$prop$i$31:0};E.$jscomp$loop$prop$i$31<a;E={$jscomp$loop$prop$i$31:E.$jscomp$loop$prop$i$31},E.$jscomp$loop$prop$i$31++){p=[];x=A.add(n[0]);p.push(new Point(x.x,x.y,x.z));for(var G=0;G<=E.$jscomp$loop$prop$i$31;G++)x=v.add(x),p.push(new Point(x.x,x.y,x.z));n.forEach(function(J){return function(H,I){q=H.clone();u=p[I].clone();r=p[I+1].clone();q.id="p-"+g+"-"+J.$jscomp$loop$prop$i$31+"-"+I;u.id="p-"+g+"-"+(J.$jscomp$loop$prop$i$31+1)+"-"+I;r.id="p-"+g+"-"+(J.$jscomp$loop$prop$i$31+
1)+"-"+(I+1);q.clone();u.clone();r.clone();m.push(new Sticker("s-"+g+"-"+J.$jscomp$loop$prop$i$31+"-"+2*I,d.color,[q,u,r]));f[m[m.length-1].id]=m[m.length-1];I<n.length-1&&(q=q.clone(),r=r.clone(),l=n[I+1].clone(),l.id="q-"+g+"-"+J.$jscomp$loop$prop$i$31+"-"+(I+1),q.clone(),r.clone(),l.clone(),m.push(new Sticker("s-"+g+"-"+J.$jscomp$loop$prop$i$31+"-"+(2*I+1),d.color,[q,r,l])),f[m[m.length-1].id]=m[m.length-1])}}(E));n=p}e.push(new Face(m))});var y,F,C,D,t,z,B,h;w.forEach(function(d){for(var g={$jscomp$loop$prop$c$33:0};g.$jscomp$loop$prop$c$33<
a;g={$jscomp$loop$prop$c$33:g.$jscomp$loop$prop$c$33},g.$jscomp$loop$prop$c$33++)y=new Cycle(k.length,[],3,d.unitVector,c),C=[],d.slices.forEach(function(m){return function(n){var p=$jscomp.makeIterator(n.sIJ(m.$jscomp$loop$prop$c$33));D=p.next().value;t=p.next().value;h=n.limJ(m.$jscomp$loop$prop$c$33);for(p=0;p<h;p++){var q=$jscomp.makeIterator(n.dIJ(m.$jscomp$loop$prop$c$33,p));z=q.next().value;B=q.next().value;C.push(f["s-"+n.fIndex+"-"+D+"-"+t]);D+=z;t+=B}}}(g)),y.stickerCollections.push(C),
k.push(y);d.attachedFaces.forEach(function(m,n){y=n?k[k.length-1]:k[k.length-a];F=m.fIndex;var p=a-1;n=1;for(var q=0,u,r,l;0<p;)r=l=q,C=[],m.steps.forEach(function(A){for(var v=u=0;v<p;v++){var x=$jscomp.makeIterator(A(q,u)),E=x.next().value;x=x.next().value;C.push(f["s-"+F+"-"+r+"-"+l]);r+=E;l+=x;u+=1}}),y.stickerCollections.push(C),q+=1,p-=n,n=2===n?1:2;f["s-"+F+"-"+q+"-"+q]&&y.stickerCollections.push([f["s-"+F+"-"+q+"-"+q]])})});k.forEach(function(d){d.stickerCollections[0].isPrimary=!0;d.computeStickerCover()});
Puzzle.call(this,"Octahedron",a,e,k);this.saveOrientation({axis:new Vector({x:0,y:1,z:0}),angle:Math.PI/12});this.saveOrientation({axis:new Vector({x:1,y:0,z:0}),angle:Math.PI/24})};$jscomp.inherits(Octahedron,Puzzle);
var Dodecahedron=function(a,b){a=void 0===a?1:a;var c=(1+Math.sqrt(5))/2;b=(void 0===b?200:b)/2;var f=b*c;c=1*b/c;var e=[],k=[],w={},y={},F={steps:10,dAlpha:2*Math.PI/5/10};c=[new Point(b,b,b,"r0"),new Point(b,b,-b,"r1"),new Point(b,-b,b,"r2"),new Point(b,-b,-b,"r3"),new Point(-b,b,b,"r4"),new Point(-b,b,-b,"r5"),new Point(-b,-b,b,"r6"),new Point(-b,-b,-b,"r7"),new Point(f,c,0,"r8"),new Point(f,-c,0,"r9"),new Point(-f,c,0,"r10"),new Point(-f,-c,0,"r11"),new Point(0,f,c,"r12"),new Point(0,f,-c,"r13"),
new Point(0,-f,c,"r14"),new Point(0,-f,-c,"r15"),new Point(c,0,f,"r16"),new Point(c,0,-f,"r17"),new Point(-c,0,f,"r18"),new Point(-c,0,-f,"r19")];var C=[{points:[c[8],c[1],c[13],c[12],c[0]],color:"purple"},{points:[c[9],c[2],c[14],c[15],c[3]],color:"magenta"},{points:[c[10],c[4],c[12],c[13],c[5]],color:"white"},{points:[c[11],c[7],c[15],c[14],c[6]],color:"yellow"},{points:[c[12],c[4],c[18],c[16],c[0]],color:"pink"},{points:[c[13],c[1],c[17],c[19],c[5]],color:"blue"},{points:[c[14],c[2],c[16],c[18],
c[6]],color:"green"},{points:[c[15],c[7],c[19],c[17],c[3]],color:"crimson"},{points:[c[16],c[2],c[9],c[8],c[0]],color:"red"},{points:[c[17],c[1],c[8],c[9],c[3]],color:"lawngreen"},{points:[c[18],c[4],c[10],c[11],c[6]],color:"brown"},{points:[c[19],c[7],c[11],c[10],c[5]],color:"skyblue"}];c=function(g){return C[g].points.reduce(function(m,n){return m.add(n)},new Vector({x:0,y:0,z:0}))};b=[];for(f=0;12>f;f++){var D={unitVector:c(f),slices:{length:5}},t=void 0,z=void 0,B=void 0;for(t=0;12>t;t++)if(t!=
f)for(var h=0;5>h;h++)for(var d=0;5>d;d++)C[f].points[h].id===C[t].points[d].id&&C[f].points[mod(h+1,5)].id===C[t].points[mod(d-1,5)].id&&(z=d,B=mod(d-1,5),D.slices[h]={face:t,startV:z,endV:B});D.slices=Array.prototype.slice.apply(D.slices);b.push(D)}C.forEach(function(g,m){var n=[];g.points.forEach(function(p,q){var u=new Vector(p),r=(new Vector(p,g.points[mod(q+1,g.points.length)])).multiply(1/(2*a));p=(new Vector(p,g.points[mod(q-1,g.points.length)])).multiply(1/(2*a));var l,A;for(l=0;l<=a;l++)for(A=
0;A<=a;A++){var v=u.add(r.multiply(l)).add(p.multiply(A));w["p-"+m+"-"+q+"-"+l+"-"+A]=new Point(v.x,v.y,v.z);l&&A&&(n.push(new Sticker("s-"+m+"-"+q+"-"+(l-1)+"-"+(A-1),g.color,[w["p-"+m+"-"+q+"-"+l+"-"+A].clone(),w["p-"+m+"-"+q+"-"+(l-1)+"-"+A].clone(),w["p-"+m+"-"+q+"-"+(l-1)+"-"+(A-1)].clone(),w["p-"+m+"-"+q+"-"+l+"-"+(A-1)].clone()])),y[n[n.length-1].id]=n[n.length-1])}v=(new Vector(g.points[mod(q,g.points.length)],g.points[mod(q-1,g.points.length)])).multiply(1/(2*a));A=(new Vector(g.points[mod(q+
1,g.points.length)],g.points[mod(q+2,g.points.length)])).multiply(1/(2*a));var x=u.add(r.multiply(a));for(l=0;l<=a;l++){var E=x.add(v.multiply(l));var G=x.add(A.multiply(l));w["p-m-"+m+"-"+q+"-"+l+"-l"]=new Point(E.x,E.y,E.z);w["p-m-"+m+"-"+q+"-"+l+"-r"]=new Point(G.x,G.y,G.z);l&&(n.push(new Sticker("s-"+m+"-"+q+"-"+(l-1)+"-"+a,g.color,[w["p-m-"+m+"-"+q+"-"+l+"-l"].clone(),w["p-m-"+m+"-"+q+"-"+l+"-r"].clone(),w["p-m-"+m+"-"+q+"-"+(l-1)+"-r"].clone(),w["p-m-"+m+"-"+q+"-"+(l-1)+"-l"].clone()])),y[n[n.length-
1].id]=n[n.length-1])}u=u.add(r.multiply(a)).add(p.multiply(a));w["p-"+m+"-"+q]=new Point(u.x,u.y,u.z)});n.push(new Sticker("s-"+m,g.color,[w["p-"+m+"-0"].clone(),w["p-"+m+"-1"].clone(),w["p-"+m+"-2"].clone(),w["p-"+m+"-3"].clone(),w["p-"+m+"-4"].clone()]));y[n[n.length-1].id]=n[n.length-1];e.push(new Face(n))});b.forEach(function(g,m){for(var n,p={$jscomp$loop$prop$i$40:0};p.$jscomp$loop$prop$i$40<a;p={$jscomp$loop$prop$i$40:p.$jscomp$loop$prop$i$40,$jscomp$loop$prop$stickerCollection$8$39:p.$jscomp$loop$prop$stickerCollection$8$39},
p.$jscomp$loop$prop$i$40++){for(var q=new Cycle(k.length,[],5,g.unitVector,F),u={$jscomp$loop$prop$j$38:0};u.$jscomp$loop$prop$j$38<a;u={$jscomp$loop$prop$stickerCollection$35:u.$jscomp$loop$prop$stickerCollection$35,$jscomp$loop$prop$j$38:u.$jscomp$loop$prop$j$38},u.$jscomp$loop$prop$j$38++)u.$jscomp$loop$prop$stickerCollection$35=[],g.slices.forEach(function(r,l){return function(A){r.$jscomp$loop$prop$stickerCollection$35.push(y["s-"+A.face+"-"+A.startV+"-"+l.$jscomp$loop$prop$i$40+"-"+r.$jscomp$loop$prop$j$38]);
r.$jscomp$loop$prop$stickerCollection$35.push(y["s-"+A.face+"-"+A.endV+"-"+r.$jscomp$loop$prop$j$38+"-"+l.$jscomp$loop$prop$i$40])}}(u,p)),q.stickerCollections.push(u.$jscomp$loop$prop$stickerCollection$35);p.$jscomp$loop$prop$stickerCollection$8$39=[];g.slices.forEach(function(r){return function(l){r.$jscomp$loop$prop$stickerCollection$8$39.push(y["s-"+l.face+"-"+l.endV+"-"+r.$jscomp$loop$prop$i$40+"-"+a])}}(p));q.stickerCollections.push(p.$jscomp$loop$prop$stickerCollection$8$39);q.stickerCollections.forEach(function(r){return r.isPrimary=
!0});k.push(q);p.$jscomp$loop$prop$i$40||(n=q)}for(g=0;g<a;g++)for(p=0;p<=a;p++){q=[];for(u=0;5>u;u++)q.push(y["s-"+m+"-"+u+"-"+g+"-"+p]);n.stickerCollections.push(q)}n.stickerCollections.push([y["s-"+m]])});k.forEach(function(g){return g.computeStickerCover()});Puzzle.call(this,"Dodecahedron",a<<1,e,k);this.saveOrientation({axis:new Vector({x:1,y:0,z:0}),angle:-Math.PI/5})};$jscomp.inherits(Dodecahedron,Puzzle);
var Icosahedron=function(a,b){a=void 0===a?2:a;var c={},f={},e=[],k=[],w={steps:10,dAlpha:2*Math.PI/5/10};b=(void 0===b?200:b)/2;var y=b*(1+Math.sqrt(5))/2;b=[new Point(0,y,b,"r0"),new Point(0,y,-b,"r1"),new Point(0,-y,b,"r2"),new Point(0,-y,-b,"r3"),new Point(y,b,0,"r4"),new Point(y,-b,0,"r5"),new Point(-y,b,0,"r6"),new Point(-y,-b,0,"r7"),new Point(b,0,y,"r8"),new Point(-b,0,y,"r9"),new Point(b,0,-y,"r10"),new Point(-b,0,-y,"r11")];var F=[{points:[b[0],b[4],b[1]],color:"white"},{points:[b[0],b[1],
b[6]],color:"blue"},{points:[b[0],b[6],b[9]],color:"red"},{points:[b[0],b[9],b[8]],color:"lawngreen"},{points:[b[0],b[8],b[4]],color:"skyblue"},{points:[b[3],b[2],b[7]],color:"orange"},{points:[b[3],b[5],b[2]],color:"darkolivegreen"},{points:[b[3],b[10],b[5]],color:"yellow"},{points:[b[3],b[11],b[10]],color:"lightgreen"},{points:[b[3],b[7],b[11]],color:"salmon"},{points:[b[4],b[5],b[10]],color:"magenta"},{points:[b[1],b[10],b[11]],color:"crimson"},{points:[b[6],b[11],b[7]],color:"indigo"},{points:[b[9],
b[7],b[2]],color:"brown"},{points:[b[8],b[2],b[5]],color:"darkblue"},{points:[b[2],b[8],b[9]],color:"pink"},{points:[b[5],b[4],b[8]],color:"burlywood"},{points:[b[10],b[1],b[4]],color:"darkcyan"},{points:[b[11],b[6],b[1]],color:"darkmagenta"},{points:[b[7],b[9],b[6]],color:"goldenrod"}];F.forEach(function(t,z){return t.id=z});var C={},D=[];b.forEach(function(t){var z=t.id;t={root:t,faces:[]};var B=F.find(function(g){return g.points.find(function(m){return m.id===z})});t.faces.push(B);[].push(B.points[mod(B.points.findIndex(function(g){return g.id===
z})+2,3)].id);for(var h={},d=0;4>d;h={$jscomp$loop$prop$p1id$42:h.$jscomp$loop$prop$p1id$42,$jscomp$loop$prop$p0id$43:h.$jscomp$loop$prop$p0id$43,$jscomp$loop$prop$p2id$44:h.$jscomp$loop$prop$p2id$44},d++)h.$jscomp$loop$prop$p0id$43=z,h.$jscomp$loop$prop$p1id$42=B.points[mod(B.points.findIndex(function(g){return g.id===z})+1,3)].id,h.$jscomp$loop$prop$p2id$44=B.points[mod(B.points.findIndex(function(g){return g.id===z})+2,3)].id,B=F.find(function(g){return function(m){m=m.points;return!m.find(function(n){return n.id===
g.$jscomp$loop$prop$p1id$42})&&m.find(function(n){return n.id===g.$jscomp$loop$prop$p0id$43})&&m.find(function(n){return n.id===g.$jscomp$loop$prop$p2id$44})}}(h)),t.faces.push(B);D.push(t)});F.forEach(function(t,z){var B=t.points;t=t.color;var h=[],d=new Vector(B[0]),g=(new Vector(B[0],B[1])).multiply(1/a),m=(new Vector(B[1],B[2])).multiply(1/a),n,p;for(n=0;n<=a;n++)for(p=0;p<=n;p++){var q=d.add(g.multiply(n)).add(m.multiply(p));c["p-"+z+"-"+n+"-"+p]=new Point(q.x,q.y,q.z);n&&p&&(h.push(new Sticker("s-"+
z+"-"+n+"-"+p,t,[c["p-"+z+"-"+(n-1)+"-"+(p-1)].clone(),c["p-"+z+"-"+n+"-"+(p-1)].clone(),c["p-"+z+"-"+n+"-"+p].clone()])),f[h[h.length-1].id]=h[h.length-1],p<n&&(h.push(new Sticker("s-"+z+"-"+n+"-"+p+"-r",t,[c["p-"+z+"-"+n+"-"+p].clone(),c["p-"+z+"-"+(n-1)+"-"+p].clone(),c["p-"+z+"-"+(n-1)+"-"+(p-1)].clone()])),f[h[h.length-1].id]=h[h.length-1]))}e.push(new Face(h));t={};t[B[0].id]=[];for(h=1;h<=a;h++){d=[];for(g=1;g<=h;g++)d.push(f["s-"+z+"-"+h+"-"+g]),g<h&&d.push(f["s-"+z+"-"+h+"-"+g+"-r"]);t[B[0].id].push(d)}t[B[1].id]=
[];for(h=1;h<=a;h++){d=[];for(g=1;g<=h;g++)d.push(f["s-"+z+"-"+(a-(g-1))+"-"+(h-(g-1))]),g<h&&d.push(f["s-"+z+"-"+(a-(g-1))+"-"+(h-g)+"-r"]);t[B[1].id].push(d)}t[B[2].id]=[];for(h=1;h<=a;h++){d=[];for(g=1;g<=h;g++)d.push(f["s-"+z+"-"+(a+(g-1)-(h-1))+"-"+(a-(h-1))]),g<h&&d.push(f["s-"+z+"-"+(a+1+(g-1)-(h-1))+"-"+(a-(h-1))+"-r"]);t[B[2].id].push(d)}C[z]=t});D.forEach(function(t){var z=t.faces,B=t.root;for(t={$jscomp$loop$prop$c$46:0};t.$jscomp$loop$prop$c$46<a;t={$jscomp$loop$prop$c$46:t.$jscomp$loop$prop$c$46},
t.$jscomp$loop$prop$c$46++){var h=(new Vector(B)).unit(),d=[Array.prototype.concat.apply([],z.map(function(g){return function(m){return C[m.id][B.id][g.$jscomp$loop$prop$c$46]}}(t)))];k.push(new Cycle(k.length,d,5,h,w))}});k.forEach(function(t){t.stickerCollections[0].isPrimary=!0;t.computeStickerCover()});Puzzle.call(this,"Icosahedron",a,e,k);this.saveOrientation({axis:new Vector({x:1,y:0,z:0}),angle:-27*Math.PI/40})};$jscomp.inherits(Icosahedron,Puzzle);
(function(){window.menuConfig={puzzles:{tetrahedron:function(b,c){return new Tetrahedron(b,c?42.5:void 0)},cube:function(b,c){return new Cube(b,c?50:void 0)},octahedron:function(b,c){return new Octahedron(b,c?42.5:void 0)},dodecahedron:function(b,c){return new Dodecahedron(b,c?42.5:void 0)},icosahedron:function(b,c){return new Icosahedron(b,c?42.5:void 0)}},sizes:{tetrahedron:[3,4,5],cube:[2,3,4],octahedron:[2,3,4],dodecahedron:[1,2,3],icosahedron:[2,3,4]}};var a=0;window.showShapeMenu=function(){a++;
window.puzzlemenu.style.display=window.shapemenu.style.display=window.settingsmenubutton.style.display="inline-block";window.configurationmenu.style.display=window.puzzlemenubutton.style.display=window.sizemenu.style.display="none";var b=a,c={},f;for(f in window.menuConfig.puzzles)c.$jscomp$loop$prop$elemId$51=f,c.$jscomp$loop$prop$ctx$48=window[c.$jscomp$loop$prop$elemId$51].getContext("2d"),c.$jscomp$loop$prop$puzzle$49=(0,window.menuConfig.puzzles[c.$jscomp$loop$prop$elemId$51])(void 0,!0),c.$jscomp$loop$prop$puzzle$49.updatedOrientation=
{axis:new Vector({x:1,y:1,z:0}),angle:0},c.$jscomp$loop$prop$ctx$48.setTransform(1,0,0,1,0,0),c.$jscomp$loop$prop$ctx$48.translate(50,50),c.$jscomp$loop$prop$loop$50=function(e){return function(){e.$jscomp$loop$prop$ctx$48.save();e.$jscomp$loop$prop$ctx$48.setTransform(1,0,0,1,0,0);e.$jscomp$loop$prop$ctx$48.clearRect(0,0,gameCanvas.width,gameCanvas.height);e.$jscomp$loop$prop$ctx$48.restore();e.$jscomp$loop$prop$puzzle$49.updatedOrientation.angle+=.015;e.$jscomp$loop$prop$puzzle$49.update();e.$jscomp$loop$prop$puzzle$49.render(e.$jscomp$loop$prop$ctx$48);
a===b&&requestAnimationFrame(e.$jscomp$loop$prop$loop$50)}}(c),requestAnimationFrame(c.$jscomp$loop$prop$loop$50),window[c.$jscomp$loop$prop$elemId$51].onmousedown=function(e){return function(){return showSizeMenu(e.$jscomp$loop$prop$elemId$51)}}(c),c={$jscomp$loop$prop$ctx$48:c.$jscomp$loop$prop$ctx$48,$jscomp$loop$prop$puzzle$49:c.$jscomp$loop$prop$puzzle$49,$jscomp$loop$prop$loop$50:c.$jscomp$loop$prop$loop$50,$jscomp$loop$prop$elemId$51:c.$jscomp$loop$prop$elemId$51}};window.showSizeMenu=function(b){a++;
var c=a;window.shapemenu.style.display=window.settingsmenubutton.style.display="none";window.sizemenu.style.display=window.puzzlemenubutton.style.display="inline-block";for(var f={},e=0;3>e;f={$jscomp$loop$prop$ctx$53:f.$jscomp$loop$prop$ctx$53,$jscomp$loop$prop$puzzle$54:f.$jscomp$loop$prop$puzzle$54,$jscomp$loop$prop$loop$55:f.$jscomp$loop$prop$loop$55,$jscomp$loop$prop$constructor$56:f.$jscomp$loop$prop$constructor$56,$jscomp$loop$prop$puzzleSize$57:f.$jscomp$loop$prop$puzzleSize$57},e++)f.$jscomp$loop$prop$ctx$53=
window["size-"+(e+1)].getContext("2d"),f.$jscomp$loop$prop$constructor$56=window.menuConfig.puzzles[b],f.$jscomp$loop$prop$puzzleSize$57=window.menuConfig.sizes[b][e],f.$jscomp$loop$prop$puzzle$54=f.$jscomp$loop$prop$constructor$56(f.$jscomp$loop$prop$puzzleSize$57,!0),f.$jscomp$loop$prop$puzzle$54.updatedOrientation={axis:new Vector({x:1,y:1,z:0}),angle:0},f.$jscomp$loop$prop$ctx$53.setTransform(1,0,0,1,0,0),f.$jscomp$loop$prop$ctx$53.translate(50,50),f.$jscomp$loop$prop$loop$55=function(k){return function(){k.$jscomp$loop$prop$ctx$53.save();
k.$jscomp$loop$prop$ctx$53.setTransform(1,0,0,1,0,0);k.$jscomp$loop$prop$ctx$53.clearRect(0,0,gameCanvas.width,gameCanvas.height);k.$jscomp$loop$prop$ctx$53.restore();k.$jscomp$loop$prop$puzzle$54.updatedOrientation.angle+=.015;k.$jscomp$loop$prop$puzzle$54.update();k.$jscomp$loop$prop$puzzle$54.render(k.$jscomp$loop$prop$ctx$53);a===c&&requestAnimationFrame(k.$jscomp$loop$prop$loop$55)}}(f),requestAnimationFrame(f.$jscomp$loop$prop$loop$55),window["size-"+(e+1)].onmousedown=function(k){return function(){window.clearSolution();
window.selectedPuzzle=k.$jscomp$loop$prop$constructor$56(k.$jscomp$loop$prop$puzzleSize$57,!1);window.showStartButton()}}(f)};window.showSettingsMenu=function(){window.puzzlemenu.style.display=window.settingsmenubutton.style.display="none";window.configurationmenu.style.display=window.puzzlemenubutton.style.display="inline-block"};window.hideStartButton=function(){window.startbutton.style.visibility="hidden"};window.showStartButton=function(){window.startbutton.style.visibility="visible"};window.showShapeMenu()})();
(function(){var a=gameCanvas.getContext("2d"),b=gameCanvasInverted.getContext("2d");a.translate(300,300);b.scale(1/3,1/3);b.translate(300,300);var c=function(){var e=gameCanvas.getBoundingClientRect();return{x:e.left+300,y:e.top+300}};window.explodedStickers=!0;window.animate=!0;window.selectedPuzzle=new Tetrahedron;Puzzle.prototype.onFinish=function(e){window.help.style.display="none";window.menu.style.display="none";window.success.style.display="inline-block";window.message.innerHTML="You solved it in "+
e+" seconds.<br/> Good Job."};var f=function(){a.save();a.setTransform(1,0,0,1,0,0);a.clearRect(0,0,gameCanvas.width,gameCanvas.height);a.restore();window.selectedPuzzle.update();window.selectedPuzzle.render(a,!1,window.explodedStickers);window.showRearView&&(b.save(),b.setTransform(1,0,0,1,0,0),b.clearRect(0,0,gameCanvas.width,gameCanvas.height),b.restore(),window.selectedPuzzle.render(b,!0,window.explodedStickers));if(window.selectedPuzzle.startTime){var e=Math.floor(((new Date).getTime()-window.selectedPuzzle.startTime)/
1E3),k=""+Math.floor(e/60);e=""+e%60;2>k.length&&(k="0"+k);2>e.length&&(e="0"+e);window.stats.innerHTML="Time Taken: "+k+":"+e+", Moves Made: "+window.selectedPuzzle.movesMade}else window.stats.innerHTML="Time Taken: --:--, Moves Made: --";requestAnimationFrame(f)};requestAnimationFrame(f);document.addEventListener("contextmenu",function(e){return e.preventDefault()});gameCanvas.addEventListener("mousedown",function(e){e.preventDefault();e.stopPropagation();var k=c();window.selectedPuzzle.grab(e.clientX-
k.x,e.clientY-k.y,e.ctrlKey?2:e.button)});gameCanvas.addEventListener("mousemove",function(e){e.preventDefault();e.stopPropagation();var k=c();window.selectedPuzzle.drag(e.clientX-k.x,e.clientY-k.y)});gameCanvas.addEventListener("mouseup",function(e){e.preventDefault();e.stopPropagation();window.selectedPuzzle.release()});gameCanvas.addEventListener("mouseleave",function(e){window.selectedPuzzle.release()})})();
(function(){window.Worker?window.solverWorker=new Worker("src/solver-worker.js"):(window.solverunsupported.style.display="block",window.solvewrapper.style.display="none");var a=window.solutionStack={movesMade:[],movesToMake:[]};window.updateSolutionPanel=function(){var e=a.movesToMake.length?a.movesToMake[a.movesToMake.length-1].subSequence:"";window.solutioninfo.innerHTML="\n            "+(a.movesToMake.length?a.movesToMake[a.movesToMake.length-1].sequence:a.movesMade.length?"Solved!":"Already Solved!")+
"\n            <br/>\n            "+(e?e+"<br/>":"")+"\n            "+a.movesMade.length+"/"+(a.movesMade.length+a.movesToMake.length);window.applysolutionpanel.style.visibility=a.movesToMake.length?"visible":"hidden";window.revertsolutionpanel.style.visibility=a.movesMade.length?"visible":"hidden"};var b=!1,c=!1,f=!1;window.clearSolution=function(){b?c=!0:window.solutionpanel.style.display="none"};window.disableSolveButton=function(){window.solvebutton.style.color="grey";window.solvebutton.style.borderColor=
"grey";f=!0};window.enableSolveButton=function(){window.solvebutton.style.color="skyblue";window.solvebutton.style.borderColor="skyblue";f=!1};window.generateSolution=function(){b||f||(b=!0,window.selectedPuzzle.clearStats(),window.solvebutton.style.display="none",window.solverstatus.style.display="block",window.solverstatustext.innerHTML="Initializing solver for "+window.selectedPuzzle.displayName+" of size "+window.selectedPuzzle.displaySize+"\n            <br/>(This may take minutes for large puzzles)\n            ",
window.solverWorker.postMessage(window.selectedPuzzle))};window.solverWorker&&(window.solverWorker.onmessage=function(e){"INITIALIZED"===e.data.status&&(window.solverstatustext.innerText="Solving "+window.selectedPuzzle.displayName+" of size "+window.selectedPuzzle.displaySize);"SOLVED"===e.data.status&&(window.solverstatus.style.display="none",window.solvebutton.style.display="inline-block",c||(window.solutionStack.movesMade=[],window.solutionStack.movesToMake=e.data.solution.reverse(),window.solutionpanel.style.display=
"block",updateSolutionPanel()),b=c=!1)});window.makeSolverMove=function(){if(a.movesToMake.length){var e=a.movesToMake.pop();window.selectedPuzzle.animateAndTwist(window.selectedPuzzle.cycles[e.cycleIndex],e.direction>e.period>>1?e.direction-e.period:e.direction)?(a.movesMade.push(e),updateSolutionPanel()):a.movesToMake.push(e)}};window.revertSolverMove=function(){if(a.movesMade.length){var e=a.movesMade.pop();window.selectedPuzzle.animateAndTwist(window.selectedPuzzle.cycles[e.cycleIndex],-(e.direction>
e.period>>1?e.direction-e.period:e.direction))?(a.movesToMake.push(e),updateSolutionPanel()):a.movesMade.push(e)}};window.makeSolverMoveSequence=function(){if(a.movesToMake.length){for(var e=a.movesToMake[a.movesToMake.length-1].sequence;a.movesToMake.length&&a.movesToMake[a.movesToMake.length-1].sequence===e;){var k=a.movesToMake.pop();window.selectedPuzzle.cycles[k.cycleIndex].twist(k.direction);a.movesMade.push(k)}updateSolutionPanel()}};window.revertSolverMoveSequence=function(){if(a.movesMade.length){for(var e=
a.movesMade[a.movesMade.length-1].sequence;a.movesMade.length&&a.movesMade[a.movesMade.length-1].sequence===e;){var k=a.movesMade.pop();window.selectedPuzzle.cycles[k.cycleIndex].twist(-k.direction);a.movesToMake.push(k)}updateSolutionPanel()}};window.makeAllSolverMoves=function(){for(;a.movesToMake.length;){var e=a.movesToMake.pop();window.selectedPuzzle.cycles[e.cycleIndex].twist(e.direction);a.movesMade.push(e)}updateSolutionPanel()};window.revertAllSolverMoves=function(){for(;a.movesMade.length;){var e=
a.movesMade.pop();window.selectedPuzzle.cycles[e.cycleIndex].twist(-e.direction);a.movesToMake.push(e)}updateSolutionPanel()}})();
